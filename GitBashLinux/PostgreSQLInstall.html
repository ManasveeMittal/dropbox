<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<!-- saved from url=(0044)https://help.ubuntu.com/community/PostgreSQL -->
<html class="gr__help_ubuntu_com"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="robots" content="index,nofollow">

<title>PostgreSQL - Community Help Wiki</title>
<script type="text/javascript" src="./PostgreSQL - Community Help Wiki_files/common.js"></script>

<script type="text/javascript">
<!--
var search_hint = "Search";
//-->
</script>


<link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="./PostgreSQL - Community Help Wiki_files/common.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="screen" href="./PostgreSQL - Community Help Wiki_files/screen.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="print" href="./PostgreSQL - Community Help Wiki_files/print.css">
<link rel="stylesheet" type="text/css" charset="utf-8" media="projection" href="./PostgreSQL - Community Help Wiki_files/projection.css">

<!-- css only for MS IE6/IE7 browsers -->
<!--[if lt IE 8]>
   <link rel="stylesheet" type="text/css" charset="utf-8" media="all" href="/moin_static193/light/css/msie.css">
<![endif]-->





<link rel="Start" href="https://help.ubuntu.com/community/CommunityHelpWiki">
<link rel="Alternate" title="Wiki Markup" href="https://help.ubuntu.com/community/PostgreSQL?action=raw">
<link rel="Alternate" media="print" title="Print View" href="https://help.ubuntu.com/community/PostgreSQL?action=print">
<link rel="Search" href="https://help.ubuntu.com/community/FindPage">
<link rel="Index" href="https://help.ubuntu.com/community/TitleIndex">
<link rel="Glossary" href="https://help.ubuntu.com/community/WordIndex">
<link rel="Help" href="https://help.ubuntu.com/community/HelpOnFormatting">
<style type="text/css">
:root #header + #content > #left > #rlblock_left,
:root #content > #center > .dose > .dosesingle,
:root #content > #right > .dose > .dosesingle
{ display: none !important; }</style></head>

<body lang="en" dir="ltr" data-gr-c-s-loaded="true"><div id="StayFocusd-infobar" style="display: none; top: 0px;">
    <img src="chrome-extension://laankejkbhbdhmipfmgcngdelahlfoji/common/img/eye_19x19_red.png">
    <span id="StayFocusd-infobar-msg"></span>
    <span id="StayFocusd-infobar-links">
        <a id="StayFocusd-infobar-never-show">hide forever</a>&nbsp;&nbsp;|&nbsp;&nbsp;
        <a id="StayFocusd-infobar-hide">hide once</a>
    </span>
</div>


    <div id="leftbanner">
    </div>
    <div id="rightbanner">
    </div>
    <div id="container">
        <div id="container-inner">
	    <div id="mothership">
		<ul>
	            <li><a href="http://www.ubuntu.com/partners">Partners</a> </li>
        	    <li><a href="http://www.ubuntu.com/support">Support</a></li>
        	    <li><a href="http://www.ubuntu.com/community">Community</a></li>
        	    <li><a href="http://www.ubuntu.com/">Ubuntu.com</a></li>
	        </ul>
	    </div>
            <div id="header">
                <h1 id="ubuntu-header"><a href="https://help.ubuntu.com/">Ubuntu Documentation</a></h1>
                <ul id="main-menu">
                    <li><a href="https://help.ubuntu.com/">Official Documentation</a></li>
                    <li><a class="main-menu-item current" href="https://help.ubuntu.com/community/CommunityHelpWiki">Community Help Wiki</a></li>
                    <li><a href="http://community.ubuntu.com/contribute/documentation/">Contribute</a></li>
                </ul>
            </div>
            <div id="menu-search">
                <div id="subheader"> 
                    <div class="subheader-menu"> 
                        <div id="second-nav">
<ul id="username"><li><a class="nbinfo" href="https://help.ubuntu.com/community/PostgreSQL?action=info" rel="nofollow">Page History</a></li><li><a href="https://help.ubuntu.com/community/PostgreSQL?action=login&amp;login=1" id="login" rel="nofollow">Login to edit</a></li></ul>
 </div> 
    <div id="user-info"> 
    </div>
 

                            
                        </div> 
                    </div> 


                    <div id="search-box">

<noscript>
 &lt;form action="http://www.google.com/cse" id="cse-search-box"&gt;
   &lt;div&gt;
     &lt;input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq" /&gt;
     &lt;input type="hidden" name="ie" value="UTF-8" /&gt;
     &lt;input type="text" name="q" size="21" /&gt;
     &lt;input type="submit" name="sa" value="Search" /&gt;
   &lt;/div&gt;
 &lt;/form&gt;
</noscript>

<script>
 document.write('<form action="https://help.ubuntu.com/search.html" id="cse-search-box">');
 document.write('  <div>');
 document.write('    <input type="hidden" name="cof" value="FORID:9" />');
 document.write('    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq" />');
 document.write('    <input type="hidden" name="ie" value="UTF-8" />');
 document.write('    <input type="text" name="q" size="21" />');
 document.write('    <input type="submit" name="sa" value="Search" />');
 document.write('  </div>');
 document.write('</form>');
</script><form action="https://help.ubuntu.com/search.html" id="cse-search-box">  <div>    <input type="hidden" name="cof" value="FORID:9">    <input type="hidden" name="cx" value="003883529982892832976:e2vwumte3fq">    <input type="hidden" name="ie" value="UTF-8">    <input type="text" name="q" size="21">    <input type="submit" name="sa" value="Search">  </div></form>


                    </div>
                </div>
                <div id="title"><h1>
<span id="pagelocation"><a class="backlink" href="https://help.ubuntu.com/community/PostgreSQL?action=fullsearch&amp;value=linkto%3A%22PostgreSQL%22&amp;context=180" rel="nofollow" title="Click to do a full-text search for this title">PostgreSQL</a></span>
</h1>
                </div>
            <div id="cwt-nav3">

 <hr class="clear">
            </div>
                <div id="cwt-content" class="clearfix content-area">

<div id="page" lang="en" dir="ltr">
<div dir="ltr" id="content" lang="en"><span class="anchor" id="top"></span>
<span class="anchor" id="line-1"></span><div><table style="font-size: 0.9em;  float: right;  width:35%;  background:#F1F1ED;  margin: 0 0 1em 1em;"><tbody><tr>  <td style="padding:0.5em;"><p class="line891"></p><div class="table-of-contents"><p class="table-of-contents-heading">Contents</p><ol><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Introduction">Introduction</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Client_Installation">Client Installation</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Installation">Installation</a><ol><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Installing_PostGIS.2C_procedural_languages.2C_client_interfaces.2C_etc">Installing PostGIS, procedural languages, client interfaces, etc</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Administration">Administration</a></li></ol></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Basic_Server_Setup">Basic Server Setup</a><ol><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Create_database">Create database</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Install_Server_Instrumentation_.28for_PgAdmin.29_for_Postgresql_8.4_or_9.3">Install Server Instrumentation (for PgAdmin) for Postgresql 8.4 or 9.3</a></li></ol></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Alternative_Server_Setup">Alternative Server Setup</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Using_pgAdmin_III_GUI">Using pgAdmin III GUI</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Managing_the_Server">Managing the Server</a><ol><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Managing_users_and_rights">Managing users and rights</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#restarting_the_server">restarting the server</a></li></ol></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Further_reading">Further reading</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Troubleshooting">Troubleshooting</a><ol><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#fe_sendauth:_no_password_supplied">fe_sendauth: no password supplied</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#FATAL:__role_.22myusername.22_does_not_exist">FATAL:  role "myusername" does not exist</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#FATAL:__database_.22myusername.22_does_not_exist">FATAL:  database "myusername" does not exist</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#FATAL:__Peer_authentication_failed_for_user_.22myusername.22">FATAL:  Peer authentication failed for user "myusername"</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#could_not_connect_to_server:_No_such_file_or_directory">could not connect to server: No such file or directory</a></li></ol></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#External_Links">External Links</a><ol><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Official_PostgreSQL_downloads">Official PostgreSQL downloads</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#EnterpriseDB">EnterpriseDB</a></li><li>
<a href="https://help.ubuntu.com/community/PostgreSQL#Turnkey_Linux">Turnkey Linux</a></li></ol></li></ol></div></td>
</tr>
</tbody></table></div><span class="anchor" id="line-2"></span><span class="anchor" id="line-3"></span><p class="line867">
</p><h2 id="Introduction">Introduction</h2>
<span class="anchor" id="line-4"></span><span class="anchor" id="line-5"></span><p class="line862">PostgreSQL is a powerful object-relational database management system, provided under a flexible BSD-style license.<sup>[1]</sup> PostgreSQL contains many advanced features, is very fast and standards compliant. <span class="anchor" id="line-6"></span><span class="anchor" id="line-7"></span></p><p class="line862">PostgreSQL has bindings for many programming languages such as C, C++, <a class="http" href="http://python.org/">Python</a>, Java, PHP, Ruby... It can be used to power anything from simple web applications to massive databases with millions of records. <span class="anchor" id="line-8"></span><span class="anchor" id="line-9"></span></p><p class="line867">
</p><h2 id="Client_Installation">Client Installation</h2>
<span class="anchor" id="line-10"></span><span class="anchor" id="line-11"></span><p class="line874">If you only wish to connect to an external PostgreSQL server, do not install the main PostgreSQL package, but install the PostgreSQL client package instead. To do this, use the following command <span class="anchor" id="line-12"></span><span class="anchor" id="line-13"></span></p><p class="line867"><span class="anchor" id="line-14"></span><span class="anchor" id="line-15"></span></p><pre><span class="anchor" id="line-1"></span> sudo apt-get install postgresql-client</pre><span class="anchor" id="line-16"></span><span class="anchor" id="line-17"></span><p class="line874">you then connect to the server with the following command <span class="anchor" id="line-18"></span><span class="anchor" id="line-19"></span></p><p class="line867"><span class="anchor" id="line-20"></span><span class="anchor" id="line-21"></span></p><pre><span class="anchor" id="line-1-1"></span> psql -h server.domain.org database user</pre><p class="line874"> <span class="anchor" id="line-22"></span><span class="anchor" id="line-23"></span></p><p class="line874">After you inserted the password you access PostgreSQL with line commands. You may for instance insert the following <span class="anchor" id="line-24"></span><span class="anchor" id="line-25"></span></p><p class="line867"><span class="anchor" id="line-26"></span><span class="anchor" id="line-27"></span></p><pre><span class="anchor" id="line-1-2"></span> SELECT * FROM table WHERE 1;</pre><span class="anchor" id="line-28"></span><span class="anchor" id="line-29"></span><p class="line874">You exit the connection with <span class="anchor" id="line-30"></span><span class="anchor" id="line-31"></span><span class="anchor" id="line-32"></span></p><pre><span class="anchor" id="line-1-3"></span> \q</pre><span class="anchor" id="line-33"></span><span class="anchor" id="line-34"></span><span class="anchor" id="line-35"></span><p class="line867">
</p><h2 id="Installation">Installation</h2>
<span class="anchor" id="line-36"></span><span class="anchor" id="line-37"></span><span class="anchor" id="line-38"></span><p class="line874">To install the server locally use the command line and type: <span class="anchor" id="line-39"></span><span class="anchor" id="line-40"></span><span class="anchor" id="line-41"></span></p><pre><span class="anchor" id="line-1-4"></span> sudo apt-get install postgresql postgresql-contrib</pre><span class="anchor" id="line-42"></span><span class="anchor" id="line-43"></span><p class="line874">This will install the latest version available in your Ubuntu release and the commonly used add-ons for it. <span class="anchor" id="line-44"></span><span class="anchor" id="line-45"></span></p><p class="line874">See "External Links" below for options for getting newer releases. <span class="anchor" id="line-46"></span><span class="anchor" id="line-47"></span></p><p class="line867">
</p><h3 id="Installing_PostGIS.2C_procedural_languages.2C_client_interfaces.2C_etc">Installing PostGIS, procedural languages, client interfaces, etc</h3>
<span class="anchor" id="line-48"></span><span class="anchor" id="line-49"></span><p class="line874">Additional packages contain procedural language runtimes, add-ons like PostGIS, language client interfaces like psycopg2 for Python, etc. You can get a listing with: <span class="anchor" id="line-50"></span><span class="anchor" id="line-51"></span></p><p class="line867"><span class="anchor" id="line-52"></span><span class="anchor" id="line-53"></span></p><pre><span class="anchor" id="line-1-5"></span> apt-cache search postgres</pre><span class="anchor" id="line-54"></span><span class="anchor" id="line-55"></span><p class="line867">
</p><h3 id="Administration">Administration</h3>
<span class="anchor" id="line-56"></span><span class="anchor" id="line-57"></span><p class="line874">pgAdmin III is a handy GUI for PostgreSQL, it is essential to beginners. To install it, type at the command line: <span class="anchor" id="line-58"></span><span class="anchor" id="line-59"></span></p><p class="line867"><span class="anchor" id="line-60"></span><span class="anchor" id="line-61"></span></p><pre><span class="anchor" id="line-1-6"></span> sudo apt-get install pgadmin3</pre><span class="anchor" id="line-62"></span><span class="anchor" id="line-63"></span><p class="line862">You may also use the Synaptic package manager from the System&gt;Administration menu to install these packages. <span class="anchor" id="line-64"></span><span class="anchor" id="line-65"></span></p><p class="line867">
</p><h2 id="Basic_Server_Setup">Basic Server Setup</h2>
<span class="anchor" id="line-66"></span><span class="anchor" id="line-67"></span><p class="line874">To start off, we need to set the password of the PostgreSQL user (role) called "postgres"; we will not be able to access the server externally otherwise. As the local “postgres” Linux user, we are allowed to connect and manipulate the server using the psql command. <span class="anchor" id="line-68"></span><span class="anchor" id="line-69"></span></p><p class="line874">In a terminal, type: <span class="anchor" id="line-70"></span><span class="anchor" id="line-71"></span></p><p class="line867"><span class="anchor" id="line-72"></span><span class="anchor" id="line-73"></span></p><pre><span class="anchor" id="line-1-7"></span>sudo -u postgres psql postgres</pre><span class="anchor" id="line-74"></span><p class="line874">this connects as a role with same name as the local user, i.e. "postgres", to the database called "postgres" (1st argument to psql). <span class="anchor" id="line-75"></span><span class="anchor" id="line-76"></span></p><p class="line874">Set a password for the "postgres" database role using the command: <span class="anchor" id="line-77"></span><span class="anchor" id="line-78"></span><span class="anchor" id="line-79"></span></p><pre><span class="anchor" id="line-1-8"></span>\password postgres</pre><span class="anchor" id="line-80"></span><p class="line874">and give your password when prompted. The password text will be hidden from the console for security purposes. <span class="anchor" id="line-81"></span><span class="anchor" id="line-82"></span></p><p class="line874">Type Control+D or \q to exit the posgreSQL prompt. <span class="anchor" id="line-83"></span><span class="anchor" id="line-84"></span><span class="anchor" id="line-85"></span></p><p class="line867">
</p><h3 id="Create_database">Create database</h3>
<span class="anchor" id="line-86"></span><span class="anchor" id="line-87"></span><p class="line874">To create the first database, which we will call "mydb", simply type: <span class="anchor" id="line-88"></span><span class="anchor" id="line-89"></span></p><p class="line867"><span class="anchor" id="line-90"></span><span class="anchor" id="line-91"></span></p><pre><span class="anchor" id="line-1-9"></span> sudo -u postgres createdb mydb</pre><span class="anchor" id="line-92"></span><span class="anchor" id="line-93"></span><p class="line867">
</p><h3 id="Install_Server_Instrumentation_.28for_PgAdmin.29_for_Postgresql_8.4_or_9.3">Install Server Instrumentation (for PgAdmin) for Postgresql 8.4 or 9.3</h3>
<span class="anchor" id="line-94"></span><span class="anchor" id="line-95"></span><p class="line867">PgAdmin requires the installation of an add-on for full functionality. The "adminpack" addon, which it calls <strong>Server Instrumentation</strong>, is part of postgresql-contrib, so you must install that package if you haven't already: <span class="anchor" id="line-96"></span><span class="anchor" id="line-97"></span></p><p class="line867"><span class="anchor" id="line-98"></span><span class="anchor" id="line-99"></span></p><pre><span class="anchor" id="line-1-10"></span> sudo apt-get install postgresql-contrib</pre><span class="anchor" id="line-100"></span><span class="anchor" id="line-101"></span><p class="line874">Then to activate the extension, for ""Postgresql 8.4"", run the adminpack.sql script, simply type: <span class="anchor" id="line-102"></span><span class="anchor" id="line-103"></span><span class="anchor" id="line-104"></span></p><pre><span class="anchor" id="line-1-11"></span> sudo -u postgres psql &lt; /usr/share/postgresql/8.4/contrib/adminpack.sql</pre><span class="anchor" id="line-105"></span><span class="anchor" id="line-106"></span><p class="line874">For "Postgresql 9.3"+ install the adminpack "extension" in the "postgres" database: <span class="anchor" id="line-107"></span><span class="anchor" id="line-108"></span></p><p class="line867"><span class="anchor" id="line-109"></span><span class="anchor" id="line-110"></span><span class="anchor" id="line-111"></span></p><pre><span class="anchor" id="line-1-12"></span> sudo -u postgres psql
<span class="anchor" id="line-2"></span> CREATE EXTENSION adminpack;</pre><span class="anchor" id="line-112"></span><span class="anchor" id="line-113"></span><p class="line867">
</p><h2 id="Alternative_Server_Setup">Alternative Server Setup</h2>
<span class="anchor" id="line-114"></span><span class="anchor" id="line-115"></span><p class="line874">If you don't intend to connect to the database from other machines, this alternative setup may be simpler. <span class="anchor" id="line-116"></span><span class="anchor" id="line-117"></span></p><p class="line874">By default in Ubuntu, Postgresql is configured to use 'ident sameuser' authentication for any connections from the same machine.  Check out the excellent Postgresql documentation for more information, but essentially this means that if your Ubuntu username is 'foo' and you add 'foo' as a Postgresql user then you can connect to the database without requiring a password. <span class="anchor" id="line-118"></span><span class="anchor" id="line-119"></span></p><p class="line874">Since the only user who can connect to a fresh install is the postgres user, here is how to create yourself a database account (which is in this case also a database superuser) with the same name as your login name and then create a password for the user: <span class="anchor" id="line-120"></span><span class="anchor" id="line-121"></span><span class="anchor" id="line-122"></span><span class="anchor" id="line-123"></span></p><pre><span class="anchor" id="line-1-13"></span> sudo -u postgres createuser --superuser $USER
<span class="anchor" id="line-2-1"></span> sudo -u postgres psql</pre><span class="anchor" id="line-124"></span><p class="line867"><span class="anchor" id="line-125"></span><span class="anchor" id="line-126"></span><span class="anchor" id="line-127"></span></p><pre><span class="anchor" id="line-1-14"></span> postgres=# \password $USER</pre><span class="anchor" id="line-128"></span><span class="anchor" id="line-129"></span><p class="line874">Client programs, by default, connect to the local host using your Ubuntu login name and expect to find a database with that name too.  So to make things REALLY easy, use your new superuser privileges granted above to create a database with the same name as your login name: <span class="anchor" id="line-130"></span><span class="anchor" id="line-131"></span><span class="anchor" id="line-132"></span></p><pre><span class="anchor" id="line-1-15"></span> sudo -u postgres createdb $USER</pre><span class="anchor" id="line-133"></span><span class="anchor" id="line-134"></span><p class="line874">Connecting to your own database to try out some SQL should now be as easy as: <span class="anchor" id="line-135"></span><span class="anchor" id="line-136"></span><span class="anchor" id="line-137"></span></p><pre><span class="anchor" id="line-1-16"></span> psql</pre><span class="anchor" id="line-138"></span><span class="anchor" id="line-139"></span><p class="line874">Creating additional database is just as easy, so for example, after running this: <span class="anchor" id="line-140"></span><span class="anchor" id="line-141"></span><span class="anchor" id="line-142"></span></p><pre><span class="anchor" id="line-1-17"></span> create database amarokdb;</pre><span class="anchor" id="line-143"></span><p class="line874">You can go right ahead and tell Amarok to use postgresql to store its music catalog. The database name would be amarokdb, the username would be your own login name, and you don't even need a password thanks to 'ident sameuser' so you can leave that blank. <span class="anchor" id="line-144"></span><span class="anchor" id="line-145"></span></p><p class="line867">
</p><h2 id="Using_pgAdmin_III_GUI">Using pgAdmin III GUI</h2>
<span class="anchor" id="line-146"></span><span class="anchor" id="line-147"></span><p class="line874">To get an idea of what PostgreSQL can do, you may start by firing up a graphical client. In a terminal type : <span class="anchor" id="line-148"></span><span class="anchor" id="line-149"></span></p><p class="line867"><span class="anchor" id="line-150"></span><span class="anchor" id="line-151"></span></p><pre><span class="anchor" id="line-1-18"></span> pgadmin3</pre><span class="anchor" id="line-152"></span><span class="anchor" id="line-153"></span><p class="line862">You will be presented with the pgAdmin III interface. Click on the "Add a connection to a server" button (top left). In the new dialog, enter the address 127.0.0.1 (Local host is default, so it can be left out.), a description of the server, the default database ("mydb" in the example above), your username ("postgres") and your password. <strong>One more step is required in order to allow pgAdmin III to connect to the server</strong>, and that is to edit <strong>pg_hba.conf</strong> file and change the authentication method from peer to md5 (will not work if you have not set the password): <span class="anchor" id="line-154"></span><span class="anchor" id="line-155"></span></p><p class="line867"><span class="anchor" id="line-156"></span><span class="anchor" id="line-157"></span></p><pre><span class="anchor" id="line-1-19"></span>sudo nano /etc/postgresql/9.3/main/pg_hba.conf</pre><span class="anchor" id="line-158"></span><p class="line874">and change the line  <span class="anchor" id="line-159"></span><span class="anchor" id="line-160"></span><span class="anchor" id="line-161"></span><span class="anchor" id="line-162"></span></p><pre><span class="anchor" id="line-1-20"></span># Database administrative login by Unix domain socket
<span class="anchor" id="line-2-2"></span>local   all             postgres                                peer</pre><span class="anchor" id="line-163"></span><p class="line874">to <span class="anchor" id="line-164"></span><span class="anchor" id="line-165"></span><span class="anchor" id="line-166"></span><span class="anchor" id="line-167"></span></p><pre><span class="anchor" id="line-1-21"></span># Database administrative login by Unix domain socket
<span class="anchor" id="line-2-3"></span>local   all             postgres                                md5</pre><span class="anchor" id="line-168"></span><p class="line874">Now you should reload the server configuration changes and connect pgAdmin III to your PostgreSQL database server. <span class="anchor" id="line-169"></span><span class="anchor" id="line-170"></span><span class="anchor" id="line-171"></span></p><pre><span class="anchor" id="line-1-22"></span>sudo /etc/init.d/postgresql reload</pre><span class="anchor" id="line-172"></span><p class="line874">With this GUI you may start creating and managing databases, query the database, execute SQl etc. <span class="anchor" id="line-173"></span><span class="anchor" id="line-174"></span></p><p class="line867">
</p><h2 id="Managing_the_Server">Managing the Server</h2>
<span class="anchor" id="line-175"></span><span class="anchor" id="line-176"></span><p class="line862">To learn more about managing PostgreSQL (but without the Ubuntu specifics) see the <a class="http" href="http://www.postgresql.org/docs/current/static/admin.html">official PostgreSQL documentation</a> <span class="anchor" id="line-177"></span><span class="anchor" id="line-178"></span></p><p class="line867">
</p><h3 id="Managing_users_and_rights">Managing users and rights</h3>
<span class="anchor" id="line-179"></span><span class="anchor" id="line-180"></span><p class="line862">User management is discussed in detail in the <a class="http" href="http://www.postgresql.org/docs/current/static/client-authentication.html">client authentication chapter of the PostgreSQL documentation</a>; the following is an introduction to get you started. <span class="anchor" id="line-181"></span><span class="anchor" id="line-182"></span></p><p class="line862">To manage users, you first have to edit <tt>/etc/postgresql/current/main/pg_hba.conf</tt> and modify the default configuration which is very locked down and secure. For example, if you want <tt>postgres</tt> to manage its own users (not linked with system users), you will add the following line: <span class="anchor" id="line-183"></span><span class="anchor" id="line-184"></span><span class="anchor" id="line-185"></span><span class="anchor" id="line-186"></span><span class="anchor" id="line-187"></span><span class="anchor" id="line-188"></span></p><pre><span class="anchor" id="line-1-23"></span>8&lt;-------------------------------------------
<span class="anchor" id="line-2-4"></span># TYPE  DATABASE    USER        IP-ADDRESS        IP-MASK           METHOD
<span class="anchor" id="line-3"></span>host    all         all         10.0.0.0       255.255.255.0    md5
<span class="anchor" id="line-4"></span>8&lt;-------------------------------------------</pre><span class="anchor" id="line-189"></span><span class="anchor" id="line-190"></span><p class="line874">Which means that on your local network (10.0.0.0/24 - replace with your own local network !),  postgres users can connect through the network to the database providing a classical couple user / password. <span class="anchor" id="line-191"></span><span class="anchor" id="line-192"></span></p><p class="line862">Besides allowing a user to connect over the network to the to a database on the server, you must enable PostgreSQL to listen across different networks. To do that, open up <tt>/etc/postgresql/current/main/postgresql.conf</tt> in your favourite editor and alter the <tt>listen_addresses</tt> as below: <span class="anchor" id="line-193"></span><span class="anchor" id="line-194"></span><span class="anchor" id="line-195"></span></p><pre><span class="anchor" id="line-1-24"></span>listen_addresses = '*'</pre><span class="anchor" id="line-196"></span><span class="anchor" id="line-197"></span><p class="line862">to listen on all network interfaces. See the docs for <tt>listen_addresses</tt> for other options. <span class="anchor" id="line-198"></span><span class="anchor" id="line-199"></span></p><p class="line874">To create a database with a user that have full rights on the database, use the following command: <span class="anchor" id="line-200"></span><span class="anchor" id="line-201"></span></p><p class="line867"><span class="anchor" id="line-202"></span><span class="anchor" id="line-203"></span><span class="anchor" id="line-204"></span></p><pre><span class="anchor" id="line-1-25"></span>sudo -u postgres createuser -D -A -P myuser
<span class="anchor" id="line-2-5"></span>sudo -u postgres createdb -O myuser mydb</pre><span class="anchor" id="line-205"></span><span class="anchor" id="line-206"></span><p class="line862">The first command line creates the user with no database creation rights (-D) with no add user rights -A) and will prompt you for entering a password (-P). The second command line create the database <strong>'mydb</strong> with <strong>'myuser</strong>' as owner. <span class="anchor" id="line-207"></span><span class="anchor" id="line-208"></span></p><p class="line874">This little example will probably suit most of your needs. For more details, please refer to the corresponding man pages or the online documentation. <span class="anchor" id="line-209"></span><span class="anchor" id="line-210"></span></p><p class="line867">
</p><h3 id="restarting_the_server">restarting the server</h3>
<span class="anchor" id="line-211"></span><span class="anchor" id="line-212"></span><p class="line874">After configuring the networking / users you may need to reload the server, here is a suggested command to do so. <span class="anchor" id="line-213"></span><span class="anchor" id="line-214"></span><span class="anchor" id="line-215"></span></p><pre><span class="anchor" id="line-1-26"></span>sudo /etc/init.d/postgresql reload</pre><span class="anchor" id="line-216"></span><span class="anchor" id="line-217"></span><p class="line862">Some settings changes in <tt>postgresql.conf</tt> require a full restart, which will terminate active connections and abort uncommitted transactions: <span class="anchor" id="line-218"></span><span class="anchor" id="line-219"></span></p><p class="line867"><span class="anchor" id="line-220"></span><span class="anchor" id="line-221"></span></p><pre><span class="anchor" id="line-1-27"></span>sudo /etc/init.d/postgresql restart</pre><span class="anchor" id="line-222"></span><span class="anchor" id="line-223"></span><p class="line867">
</p><h2 id="Further_reading">Further reading</h2>
<span class="anchor" id="line-224"></span><span class="anchor" id="line-225"></span><p class="line862">If you are not familiar with <a class="http" href="http://en.wikipedia.org/wiki/Sql">SQL</a> you may want to look into this powerful language, although some simple uses of PostgreSQL may not require this knowledge (such as a simple <a class="http" href="http://www.djangoproject.com/">Django</a> project). <span class="anchor" id="line-226"></span><span class="anchor" id="line-227"></span></p><p class="line862">The <a class="http" href="http://www.postgresql.org/">PostgreSQL website</a> contains a wealth of information on using this database. In particular, the <a class="http" href="http://www.postgresql.org/docs/current/static/tutorial.html">tutorial</a> is a useful starting point, but you can skip the installation step as you've already installed it using Ubuntu packages. <span class="anchor" id="line-228"></span><span class="anchor" id="line-229"></span></p><p class="line867">
</p><h2 id="Troubleshooting">Troubleshooting</h2>
<span class="anchor" id="line-230"></span><span class="anchor" id="line-231"></span><p class="line867">
</p><h3 id="fe_sendauth:_no_password_supplied">fe_sendauth: no password supplied</h3>
<span class="anchor" id="line-232"></span><span class="anchor" id="line-233"></span><p class="line862">Your <a class="http" href="http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html">pg_hba.conf</a> specifies that md5 authentication is to be used for this connection based on the origin host, connection method and the requested username/database, but your application didn't supply a password. <span class="anchor" id="line-234"></span><span class="anchor" id="line-235"></span></p><p class="line874">Change the authentication mode or set a password for the user you're connecting to and then specify that password in your application's connection settings. <span class="anchor" id="line-236"></span><span class="anchor" id="line-237"></span></p><p class="line867">
</p><h3 id="FATAL:__role_.22myusername.22_does_not_exist">FATAL:  role "myusername" does not exist</h3>
<span class="anchor" id="line-238"></span><span class="anchor" id="line-239"></span><p class="line874">By default PostgreSQL connects to the PostgreSQL user with the same name as the current unix user. You have not created a PostgreSQL user by that name in your database. <span class="anchor" id="line-240"></span><span class="anchor" id="line-241"></span></p><p class="line862">Create a suitable user, or specify a different username to connect with. In the command line tools the <tt>-U</tt> flag does this. <span class="anchor" id="line-242"></span><span class="anchor" id="line-243"></span></p><p class="line867">
</p><h3 id="FATAL:__database_.22myusername.22_does_not_exist">FATAL:  database "myusername" does not exist</h3>
<span class="anchor" id="line-244"></span><span class="anchor" id="line-245"></span><p class="line874">A user named "myusername" exists, but there's no database of the same name. <span class="anchor" id="line-246"></span><span class="anchor" id="line-247"></span></p><p class="line874">By default PostgreSQL connects to the database with the same name as the user you're connecting as, but it doesn't auto-create the database if it doesn't exist. <span class="anchor" id="line-248"></span><span class="anchor" id="line-249"></span></p><p class="line874">Create the database, or specify a different database to connect to. <span class="anchor" id="line-250"></span><span class="anchor" id="line-251"></span></p><p class="line867">
</p><h3 id="FATAL:__Peer_authentication_failed_for_user_.22myusername.22">FATAL:  Peer authentication failed for user "myusername"</h3>
<span class="anchor" id="line-252"></span><span class="anchor" id="line-253"></span><p class="line874">You are connecting to localhost via a unix socket. A user named "myusername" exists, but your current unix user is not the same as that username. PostgreSQL is set to use "peer" authentication on unix sockets for this user/db combo so it requires your unix and postgresql usernames to match. <span class="anchor" id="line-254"></span><span class="anchor" id="line-255"></span></p><p class="line862">Connect from the unix user that matches the desired PostgreSQL user - perhaps with <tt>sudo&nbsp;-u&nbsp;theusername&nbsp;psql</tt> - or change <a class="http" href="http://www.postgresql.org/docs/current/static/auth-pg-hba-conf.html">pg_hba.conf</a> to use a different authentication mode like "md5" for this username. <span class="anchor" id="line-256"></span><span class="anchor" id="line-257"></span></p><p class="line867">
</p><h3 id="could_not_connect_to_server:_No_such_file_or_directory">could not connect to server: No such file or directory</h3>
<span class="anchor" id="line-258"></span><span class="anchor" id="line-259"></span><p class="line874">An error like this (possibly with a different unix socket path, depending on your install): <span class="anchor" id="line-260"></span><span class="anchor" id="line-261"></span></p><p class="line867"><span class="anchor" id="line-262"></span><span class="anchor" id="line-263"></span><span class="anchor" id="line-264"></span><span class="anchor" id="line-265"></span></p><pre><span class="anchor" id="line-1-28"></span> psql: could not connect to server: No such file or directory
<span class="anchor" id="line-2-6"></span> Is the server running locally and accepting
<span class="anchor" id="line-3-1"></span> connections on Unix domain socket "/tmp/.s.PGSQL.5432"?</pre><span class="anchor" id="line-266"></span><span class="anchor" id="line-267"></span><p class="line874">can mean a number of things: <span class="anchor" id="line-268"></span><span class="anchor" id="line-269"></span></p><p class="line874">* The server isn't running; <span class="anchor" id="line-270"></span><span class="anchor" id="line-271"></span></p><p class="line862">* The server has a different <tt>unix_socket_directories</tt> to the default in your client's <tt>libpq</tt>, either due to different compiled-in defaults or a mismatched setting; <span class="anchor" id="line-272"></span><span class="anchor" id="line-273"></span></p><p class="line862">* The server is listening on a different "port". PostgreSQL emulates TCP/IP ports on unix sockets by using the port number as the suffix for the socket file, e.g. <tt>5432</tt>. <span class="anchor" id="line-274"></span><span class="anchor" id="line-275"></span></p><p class="line874">Eliminate these in turn. <span class="anchor" id="line-276"></span><span class="anchor" id="line-277"></span></p><p class="line862">First make sure the server is running. On Ubuntu, <tt>ps&nbsp;-u&nbsp;postgres&nbsp;-f</tt> will show you any processes running as user <tt>postgres</tt> - you want to see multiple ones named <tt>postgres</tt>. <span class="anchor" id="line-278"></span><span class="anchor" id="line-279"></span></p><p class="line874">Now make sure the server is listening where your client thinks it is. To find out your PostgreSQL server's socket directory: <span class="anchor" id="line-280"></span><span class="anchor" id="line-281"></span></p><p class="line867"><span class="anchor" id="line-282"></span><span class="anchor" id="line-283"></span></p><pre><span class="anchor" id="line-1-29"></span> sudo -u postgres psql -c "SHOW unix_socket_directories;"</pre><span class="anchor" id="line-284"></span><span class="anchor" id="line-285"></span><p class="line862">or on older PostgreSQL versions, <tt>unix_socket_directory</tt> as the parameter changed name. To show the server's port (which applies for both TCP/IP and unix sockets): <span class="anchor" id="line-286"></span><span class="anchor" id="line-287"></span></p><p class="line867"><span class="anchor" id="line-288"></span><span class="anchor" id="line-289"></span></p><pre><span class="anchor" id="line-1-30"></span> sudo -u postgres psql -c "SHOW port;"</pre><span class="anchor" id="line-290"></span><span class="anchor" id="line-291"></span><p class="line862">If you can't even connect with <tt>psql</tt> under unix user <tt>postgres</tt>  you can check the socket dir with <tt>lsof</tt>: <span class="anchor" id="line-292"></span><span class="anchor" id="line-293"></span></p><p class="line867"><span class="anchor" id="line-294"></span><span class="anchor" id="line-295"></span><span class="anchor" id="line-296"></span><span class="anchor" id="line-297"></span><span class="anchor" id="line-298"></span><span class="anchor" id="line-299"></span></p><pre><span class="anchor" id="line-1-31"></span> $ sudo lsof -U -a -c postgres
<span class="anchor" id="line-2-7"></span> COMMAND   PID     USER   FD   TYPE             DEVICE SIZE/OFF   NODE NAME
<span class="anchor" id="line-3-2"></span> postgres 6565 postgres    5u  unix 0xffff88005a049f80      0t0 183009 /tmp/.s.PGSQL.5432
<span class="anchor" id="line-4-1"></span> postgres 6566 postgres    1u  unix 0xffff88013bc22d80      0t0 183695 socket
<span class="anchor" id="line-5"></span> postgres 6566 postgres    2u  unix 0xffff88013bc22d80      0t0 183695 socket</pre><span class="anchor" id="line-300"></span><span class="anchor" id="line-301"></span><p class="line862">In this case the first line is the socket location. This server has socket directory <tt>/tmp</tt> with port <tt>5432</tt>. <span class="anchor" id="line-302"></span><span class="anchor" id="line-303"></span></p><p class="line862">If your client is looking in a different socket directory, you're probably trying to connect over unix sockets to the default socket path and/or to the default port, and the <tt>libpq</tt> your client application is linked to has a different compiled-in unix socket path and/or port than your running PostgreSQL. Most likely your <tt>LD_LIBRARY_PATH</tt> or <tt>/etc/ld.so.conf</tt> has a different <tt>libpq</tt> before the one that came with your version of PostgreSQL. This doesn't generally matter much, you can just override the socket directory. <span class="anchor" id="line-304"></span><span class="anchor" id="line-305"></span></p><p class="line862">To specify an alternative socket directory and/port port to connect to, specify the socket dir as the host parameter in your connection options, e.g. to connect as user <tt>bob</tt> to the server listening in <tt>/tmp</tt> on port <tt>5433</tt>: <span class="anchor" id="line-306"></span><span class="anchor" id="line-307"></span></p><p class="line867"><span class="anchor" id="line-308"></span><span class="anchor" id="line-309"></span></p><pre><span class="anchor" id="line-1-32"></span> psql -h /tmp -p 5433 -U bob ...</pre><span class="anchor" id="line-310"></span><span class="anchor" id="line-311"></span><p class="line874">or in connection-string form: <span class="anchor" id="line-312"></span><span class="anchor" id="line-313"></span></p><p class="line867"><span class="anchor" id="line-314"></span><span class="anchor" id="line-315"></span></p><pre><span class="anchor" id="line-1-33"></span> psql "host=/tmp port=5433 user=bob ..."</pre><span class="anchor" id="line-316"></span><span class="anchor" id="line-317"></span><p class="line862">The same works with any client that uses <tt>libpq</tt> (all the PostgreSQL client tools, plus e.g. <tt>psycopg2</tt>, the <tt>Pg</tt> gem in Ruby/Rails, PHP's <tt>postgres</tt> and <tt>PDO</tt>, Perl's <tt>DBB::Pg</tt>, etc). It does NOT work with non-<tt>libpq</tt> clients like PgJDBC, <tt>py-postgresql</tt>, etc, but most of these don't support unix sockets at all. See the client documentation for non-libpq based clients. <span class="anchor" id="line-318"></span><span class="anchor" id="line-319"></span></p><p class="line867"></p><hr><p class="line874"> <span class="anchor" id="line-320"></span><span class="anchor" id="line-321"></span></p><p class="line867"><sup>[1]</sup> You do not have to pay in order to use PostgreSQL for any application, such as commercial closed source software. See <a class="nonexistent" href="https://help.ubuntu.com/community/the%20license">http://www.postgresql.org/about/licence/</a>. <span class="anchor" id="line-322"></span><span class="anchor" id="line-323"></span></p><p class="line867">
</p><h2 id="External_Links">External Links</h2>
<span class="anchor" id="line-324"></span><span class="anchor" id="line-325"></span><p class="line867">
</p><h3 id="Official_PostgreSQL_downloads">Official PostgreSQL downloads</h3>
<span class="anchor" id="line-326"></span><span class="anchor" id="line-327"></span><p class="line862">The PostgreSQL project provides an official list of download locations, including an Ubuntu software repository, at <a class="http" href="http://www.postgresql.org/download/">its download page</a>. In particular, Ubuntu users can get newer PostgreSQL versions than those packaged in their Ubuntu release using apt-get via <a class="http" href="http://apt.postgresql.org/">apt.postgresql.org</a>. <span class="anchor" id="line-328"></span><span class="anchor" id="line-329"></span></p><p class="line862">For support and services around PostgreSQL see <a class="http" href="http://www.postgresql.org/support/professional_support/">the services and support page</a>. <span class="anchor" id="line-330"></span><span class="anchor" id="line-331"></span></p><p class="line867">
</p><h3 id="EnterpriseDB">EnterpriseDB</h3>
<span class="anchor" id="line-332"></span><span class="anchor" id="line-333"></span><p class="line862">The <a class="http" href="http://www.postgresql.org/download/linux/">PostgreSQL Linux downloads page</a> contains a section on "Graphical installer" built by <a class="http" href="http://www.enterprisedb.com/">EnterpriseDB</a>. You download the installer, change its properties to allow to run it as command (it has .run extension), and run it from command prompt as in "sudo whateveritwas.run". <span class="anchor" id="line-334"></span><span class="anchor" id="line-335"></span></p><p class="line874">You end up with  <span class="anchor" id="line-336"></span></p><ul><li>configured DB server instance, which starts with your server <span class="anchor" id="line-337"></span></li><li>pgAdmin III UI client application <span class="anchor" id="line-338"></span><span class="anchor" id="line-339"></span></li></ul><p class="line874">Note that the installed software will not be integrated with Ubuntu software center. As a result, you will not receive any security updates from Ubuntu. However, the installed version will closely match the latest Ubuntu version. <span class="anchor" id="line-340"></span><span class="anchor" id="line-341"></span></p><p class="line867">
</p><h3 id="Turnkey_Linux">Turnkey Linux</h3>
<span class="anchor" id="line-342"></span><span class="anchor" id="line-343"></span><p class="line862">An Ubuntu-based <a class="http" href="http://www.turnkeylinux.org/appliances/postgresql">PostgreSQL appliance</a> is one of the easiest ways to get up and running with  PostgreSQL on Ubuntu. It's part of a family of pre-integrated <a class="http" href="http://www.turnkeylinux.org/">TurnKey Linux</a> <a class="http" href="http://www.turnkeylinux.org/appliances">Software Appliances</a> based on Ubuntu 10.04.1 (Lucid LTS).   <span class="anchor" id="line-344"></span><span class="anchor" id="bottom"></span></p></div><div id="pagebottom"></div>
</div>


            </div>
<p id="pageinfo" class="info" lang="en" dir="ltr">PostgreSQL  (last edited 2015-08-28 13:16:48 by <span title="mikini @ x1-6-10-5f-49-81-52-90.cpe.webspeed.dk[80.167.163.37]"><a class="interwiki" href="https://launchpad.net/~mikini" title="mikini @ x1-6-10-5f-49-81-52-90.cpe.webspeed.dk[80.167.163.37]">mikini</a></span>)</p>

</div>
            
            <div id="footer">
		<p>
		The material on this wiki is available under a free license, see <a href="https://help.ubuntu.com/community/License">Copyright / License</a> for details<br><b>You</b> can contribute to this wiki, see 
		<a href="https://help.ubuntu.com/community/WikiGuide">Wiki Guide</a> for details
		</p>
            </div>

        </div>


</body></html>