function createDeviceRotationEvent(){window.addEventListener("resize",function(){waitForFinalEvent(function(){setupDeviceOrientation()},200,Math.random().toString())},!1)}function setupDeviceOrientation(){var n=PROACTIVE_CHAT.GetSessionKey("contactDrawerState"),t=$(window).width()-($(".contact-drawer").offset().left+$(".contact-drawer").outerWidth());window.innerHeight>window.innerWidth?(isObjOnObj()||n!=="open"||PROACTIVE_CHAT.OpenProactiveChatDrawer(!0,!1),isObjOnObj()&&n==="closed"&&PROACTIVE_CHAT.CloseProactiveChatDrawer()):(n==="open"&&t!==0&&PROACTIVE_CHAT.OpenProactiveChatDrawer(!0,!1),n==="closed"&&t===0&&PROACTIVE_CHAT.OpenProactiveChatDrawer(!0,!1))}function isObjOnObj(){var n=document.getElementById("smalldevicesChatIcon"),t=document.getElementById("contact-drawer"),i=t.offsetLeft,r=t.offsetLeft+t.offsetWidth,u=n.offsetLeft,f=n.offsetLeft+n.offsetWidth,e=t.offsetTop,o=t.offsetTop+t.offsetHeight,s=n.offsetTop,h=n.offsetTop+n.offsetHeight;return u>r||f<i?!1:s>o||h<e?!1:u>i&&u<r?!0:f>i&&f<r?!0:s>e&&s<o?!0:h>e&&h<o?!0:!1}var PROACTIVE_CHAT=function(){var n={},e=36e5,c=5e3;if(_contactDrawerConfig){var l=_contactDrawerConfig.EnabledBehavior.IsVisible,nt=_contactDrawerConfig.EnabledBehavior.IsEnabled,i=_contactDrawerConfig.EnabledBehavior.OpenSpeed*1e3,tt=_contactDrawerConfig.EnabledBehavior.UseSoftOpenDelayTimer,it=_contactDrawerConfig.EnabledBehavior.UseOpenCloseSpeed,r=_contactDrawerConfig.EnabledBehavior.TimerValue*1e3,s,t=$(".contact-drawer"),a=$(".contact-drawer-tab"),v=$(".contact-drawer-content"),u=$(".contact-drawer").outerHeight()<255?255:$(".contact-drawer").outerHeight();l&&($(".contact-drawer").show(),$(".contact-drawer .contact-drawer-tab").show(),$("#smalldevicesChatIcon").show().addClass("is-visible"))}var w=function(){amplify.store("isExistingSessionForContactDrawerPopup",null);amplify.store("contactDrawerAutoOpenCount",null);amplify.store("contactDrawerClickedOpenCount",null);amplify.store("contactDrawerIsHardClosed",null)},o=function(n,t,i){amplify.store(n,t,{expires:i})},f=function(n){return amplify.store(n)},b=function(n){amplify.store(n,null)},k=function(){var n=!1;return f("isExistingSessionForContactDrawerPopup")!=null||typeof f("isExistingSessionForContactDrawerPopup")!="undefined"?n=!0:o("isExistingSessionForContactDrawerPopup",!0,e),n},y=function(n){var t=f(n);typeof n!="undefined"&&(t==null&&(t=0),t++,o(n,t,e))},p=function(n,r){var f,h,s,c;t.addClass("is-open");v.addClass("is-open");$(".contact-drawer").offset().left>0?(r?(t.css({position:"fixed",left:"50%","margin-left":-$(t).width()/2}),f=$(window).width()-(t.offset().left+t.outerWidth())):f=-260,s=f==-260?"+=260px":"+="+(f+260)+"px",t.removeAttr("style"),t.addClass("animating").css("right","-260px").animate({right:s},i)):(r?(t.css({position:"fixed",bottom:"0"}),h=0):h="-"+u,s=h=="-"+u?"+="+u+"px":"+="+u+"px",t.removeAttr("style"),t.addClass("animating").css("bottom","-"+u+"px").animate({bottom:s},i));setTimeout(function(){t.removeClass("animating");a.addClass("dellmetrics-chatdrawerclose")},i);o("contactDrawerState","open",e);c="contactDrawerAutoOpenCount";n&&(c="contactDrawerClickedOpenCount");y(c)},d=function(){clearTimeout(s);var r,n=$(window).width()-(t.offset().left+t.outerWidth());$(".contact-drawer").offset().left>0?(r=n===0?"-=260px":"-="+(n+260)+"px",t.addClass("animating").css("right",n).animate({right:r},i)):t.addClass("animating").animate({bottom:"-="+u},i);setTimeout(function(){t.removeClass("animating");a.removeClass("dellmetrics-chatdrawerclose");t.removeClass("is-open");v.removeClass("is-open")},i);o("contactDrawerState","closed",e)},h=function(){var n=!0,t=f("contactDrawerIsHardClosed");return t&&(n=!1),n},g=function(n){clearTimeout(s);var t=f("contactDrawerClickedOpenCount"),i=typeof t=="undefined"?!0:!1;s=setTimeout(function(){h()&&p(!1,i)},n)};return n.Init=function(){(n.SetSessionKey("contactDrawerState","closed",n.StorageExpirationTime),createDeviceRotationEvent(),!r||r<0)||l&&setInterval(function(){n.OpenAndCloseProactiveChatDrawer()},r)},n.ClearSession=function(){w()},n.SetSessionKey=function(n,t,i){o(n,t,i)},n.GetSessionKey=function(n){return f(n)},n.ClearSessionKey=function(n){b(n)},n.IsExistingSession=function(){return k()},n.OpenAndCloseProactiveChatDrawer=function(){var t=n.AreBizRulesMet(),i=$("#nit-alme-window-root").is(":visible");t&&!i&&(n.OpenProactiveChatDrawer(!1,!1),setTimeout(function(){n.CloseProactiveChatDrawer()},c))},n.OpenProactiveChatDrawer=function(n,t){p(n,t)},n.CloseProactiveChatDrawer=function(){d()},n.IncrementDrawerOpenCounter=function(n){y(n)},n.ResetTimeOut=function(){g(r);r=setTimeout(function(){h&&n.OpenProactiveChatDrawer(!1,!1)},c)},n.AreBizRulesMet=function(){return h()},n.StorageExpirationTime=function(){return e},n.DrawerAutoOpenTimeToWait=function(){return r},n}(),waitForFinalEvent=function(){var n={};return function(t,i,r){r||(r="Don't call this twice without a uniqueId");n[r]&&clearTimeout(n[r]);n[r]=setTimeout(t,i)}}();$(".contact-drawer-tab, .smalldevices-chat-icon").on("click",function(n){var t=$(this),i=t.parent(),r=PROACTIVE_CHAT.GetSessionKey("contactDrawerState");if(i.hasClass("animating")){n.preventDefault();n.stopImmediatePropagation();return}r==="closed"?PROACTIVE_CHAT.OpenProactiveChatDrawer(!0,!1):PROACTIVE_CHAT.CloseProactiveChatDrawer();PROACTIVE_CHAT.SetSessionKey("contactDrawerIsHardClosed",!0,PROACTIVE_CHAT.StorageExpirationTime())});$(".hide-drawer").on("click",function(){var t=$(".contact-drawer").offset().left,n;t>0?(n=$(window).width()-($(".contact-drawer").offset().left+$(".contact-drawer").outerWidth()),$(".contact-drawer").removeAttr("style"),$(".contact-drawer").css({right:n}),PROACTIVE_CHAT.CloseProactiveChatDrawer()):PROACTIVE_CHAT.CloseProactiveChatDrawer();PROACTIVE_CHAT.SetSessionKey("contactDrawerIsHardClosed",!0,PROACTIVE_CHAT.StorageExpirationTime())});_contactDrawerConfig&&(PROACTIVE_CHAT.Init(),_contactDrawerConfig.EnabledBehavior.IsVisible&&_contactDrawerConfig.MicroContent.IsShowOnPageLoad!=undefined&&$.trim(_contactDrawerConfig.MicroContent.IsShowOnPageLoad).toLowerCase()==="true"&&PROACTIVE_CHAT.OpenProactiveChatDrawer(!1,!1))