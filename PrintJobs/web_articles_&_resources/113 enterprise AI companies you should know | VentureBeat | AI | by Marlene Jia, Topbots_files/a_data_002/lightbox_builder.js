var bodInsert="<div id='layout'>";bodInsert+="<div id='text1_wrapper'><div id='text1'></div></div>";bodInsert+="<div id='text2_wrapper'><div id='text2'></div></div>";bodInsert+="<div id='text3_wrapper'><div id='text3'></div></div>";bodInsert+="<div id='text4_wrapper'><div id='text4'></div></div>";bodInsert+="<div id='form_wrapper'><div id='form'></div></div>";bodInsert+="<div id='button1_wrapper'><button id='button1' class='button1'></button></div>";bodInsert+="<div id='button2_wrapper'><button id='button2' class='button2'></button></div>";bodInsert+="<div id='button3_wrapper'><button id='button3' class='button3'></button></div>";bodInsert+="<div id='button4_wrapper'><button id='button4' class='button4'></button></div>";bodInsert+="<div id='image1_wrapper'><img id='image1' /></div>";bodInsert+="<div id='image2_wrapper'><img id='image2' /></div>";bodInsert+="<div id='image3_wrapper'><img id='image3' /></div>";bodInsert+="<div id='image4_wrapper'><img id='image4' /></div>";bodInsert+="<div id='html1_wrapper'><div id='html1'></div></div>";bodInsert+="<div id='html2_wrapper'><div id='html2'></div></div>";bodInsert+="<div id='html3_wrapper'><div id='html3'></div></div>";bodInsert+="<div id='html4_wrapper'><div id='html4'></div></div>";bodInsert+="</div>";bodInsert+="<div id='thxlayout' style='display: none;'>";bodInsert+="<div id='thxtext1_wrapper'><div id='thxtext1'></div></div>";bodInsert+="<div id='thxtext2_wrapper'><div id='thxtext2'></div></div>";bodInsert+="<div id='thxtext3_wrapper'><div id='thxtext3'></div></div>";bodInsert+="<div id='thxtext4_wrapper'><div id='thxtext4'></div></div>";bodInsert+="<div id='thx_form_wrapper'><div id='thx_form'></div></div>";bodInsert+="<div id='thxbutton1_wrapper'><button id='thxbutton1' class='thxbutton1'></button></div>";bodInsert+="<div id='thxbutton2_wrapper'><button id='thxbutton2' class='thxbutton2'></button></div>";bodInsert+="<div id='thxbutton3_wrapper'><button id='thxbutton3' class='thxbutton3'></button></div>";bodInsert+="<div id='thxbutton4_wrapper'><button id='thxbutton4' class='thxbutton4'></button></div>";bodInsert+="<div id='thximage1_wrapper'><img id='thximage1' /></div>";bodInsert+="<div id='thximage2_wrapper'><img id='thximage2' /></div>";bodInsert+="<div id='thximage3_wrapper'><img id='thximage3' /></div>";bodInsert+="<div id='thximage4_wrapper'><img id='thximage4' /></div>";bodInsert+="<div id='thxhtml1_wrapper'><div id='thxhtml1'></div></div>";bodInsert+="<div id='thxhtml2_wrapper'><div id='thxhtml2'></div></div>";bodInsert+="<div id='thxhtml3_wrapper'><div id='thxhtml3'></div></div>";bodInsert+="<div id='thxhtml4_wrapper'><div id='thxhtml4'></div></div>";bodInsert+="</div>";bodInsert+="<div id='ep1layout' style='display: none;'>";bodInsert+="<div id='ep1text1_wrapper'><div id='ep1text1'></div></div>";bodInsert+="<div id='ep1text2_wrapper'><div id='ep1text2'></div></div>";bodInsert+="<div id='ep1text3_wrapper'><div id='ep1text3'></div></div>";bodInsert+="<div id='ep1text4_wrapper'><div id='ep1text4'></div></div>";bodInsert+="<div id='ep1_form_wrapper'><div id='ep1_form'></div></div>";bodInsert+="<div id='ep1button1_wrapper'><button id='ep1button1' class='ep1button1'></button></div>";bodInsert+="<div id='ep1button2_wrapper'><button id='ep1button2' class='ep1button2'></button></div>";bodInsert+="<div id='ep1button3_wrapper'><button id='ep1button3' class='ep1button3'></button></div>";bodInsert+="<div id='ep1button4_wrapper'><button id='ep1button4' class='ep1button4'></button></div>";bodInsert+="<div id='ep1image1_wrapper'><img id='ep1image1' /></div>";bodInsert+="<div id='ep1image2_wrapper'><img id='ep1image2' /></div>";bodInsert+="<div id='ep1image3_wrapper'><img id='ep1image3' /></div>";bodInsert+="<div id='ep1image4_wrapper'><img id='ep1image4' /></div>";bodInsert+="<div id='ep1html1_wrapper'><div id='ep1html1'></div></div>";bodInsert+="<div id='ep1html2_wrapper'><div id='ep1html2'></div></div>";bodInsert+="<div id='ep1html3_wrapper'><div id='ep1html3'></div></div>";bodInsert+="<div id='ep1html4_wrapper'><div id='ep1html4'></div></div>";bodInsert+="</div>";bodInsert+="<div id='ep2layout' style='display: none;'>";bodInsert+="<div id='ep2text1_wrapper'><div id='ep2text1'></div></div>";bodInsert+="<div id='ep2text2_wrapper'><div id='ep2text2'></div></div>";bodInsert+="<div id='ep2text3_wrapper'><div id='ep2text3'></div></div>";bodInsert+="<div id='ep2text4_wrapper'><div id='ep2text4'></div></div>";bodInsert+="<div id='ep2_form_wrapper'><div id='ep2_form'></div></div>";bodInsert+="<div id='ep2button1_wrapper'><button id='ep2button1' class='ep2button1'></button></div>";bodInsert+="<div id='ep2button2_wrapper'><button id='ep2button2' class='ep2button2'></button></div>";bodInsert+="<div id='ep2button3_wrapper'><button id='ep2button3' class='ep2button3'></button></div>";bodInsert+="<div id='ep2button4_wrapper'><button id='ep2button4' class='ep2button4'></button></div>";bodInsert+="<div id='ep2image1_wrapper'><img id='ep2image1' /></div>";bodInsert+="<div id='ep2image2_wrapper'><img id='ep2image2' /></div>";bodInsert+="<div id='ep2image3_wrapper'><img id='ep2image3' /></div>";bodInsert+="<div id='ep2image4_wrapper'><img id='ep2image4' /></div>";bodInsert+="<div id='ep2html1_wrapper'><div id='ep2html1'></div></div>";bodInsert+="<div id='ep2html2_wrapper'><div id='ep2html2'></div></div>";bodInsert+="<div id='ep2html3_wrapper'><div id='ep2html3'></div></div>";bodInsert+="<div id='ep2html4_wrapper'><div id='ep2html4'></div></div>";bodInsert+="</div>";bodInsert+="<div id='ep3layout' style='display: none;'>";bodInsert+="<div id='ep3text1_wrapper'><div id='ep3text1'></div></div>";bodInsert+="<div id='ep3text2_wrapper'><div id='ep3text2'></div></div>";bodInsert+="<div id='ep3text3_wrapper'><div id='ep3text3'></div></div>";bodInsert+="<div id='ep3text4_wrapper'><div id='ep3text4'></div></div>";bodInsert+="<div id='ep3_form_wrapper'><div id='ep3_form'></div></div>";bodInsert+="<div id='ep3button1_wrapper'><button id='ep3button1' class='ep3button1'></button></div>";bodInsert+="<div id='ep3button2_wrapper'><button id='ep3button2' class='ep3button2'></button></div>";bodInsert+="<div id='ep3button3_wrapper'><button id='ep3button3' class='ep3button3'></button></div>";bodInsert+="<div id='ep3button4_wrapper'><button id='ep3button4' class='ep3button4'></button></div>";bodInsert+="<div id='ep3image1_wrapper'><img id='ep3image1' /></div>";bodInsert+="<div id='ep3image2_wrapper'><img id='ep3image2' /></div>";bodInsert+="<div id='ep3image3_wrapper'><img id='ep3image3' /></div>";bodInsert+="<div id='ep3image4_wrapper'><img id='ep3image4' /></div>";bodInsert+="<div id='ep3html1_wrapper'><div id='ep3html1'></div></div>";bodInsert+="<div id='ep3html2_wrapper'><div id='ep3html2'></div></div>";bodInsert+="<div id='ep3html3_wrapper'><div id='ep3html3'></div></div>";bodInsert+="<div id='ep3html4_wrapper'><div id='ep3html4'></div></div>";bodInsert+="</div>";bodInsert+="<div id='ep4layout' style='display: none;'>";bodInsert+="<div id='ep4text1_wrapper'><div id='ep4text1'></div></div>";bodInsert+="<div id='ep4text2_wrapper'><div id='ep4text2'></div></div>";bodInsert+="<div id='ep4text3_wrapper'><div id='ep4text3'></div></div>";bodInsert+="<div id='ep4text4_wrapper'><div id='ep4text4'></div></div>";bodInsert+="<div id='ep4_form_wrapper'><div id='ep4_form'></div></div>";bodInsert+="<div id='ep4button1_wrapper'><button id='ep4button1' class='ep4button1'></button></div>";bodInsert+="<div id='ep4button2_wrapper'><button id='ep4button2' class='ep4button2'></button></div>";bodInsert+="<div id='ep4button3_wrapper'><button id='ep4button3' class='ep4button3'></button></div>";bodInsert+="<div id='ep4button4_wrapper'><button id='ep4button4' class='ep4button4'></button></div>";bodInsert+="<div id='ep4image1_wrapper'><img id='ep4image1' /></div>";bodInsert+="<div id='ep4image2_wrapper'><img id='ep4image2' /></div>";bodInsert+="<div id='ep4image3_wrapper'><img id='ep4image3' /></div>";bodInsert+="<div id='ep4image4_wrapper'><img id='ep4image4' /></div>";bodInsert+="<div id='ep4html1_wrapper'><div id='ep4html1'></div></div>";bodInsert+="<div id='ep4html2_wrapper'><div id='ep4html2'></div></div>";bodInsert+="<div id='ep4html3_wrapper'><div id='ep4html3'></div></div>";bodInsert+="<div id='ep4html4_wrapper'><div id='ep4html4'></div></div>";bodInsert+="</div>";bodInsert+="<div id='modal_loading'></div>";bodInsert+="<span style='display: none;' class='error-bubble' id='error_bubble'>";bodInsert+="<span class='error-message' id='error_message'></span>";bodInsert+="<span id='error_close'>x</span>";bodInsert+="</span>";var ie9="<!--[if lte IE 9]>";ie9+="<scr";ie9+="ipt type='text/javascript'>";ie9+="IS_IE_9_OR_LESS = true;";ie9+="<";ie9+="/scr"+"ipt>";ie9+="<![endif]-->";var pgStyle="<style type='text/css'>body{margin:0;padding:0;border:none;}#modal_loading{display:none;position:fixed;z-index:90000;top:0;left:0;height:100%;width:100%;background:url("+ PROTOCOL_USER_OVERRIDE+"www.lightboxcdn.com/static/loading_animation.gif) 50% 50% no-repeat rgba(255,255,255,.8)}body.loading{overflow:hidden}body.loading #modal_loading{display:block}.error-bubble{-webkit-border-radius:3px;-moz-border-radius:3px;-ms-border-radius:3px;-o-border-radius:3px;border-radius:3px;padding:12px 15px;margin:0;text-align:left;position:fixed;top:30px;left:30px;color:red;background-color:#fff4f4;border:1px solid #d58a8a;font-size:13px;line-height:18px;font-family:'Open Sans','lucida grande','Segoe UI',arial,verdana,'lucida sans unicode',tahoma,sans-serif;z-index:10001;white-space:nowrap;font-weight:400}.error-bubble .error-message{color:#d58a8a;font-size:inherit;line-height:inherit}.error-message{color:#dd3b38;font-size:10px}#error_close{color:#dd3b38;font-size:18px;font-weight:700;display:inline-block;float:right;cursor:pointer;margin-top:-2px}.error-bubble .error-bubble-arrow-border{display:block;border-color:#d58a8a transparent transparent;border-style:solid;border-width:6px;height:0;width:0;position:absolute;bottom:-13px;left:10px}</style>";pgStyle+="<style id='element_styles' type='text/css'></style>";var basic_fonts=["Arial, Helvetica, sans-serif","'Comic Sans MS', cursive, sans-serif","'lucida sans unicode', 'Lucida Grande', sans-serif","Tahoma, Geneva, sans-serif","Verdana, Geneva, sans-serif","'Courier New', Courier, monospace","'Lucida Console', Monaco, monospace","'Trebuchet MS', Helvetica, sans-serif","Impact, Charcoal, sans-serif"];var google_fonts=[];var custom_fonts=[];var TIME_OF_OPEN=(new Date()).getTime();var KEEN_CLIENT;var EVENT_GUID='';var IS_SETTINGS_LOADED=false;var IS_SCRIPTS_LOADED=false;var BOX_CUSTOM_JS={};var LIGHTBOX_OR_VARIATION_GUID='';var STANDARD_OBJ={};var CUSTOM_JS_GUIDS_ARR=[];var CUSTOM_JS_BOX_EMBED={};var CURRENT_PAGE='main';var CURRENT_WIDTH=0;var CURRENT_HEIGHT=0;var BugsnagInitAttempts=0;var settings;var body;var modal_loading;var error_bubble;var error_message;var layout;var text1_wrapper;var text1;var text2_wrapper;var text2;var text3_wrapper;var text3;var text4_wrapper;var text4;var button1_wrapper;var button1;var button2_wrapper;var button2;var button3_wrapper;var button3;var button4_wrapper;var button4;var image1_dims={width:100,height:100};var image1_wrapper;var image1;var image2_dims={width:100,height:100};var image2_wrapper;var image2;var image3_dims={width:100,height:100};var image3_wrapper;var image3;var image4_dims={width:100,height:100};var image4_wrapper;var image4;var html1_wrapper;var html1;var html2_wrapper;var html2;var html3_wrapper;var html3;var html4_wrapper;var html4;var thxlayout;var thxtext1_wrapper;var thxtext1;var thxtext2_wrapper;var thxtext2;var thxtext3_wrapper;var thxtext3;var thxtext4_wrapper;var thxtext4;var thxbutton1_wrapper;var thxbutton1;var thxbutton2_wrapper;var thxbutton2;var thxbutton3_wrapper;var thxbutton3;var thxbutton4_wrapper;var thxbutton4;var thximage1_dims={width:100,height:100};var thximage1_wrapper;var thximage1;var thximage2_dims={width:100,height:100};var thximage2_wrapper;var thximage2;var thximage3_dims={width:100,height:100};var thximage3_wrapper;var thximage3;var thximage4_dims={width:100,height:100};var thximage4_wrapper;var thximage4;var thxhtml1_wrapper;var thxhtml1;var thxhtml2_wrapper;var thxhtml2;var thxhtml3_wrapper;var thxhtml3;var thxhtml4_wrapper;var thxhtml4;var ep1layout;var ep1text1_wrapper;var ep1text1;var ep1text2_wrapper;var ep1text2;var ep1text3_wrapper;var ep1text3;var ep1text4_wrapper;var ep1text4;var ep1button1_wrapper;var ep1button1;var ep1button2_wrapper;var ep1button2;var ep1button3_wrapper;var ep1button3;var ep1button4_wrapper;var ep1button4;var ep1image1_dims={width:100,height:100};var ep1image1_wrapper;var ep1image1;var ep1image2_dims={width:100,height:100};var ep1image2_wrapper;var ep1image2;var ep1image3_dims={width:100,height:100};var ep1image3_wrapper;var ep1image3;var ep1image4_dims={width:100,height:100};var ep1image4_wrapper;var ep1image4;var ep1html1_wrapper;var ep1html1;var ep1html2_wrapper;var ep1html2;var ep1html3_wrapper;var ep1html3;var ep1html4_wrapper;var ep1html4;var ep2layout;var ep2text1_wrapper;var ep2text1;var ep2text2_wrapper;var ep2text2;var ep2text3_wrapper;var ep2text3;var ep2text4_wrapper;var ep2text4;var ep2button1_wrapper;var ep2button1;var ep2button2_wrapper;var ep2button2;var ep2button3_wrapper;var ep2button3;var ep2button4_wrapper;var ep2button4;var ep2image1_dims={width:100,height:100};var ep2image1_wrapper;var ep2image1;var ep2image2_dims={width:100,height:100};var ep2image2_wrapper;var ep2image2;var ep2image3_dims={width:100,height:100};var ep2image3_wrapper;var ep2image3;var ep2image4_dims={width:100,height:100};var ep2image4_wrapper;var ep2image4;var ep2html1_wrapper;var ep2html1;var ep2html2_wrapper;var ep2html2;var ep2html3_wrapper;var ep2html3;var ep2html4_wrapper;var ep2html4;var ep3layout;var ep3text1_wrapper;var ep3text1;var ep3text2_wrapper;var ep3text2;var ep3text3_wrapper;var ep3text3;var ep3text4_wrapper;var ep3text4;var ep3button1_wrapper;var ep3button1;var ep3button2_wrapper;var ep3button2;var ep3button3_wrapper;var ep3button3;var ep3button4_wrapper;var ep3button4;var ep3image1_dims={width:100,height:100};var ep3image1_wrapper;var ep3image1;var ep3image2_dims={width:100,height:100};var ep3image2_wrapper;var ep3image2;var ep3image3_dims={width:100,height:100};var ep3image3_wrapper;var ep3image3;var ep3image4_dims={width:100,height:100};var ep3image4_wrapper;var ep3image4;var ep3html1_wrapper;var ep3html1;var ep3html2_wrapper;var ep3html2;var ep3html3_wrapper;var ep3html3;var ep3html4_wrapper;var ep3html4;var ep4layout;var ep4text1_wrapper;var ep4text1;var ep4text2_wrapper;var ep4text2;var ep4text3_wrapper;var ep4text3;var ep4text4_wrapper;var ep4text4;var ep4button1_wrapper;var ep4button1;var ep4button2_wrapper;var ep4button2;var ep4button3_wrapper;var ep4button3;var ep4button4_wrapper;var ep4button4;var ep4image1_dims={width:100,height:100};var ep4image1_wrapper;var ep4image1;var ep4image2_dims={width:100,height:100};var ep4image2_wrapper;var ep4image2;var ep4image3_dims={width:100,height:100};var ep4image3_wrapper;var ep4image3;var ep4image4_dims={width:100,height:100};var ep4image4_wrapper;var ep4image4;var ep4html1_wrapper;var ep4html1;var ep4html2_wrapper;var ep4html2;var ep4html3_wrapper;var ep4html3;var ep4html4_wrapper;var ep4html4;var form_wrapper;var form;var thx_form_wrapper;var thx_form;var ep1_form_wrapper;var ep1_form;var ep2_form_wrapper;var ep2_form;var ep3_form_wrapper;var ep3_form;var ep4_form_wrapper;var ep4_form;var pref_form_input_full_name=false;var pref_form_input_first_name=false;var pref_form_input_last_name=false;var pref_form_input_email=false;var pref_form_input_phone=false;var pref_form_input_opt_in=false;var pref_form_input_custom1=false;var pref_form_input_custom2=false;var pref_form_input_custom3=false;var pref_form_input_custom4=false;var pref_form_input_custom5=false;var pref_form_input_custom6=false;var pref_form_input_custom7=false;var pref_form_input_custom8=false;var pref_form_input_custom9=false;var pref_form_input_custom10=false;var form_input_full_name;var form_input_first_name;var form_input_last_name;var form_input_email;var form_input_phone;var form_input_opt_in;var form_input_custom1;var form_input_custom2;var form_input_custom3;var form_input_custom4;var form_input_custom5;var form_input_custom6;var form_input_custom7;var form_input_custom8;var form_input_custom9;var form_input_custom10;var thx_form_input_full_name;var thx_form_input_first_name;var thx_form_input_last_name;var thx_form_input_email;var thx_form_input_phone;var thx_form_input_opt_in;var thx_form_input_custom1;var thx_form_input_custom2;var thx_form_input_custom3;var thx_form_input_custom4;var thx_form_input_custom5;var thx_form_input_custom6;var thx_form_input_custom7;var thx_form_input_custom8;var thx_form_input_custom9;var thx_form_input_custom10;var ep1_form_input_full_name;var ep1_form_input_first_name;var ep1_form_input_last_name;var ep1_form_input_email;var ep1_form_input_phone;var ep1_form_input_opt_in;var ep1_form_input_custom1;var ep1_form_input_custom2;var ep1_form_input_custom3;var ep1_form_input_custom4;var ep1_form_input_custom5;var ep1_form_input_custom6;var ep1_form_input_custom7;var ep1_form_input_custom8;var ep1_form_input_custom9;var ep1_form_input_custom10;var ep2_form_input_full_name;var ep2_form_input_first_name;var ep2_form_input_last_name;var ep2_form_input_email;var ep2_form_input_phone;var ep2_form_input_opt_in;var ep2_form_input_custom1;var ep2_form_input_custom2;var ep2_form_input_custom3;var ep2_form_input_custom4;var ep2_form_input_custom5;var ep2_form_input_custom6;var ep2_form_input_custom7;var ep2_form_input_custom8;var ep2_form_input_custom9;var ep2_form_input_custom10;var ep3_form_input_full_name;var ep3_form_input_first_name;var ep3_form_input_last_name;var ep3_form_input_email;var ep3_form_input_phone;var ep3_form_input_opt_in;var ep3_form_input_custom1;var ep3_form_input_custom2;var ep3_form_input_custom3;var ep3_form_input_custom4;var ep3_form_input_custom5;var ep3_form_input_custom6;var ep3_form_input_custom7;var ep3_form_input_custom8;var ep3_form_input_custom9;var ep3_form_input_custom10;var ep4_form_input_full_name;var ep4_form_input_first_name;var ep4_form_input_last_name;var ep4_form_input_email;var ep4_form_input_phone;var ep4_form_input_opt_in;var ep4_form_input_custom1;var ep4_form_input_custom2;var ep4_form_input_custom3;var ep4_form_input_custom4;var ep4_form_input_custom5;var ep4_form_input_custom6;var ep4_form_input_custom7;var ep4_form_input_custom8;var ep4_form_input_custom9;var ep4_form_input_custom10;var using_form=false;var using_form_thx=false;var using_form_ep1=false;var using_form_ep2=false;var using_form_ep3=false;var using_form_ep4=false;var jQuery={};var $={};window.jQuery=function(selector){return parent.DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH(selector,document);};jQuery=parent.DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH.extend(jQuery,parent.DIGIOH_API.LIGHTBOX.JQUERY_DIGIOH);window.$=window.jQuery;$=jQuery;function checkJqLoaded(){onJqLoaded();}
function onScriptsLoaded(){IS_SCRIPTS_LOADED=true;tryInitScripts();tryInitBugsnag();}
function onJqLoaded(){if(typeof LIGHTBOX_GUID==='undefined'){window.setTimeout(onJqLoaded,100);}else{onVarsLoaded();}}
function onVarsLoaded(){LIGHTBOX_OR_VARIATION_GUID=(IS_VARIATION?VARIATION_GUID:LIGHTBOX_GUID);STANDARD_OBJ.protocol=PROTOCOL;STANDARD_OBJ.protocol_user_override=PROTOCOL_USER_OVERRIDE;STANDARD_OBJ.widget_type=WIDGET_TYPE;STANDARD_OBJ.digioh_cache_version=DIGIOH_CACHE_VERSION;STANDARD_OBJ.parent_url=PARENT_URL;STANDARD_OBJ.use_bugsnag=DIGIOH_USE_BUGSNAG;STANDARD_OBJ.use_console=SHOW_ERRORS;STANDARD_OBJ.is_preview=IS_PREVIEW;STANDARD_OBJ.is_responsive=DIGIOH_USE_RESPONSIVE;STANDARD_OBJ.is_variation=IS_VARIATION;STANDARD_OBJ.user_id=VENDOR_GUID;STANDARD_OBJ.user_guid=VENDOR_GUID;STANDARD_OBJ.vendor_id=VENDOR_GUID;STANDARD_OBJ.vendor_guid=VENDOR_GUID;STANDARD_OBJ.lightbox_id=LIGHTBOX_GUID;STANDARD_OBJ.lightbox_guid=LIGHTBOX_GUID;STANDARD_OBJ.lightbox_short_id=LIGHTBOX_SHORT_ID;STANDARD_OBJ.lightbox_name=LIGHTBOX_NAME;STANDARD_OBJ.variation_id=VARIATION_GUID;STANDARD_OBJ.variation_guid=VARIATION_GUID;STANDARD_OBJ.variation_short_id=VARIATION_SHORT_ID;STANDARD_OBJ.variation_name=VARIATION_NAME;STANDARD_OBJ.lightbox_or_variation_id=LIGHTBOX_OR_VARIATION_GUID;STANDARD_OBJ.lightbox_or_variation_guid=LIGHTBOX_OR_VARIATION_GUID;STANDARD_OBJ.lightbox_or_variation_short_id=(IS_VARIATION?VARIATION_SHORT_ID:LIGHTBOX_SHORT_ID);STANDARD_OBJ.lightbox_or_variation_name=(IS_VARIATION?VARIATION_NAME:LIGHTBOX_NAME);BOX_CUSTOM_JS.runCustomJsBeforeDOMReady();onScriptsLoaded();$(document).ready(function(){body=$('body');$('head').append(ie9);$('head').append(pgStyle);body.append(bodInsert);modal_loading=$('#modal_loading');error_bubble=$('#error_bubble');error_message=$('#error_message');$('#error_close').click(function(){error_bubble.hide();});layout=$('#layout');text1_wrapper=$('#text1_wrapper');text1=$('#text1');text2_wrapper=$('#text2_wrapper');text2=$('#text2');text3_wrapper=$('#text3_wrapper');text3=$('#text3');text4_wrapper=$('#text4_wrapper');text4=$('#text4');button1_wrapper=$('#button1_wrapper');button1=$('#button1');button2_wrapper=$('#button2_wrapper');button2=$('#button2');button3_wrapper=$('#button3_wrapper');button3=$('#button3');button4_wrapper=$('#button4_wrapper');button4=$('#button4');image1_wrapper=$('#image1_wrapper');image1=$('#image1');image2_wrapper=$('#image2_wrapper');image2=$('#image2');image3_wrapper=$('#image3_wrapper');image3=$('#image3');image4_wrapper=$('#image4_wrapper');image4=$('#image4');html1_wrapper=$('#html1_wrapper');html1=$('#html1');html2_wrapper=$('#html2_wrapper');html2=$('#html2');html3_wrapper=$('#html3_wrapper');html3=$('#html3');html4_wrapper=$('#html4_wrapper');html4=$('#html4');thxlayout=$('#thxlayout');thxtext1_wrapper=$('#thxtext1_wrapper');thxtext1=$('#thxtext1');thxtext2_wrapper=$('#thxtext2_wrapper');thxtext2=$('#thxtext2');thxtext3_wrapper=$('#thxtext3_wrapper');thxtext3=$('#thxtext3');thxtext4_wrapper=$('#thxtext4_wrapper');thxtext4=$('#thxtext4');thxbutton1_wrapper=$('#thxbutton1_wrapper');thxbutton1=$('#thxbutton1');thxbutton2_wrapper=$('#thxbutton2_wrapper');thxbutton2=$('#thxbutton2');thxbutton3_wrapper=$('#thxbutton3_wrapper');thxbutton3=$('#thxbutton3');thxbutton4_wrapper=$('#thxbutton4_wrapper');thxbutton4=$('#thxbutton4');thximage1_wrapper=$('#thximage1_wrapper');thximage1=$('#thximage1');thximage2_wrapper=$('#thximage2_wrapper');thximage2=$('#thximage2');thximage3_wrapper=$('#thximage3_wrapper');thximage3=$('#thximage3');thximage4_wrapper=$('#thximage4_wrapper');thximage4=$('#thximage4');thxhtml1_wrapper=$('#thxhtml1_wrapper');thxhtml1=$('#thxhtml1');thxhtml2_wrapper=$('#thxhtml2_wrapper');thxhtml2=$('#thxhtml2');thxhtml3_wrapper=$('#thxhtml3_wrapper');thxhtml3=$('#thxhtml3');thxhtml4_wrapper=$('#thxhtml4_wrapper');thxhtml4=$('#thxhtml4');ep1layout=$('#ep1layout');ep1text1_wrapper=$('#ep1text1_wrapper');ep1text1=$('#ep1text1');ep1text2_wrapper=$('#ep1text2_wrapper');ep1text2=$('#ep1text2');ep1text3_wrapper=$('#ep1text3_wrapper');ep1text3=$('#ep1text3');ep1text4_wrapper=$('#ep1text4_wrapper');ep1text4=$('#ep1text4');ep1button1_wrapper=$('#ep1button1_wrapper');ep1button1=$('#ep1button1');ep1button2_wrapper=$('#ep1button2_wrapper');ep1button2=$('#ep1button2');ep1button3_wrapper=$('#ep1button3_wrapper');ep1button3=$('#ep1button3');ep1button4_wrapper=$('#ep1button4_wrapper');ep1button4=$('#ep1button4');ep1image1_wrapper=$('#ep1image1_wrapper');ep1image1=$('#ep1image1');ep1image2_wrapper=$('#ep1image2_wrapper');ep1image2=$('#ep1image2');ep1image3_wrapper=$('#ep1image3_wrapper');ep1image3=$('#ep1image3');ep1image4_wrapper=$('#ep1image4_wrapper');ep1image4=$('#ep1image4');ep1html1_wrapper=$('#ep1html1_wrapper');ep1html1=$('#ep1html1');ep1html2_wrapper=$('#ep1html2_wrapper');ep1html2=$('#ep1html2');ep1html3_wrapper=$('#ep1html3_wrapper');ep1html3=$('#ep1html3');ep1html4_wrapper=$('#ep1html4_wrapper');ep1html4=$('#ep1html4');ep2layout=$('#ep2layout');ep2text1_wrapper=$('#ep2text1_wrapper');ep2text1=$('#ep2text1');ep2text2_wrapper=$('#ep2text2_wrapper');ep2text2=$('#ep2text2');ep2text3_wrapper=$('#ep2text3_wrapper');ep2text3=$('#ep2text3');ep2text4_wrapper=$('#ep2text4_wrapper');ep2text4=$('#ep2text4');ep2button1_wrapper=$('#ep2button1_wrapper');ep2button1=$('#ep2button1');ep2button2_wrapper=$('#ep2button2_wrapper');ep2button2=$('#ep2button2');ep2button3_wrapper=$('#ep2button3_wrapper');ep2button3=$('#ep2button3');ep2button4_wrapper=$('#ep2button4_wrapper');ep2button4=$('#ep2button4');ep2image1_wrapper=$('#ep2image1_wrapper');ep2image1=$('#ep2image1');ep2image2_wrapper=$('#ep2image2_wrapper');ep2image2=$('#ep2image2');ep2image3_wrapper=$('#ep2image3_wrapper');ep2image3=$('#ep2image3');ep2image4_wrapper=$('#ep2image4_wrapper');ep2image4=$('#ep2image4');ep2html1_wrapper=$('#ep2html1_wrapper');ep2html1=$('#ep2html1');ep2html2_wrapper=$('#ep2html2_wrapper');ep2html2=$('#ep2html2');ep2html3_wrapper=$('#ep2html3_wrapper');ep2html3=$('#ep2html3');ep2html4_wrapper=$('#ep2html4_wrapper');ep2html4=$('#ep2html4');ep3layout=$('#ep3layout');ep3text1_wrapper=$('#ep3text1_wrapper');ep3text1=$('#ep3text1');ep3text2_wrapper=$('#ep3text2_wrapper');ep3text2=$('#ep3text2');ep3text3_wrapper=$('#ep3text3_wrapper');ep3text3=$('#ep3text3');ep3text4_wrapper=$('#ep3text4_wrapper');ep3text4=$('#ep3text4');ep3button1_wrapper=$('#ep3button1_wrapper');ep3button1=$('#ep3button1');ep3button2_wrapper=$('#ep3button2_wrapper');ep3button2=$('#ep3button2');ep3button3_wrapper=$('#ep3button3_wrapper');ep3button3=$('#ep3button3');ep3button4_wrapper=$('#ep3button4_wrapper');ep3button4=$('#ep3button4');ep3image1_wrapper=$('#ep3image1_wrapper');ep3image1=$('#ep3image1');ep3image2_wrapper=$('#ep3image2_wrapper');ep3image2=$('#ep3image2');ep3image3_wrapper=$('#ep3image3_wrapper');ep3image3=$('#ep3image3');ep3image4_wrapper=$('#ep3image4_wrapper');ep3image4=$('#ep3image4');ep3html1_wrapper=$('#ep3html1_wrapper');ep3html1=$('#ep3html1');ep3html2_wrapper=$('#ep3html2_wrapper');ep3html2=$('#ep3html2');ep3html3_wrapper=$('#ep3html3_wrapper');ep3html3=$('#ep3html3');ep3html4_wrapper=$('#ep3html4_wrapper');ep3html4=$('#ep3html4');ep4layout=$('#ep4layout');ep4text1_wrapper=$('#ep4text1_wrapper');ep4text1=$('#ep4text1');ep4text2_wrapper=$('#ep4text2_wrapper');ep4text2=$('#ep4text2');ep4text3_wrapper=$('#ep4text3_wrapper');ep4text3=$('#ep4text3');ep4text4_wrapper=$('#ep4text4_wrapper');ep4text4=$('#ep4text4');ep4button1_wrapper=$('#ep4button1_wrapper');ep4button1=$('#ep4button1');ep4button2_wrapper=$('#ep4button2_wrapper');ep4button2=$('#ep4button2');ep4button3_wrapper=$('#ep4button3_wrapper');ep4button3=$('#ep4button3');ep4button4_wrapper=$('#ep4button4_wrapper');ep4button4=$('#ep4button4');ep4image1_wrapper=$('#ep4image1_wrapper');ep4image1=$('#ep4image1');ep4image2_wrapper=$('#ep4image2_wrapper');ep4image2=$('#ep4image2');ep4image3_wrapper=$('#ep4image3_wrapper');ep4image3=$('#ep4image3');ep4image4_wrapper=$('#ep4image4_wrapper');ep4image4=$('#ep4image4');ep4html1_wrapper=$('#ep4html1_wrapper');ep4html1=$('#ep4html1');ep4html2_wrapper=$('#ep4html2_wrapper');ep4html2=$('#ep4html2');ep4html3_wrapper=$('#ep4html3_wrapper');ep4html3=$('#ep4html3');ep4html4_wrapper=$('#ep4html4_wrapper');ep4html4=$('#ep4html4');form_wrapper=$('#form_wrapper');form=$('#form');thx_form_wrapper=$('#thx_form_wrapper');thx_form=$('#thx_form');ep1_form_wrapper=$('#ep1_form_wrapper');ep1_form=$('#ep1_form');ep2_form_wrapper=$('#ep2_form_wrapper');ep2_form=$('#ep2_form');ep3_form_wrapper=$('#ep3_form_wrapper');ep3_form=$('#ep3_form');ep4_form_wrapper=$('#ep4_form_wrapper');ep4_form=$('#ep4_form');tryApplySettings();});}
function onResponsiveDimensionChange(obj){try{if(IS_SETTINGS_LOADED&&IS_SCRIPTS_LOADED){var width=obj.width;var height=obj.height;CURRENT_WIDTH=width;CURRENT_HEIGHT=height;var pref='';if(CURRENT_PAGE&&CURRENT_PAGE!=='main'){pref=CURRENT_PAGE;}
if(!settings.hasOwnProperty(pref+'responsive')||!settings[pref+'responsive'].use){return;}
var origBoxWidth=700;var origBoxHeight=500;if(settings.hasOwnProperty(pref+'layout')&&settings[pref+'layout'].hasOwnProperty('width')&&settings[pref+'layout'].hasOwnProperty('height')){origBoxWidth=settings[pref+'layout'].width;origBoxHeight=settings[pref+'layout'].height;}else{origBoxWidth=settings['layout'].width;origBoxHeight=settings['layout'].height;}
var newBoxWidth=obj.width;var newBoxHeight=obj.height;if(DIGIOH_USE_RESPONSIVE){if(newBoxWidth>settings[pref+'responsive'].width_max)
newBoxWidth=settings[pref+'responsive'].width_max;else if(newBoxWidth<settings[pref+'responsive'].width_min)
newBoxWidth=settings[pref+'responsive'].width_min;if(newBoxHeight>settings[pref+'responsive'].height_max)
newBoxHeight=settings[pref+'responsive'].height_max;else if(newBoxHeight<settings[pref+'responsive'].height_min)
newBoxHeight=settings[pref+'responsive'].height_min;}
else{newBoxWidth=obj.width;newBoxHeight=origBoxHeight;}
if(settings[pref+'layout'].border.style==='none'||settings[pref+'layout'].border.width==='0'||settings[pref+'layout'].border.width===0){newBoxWidth=newBoxWidth;newBoxHeight=newBoxHeight;}else{newBoxWidth=newBoxWidth-(2*settings[pref+'layout'].border.width);newBoxHeight=newBoxHeight-(2*settings[pref+'layout'].border.width);}
var diffBoxWidth=newBoxWidth- origBoxWidth;var diffBoxHeight=newBoxHeight- origBoxHeight;var growthBoxWidth=diffBoxWidth/origBoxWidth;var growthBoxHeight=diffBoxHeight/origBoxHeight;$('#'+ pref+'layout').width(newBoxWidth);$('#'+ pref+'layout').height(newBoxHeight);var includeFilter=settings[pref+'responsive'].include_filter||'';var excludeFilter=settings[pref+'responsive'].exclude_filter||'';if(!DIGIOH_USE_RESPONSIVE){includeFilter='';excludeFilter='';}
for(var j=0;j<=4;j++){var ele_type='';if(j===0)ele_type='html';if(j===1)ele_type='text';if(j===2)ele_type='button';if(j===3)ele_type='image';if(j===4)ele_type='form';for(var idx=1;idx<=4;idx++){var i=idx;var pref_responsive=pref+'responsive';if(ele_type==='form'){if(idx<4){continue;}else{i='';if(pref!==''){pref=pref+'_';}}}
if(!DIGIOH_USE_RESPONSIVE&&settings.hasOwnProperty(pref+ ele_type+ i)&&settings[pref+ ele_type+ i].display){var origElementWidth=settings[pref+ ele_type+ i].width;var origElementHeight=settings[pref+ ele_type+ i].height;var origElementLeft=settings[pref+ ele_type+ i].x;var origElementTop=settings[pref+ ele_type+ i].y;var newElementWidth=origElementWidth;var newElementHeight=origElementHeight;var newElementLeft=getNewElementLeft(pref_responsive,origElementLeft,origElementWidth,newElementWidth,origBoxWidth,newBoxWidth);var newElementTop=getNewElementTop(pref_responsive,origElementTop,origElementHeight,newElementHeight,origBoxHeight,newBoxHeight);var diffElementWidth=newElementWidth- origElementWidth;var diffElementHeight=newElementHeight- origElementHeight;$('#'+ pref+ ele_type+ i+'_wrapper').css({"left":newElementLeft+"px","top":newElementTop+"px","width":newElementWidth+"px","height":newElementHeight+"px"});}
else if(DIGIOH_USE_RESPONSIVE&&settings.hasOwnProperty(pref+ ele_type+ i)&&settings[pref+ ele_type+ i].display&&excludeFilter.indexOf(ele_type+ i)===-1&&(settings[pref_responsive]['use_'+ ele_type]||includeFilter.indexOf(ele_type+ i)>=0)){var elementWidthPct=settings[pref_responsive].content_width;var elementHeightPct=settings[pref_responsive].content_height;var elementFontPct=settings[pref_responsive].content_font;var labelsFontPct=elementFontPct;var inputsFontPct=elementFontPct;var optInFontPct=0;var helpTextFontPct=0;var elementWidthMin=0;var elementHeightMin=0;var elementFontMin=0;var labelsFontMin=0;var inputsFontMin=0;var optInFontMin=0;var helpTextFontMin=0;var elementWidthMax=10000;var elementHeightMax=10000;var elementFontMax=10000;var labelsFontMax=10000;var inputsFontMax=10000;var optInFontMax=10000;var helpTextFontMax=10000;if(includeFilter.indexOf(ele_type+ i)>=0){var includeParts=includeFilter.split(/\r?\n/);for(var x=0;x<includeParts.length;x++){if(includeParts[x].indexOf('|')>0&&includeParts[x].indexOf(':')>0){var elementNWHF=includeParts[x].split('|');var elementNameNum='';var elementW='';var elementH='';var elementF='';if(elementNWHF.length>0)
elementNameNum=elementNWHF[0];if(elementNWHF.length>1)
elementW=elementNWHF[1];if(elementNWHF.length>2)
elementH=elementNWHF[2];if(elementNWHF.length>3)
elementF=elementNWHF[3];var elementWparts=elementW.split(':');var elementHparts=elementH.split(':');var elementFparts=elementF.split(':');if(elementNameNum.trim()===(ele_type+ i)){if(elementWparts.length===3){elementWidthPct=parseInt(elementWparts[0].trim());elementWidthMin=parseInt(elementWparts[1].trim());elementWidthMax=parseInt(elementWparts[2].trim());}
if(elementHparts.length===3){elementHeightPct=parseInt(elementHparts[0].trim());elementHeightMin=parseInt(elementHparts[1].trim());elementHeightMax=parseInt(elementHparts[2].trim());}
if(elementFparts.length===3){elementFontPct=parseInt(elementFparts[0].trim());elementFontMin=parseInt(elementFparts[1].trim());elementFontMax=parseInt(elementFparts[2].trim());}}else if(elementNameNum.trim()==='labels'){if(elementFparts.length===3){labelsFontPct=parseInt(elementFparts[0].trim());labelsFontMin=parseInt(elementFparts[1].trim());labelsFontMax=parseInt(elementFparts[2].trim());}}else if(elementNameNum.trim()==='inputs'){if(elementFparts.length===3){inputsFontPct=parseInt(elementFparts[0].trim());inputsFontMin=parseInt(elementFparts[1].trim());inputsFontMax=parseInt(elementFparts[2].trim());}}else if(elementNameNum.trim()==='opt_in'){if(elementFparts.length===3){optInFontPct=parseInt(elementFparts[0].trim());optInFontMin=parseInt(elementFparts[1].trim());optInFontMax=parseInt(elementFparts[2].trim());}}else if(elementNameNum.trim()==='help_text'){if(elementFparts.length===3){helpTextFontPct=parseInt(elementFparts[0].trim());helpTextFontMin=parseInt(elementFparts[1].trim());helpTextFontMax=parseInt(elementFparts[2].trim());}}}}}
var origElementWidth=settings[pref+ ele_type+ i].width;var origElementHeight=settings[pref+ ele_type+ i].height;var origElementLeft=settings[pref+ ele_type+ i].x;var origElementTop=settings[pref+ ele_type+ i].y;var newElementWidth=Math.round(origElementWidth+(diffBoxWidth*elementWidthPct/100));var newElementHeight=Math.round(origElementHeight+(diffBoxHeight*elementHeightPct/100));if(newElementWidth<elementWidthMin)
newElementWidth=elementWidthMin;if(newElementWidth>elementWidthMax)
newElementWidth=elementWidthMax;if(newElementHeight<elementHeightMin)
newElementHeight=elementHeightMin;if(newElementHeight>elementHeightMax)
newElementHeight=elementHeightMax;var newElementLeft=getNewElementLeft(pref_responsive,origElementLeft,origElementWidth,newElementWidth,origBoxWidth,newBoxWidth);var newElementTop=getNewElementTop(pref_responsive,origElementTop,origElementHeight,newElementHeight,origBoxHeight,newBoxHeight);var diffElementWidth=newElementWidth- origElementWidth;var diffElementHeight=newElementHeight- origElementHeight;$('#'+ pref+ ele_type+ i+'_wrapper').css({"left":newElementLeft+"px","top":newElementTop+"px","width":newElementWidth+"px","height":newElementHeight+"px"});if(ele_type==='form'){if(excludeFilter.indexOf('labels')===-1){var labelsFontMultiplier=((diffElementWidth/5)*(labelsFontPct/100));var origLabelFontSize=parseInt(settings[pref+'labels'].font.size);var newLabelFontSize=Math.round(origLabelFontSize+ labelsFontMultiplier);if(newLabelFontSize<labelsFontMin)
newLabelFontSize=labelsFontMin;if(newLabelFontSize>labelsFontMax)
newLabelFontSize=labelsFontMax;$('.'+ pref+'form_labels').css({"font-size":newLabelFontSize+"px"});}
if(excludeFilter.indexOf('inputs')===-1){var inputsFontMultiplier=((diffElementWidth/5)*(inputsFontPct/100));var origInputFontSize=parseInt(settings[pref+'inputs'].font.size);var newInputFontSize=Math.round(origInputFontSize+ inputsFontMultiplier);if(newInputFontSize<inputsFontMin)
newInputFontSize=inputsFontMin;if(newInputFontSize>inputsFontMax)
newInputFontSize=inputsFontMax;$('.'+ pref+'form_inputs').css({"font-size":newInputFontSize+"px"});}
if(settings[pref+'opt_in'].display&&excludeFilter.indexOf('opt_in')===-1&&optInFontPct>0){var optInFontMultiplier=((diffElementWidth/5)*(optInFontPct/100));var origOptInFontSize=parseInt(settings[pref+'opt_in'].font.size);var newOptInFontSize=Math.round(origOptInFontSize+ optInFontMultiplier);if(newOptInFontSize<optInFontMin)
newOptInFontSize=optInFontMin;if(newOptInFontSize>optInFontMax)
newOptInFontSize=optInFontMax;$('#'+ pref+'form_input_opt_in_text').css({"font-size":newOptInFontSize+"px"});}
if(excludeFilter.indexOf('help_text')===-1&&helpTextFontPct>0){var helpTextFontMultiplier=((diffElementWidth/5)*(helpTextFontPct/100));var origHelpTextFontSize=11;var newHelpTextFontSize=Math.round(origHelpTextFontSize+ helpTextFontMultiplier);if(newHelpTextFontSize<helpTextFontMin)
newHelpTextFontSize=helpTextFontMin;if(newHelpTextFontSize>helpTextFontMax)
newHelpTextFontSize=helpTextFontMax;$('.'+ pref+'form_inputs_help').css({"font-size":newHelpTextFontSize+"px"});}
var growthElementHeightPct=diffElementHeight/origElementHeight;var newFormRowHeight=Math.round(parseInt(settings[pref+'inputs'].height)*(1+ growthElementHeightPct));if(settings[pref+'labels'].position=='left'){$('.'+ pref+'form_labels').height(newFormRowHeight);$('.'+ pref+'form_labels').css({'line-height':newFormRowHeight+'px'});}
$('.'+ pref+'form_inputs').height(newFormRowHeight);}
else if(ele_type==='text'||ele_type==='button'){var fontMultiplier=((diffElementWidth/5)*(elementFontPct/100));var origElementFontSize=parseInt(settings[pref+ ele_type+ i].font.size);var newElementFontSize=Math.round(origElementFontSize+ fontMultiplier);if(newElementFontSize<elementFontMin)
newElementFontSize=elementFontMin;if(newElementFontSize>elementFontMax)
newElementFontSize=elementFontMax;$('#'+ pref+ ele_type+ i).css({"font-size":newElementFontSize+"px"});}}}}}else{logger('onResponsiveDimensionChange: settings not yet loaded...');}}catch(e){logger('onResponsiveDimensionChange: '+ e.message);}}
function getNewElementLeft(pref_responsive,origElementLeft,origElementWidth,newElementWidth,origBoxWidth,newBoxWidth){var contentAlignmentX=settings[pref_responsive].content_alignment_x;var newElementLeft=origElementLeft;if(contentAlignmentX==='left'){newElementLeft=origElementLeft;}else if(contentAlignmentX==='center'){var diffBoxWidth=newBoxWidth- origBoxWidth;var diffElementWidth=newElementWidth- origElementWidth;newElementLeft=Math.round(origElementLeft+(0.5*diffBoxWidth)-(0.5*diffElementWidth));}else if(contentAlignmentX==='right'){newElementLeft=newBoxWidth-(origBoxWidth- origElementWidth- origElementLeft)- newElementWidth;}
return newElementLeft;}
function getNewElementTop(pref_responsive,origElementTop,origElementHeight,newElementHeight,origBoxHeight,newBoxHeight){var contentAlignmentY=settings[pref_responsive].content_alignment_y;var newElementTop=origElementTop;if(contentAlignmentY==='top'){newElementTop=origElementTop;}else if(contentAlignmentY==='center'){var diffBoxHeight=newBoxHeight- origBoxHeight;var diffElementHeight=newElementHeight- origElementHeight;newElementTop=Math.round(origElementTop+(0.5*diffBoxHeight)-(0.5*diffElementHeight));}else if(contentAlignmentY==='bottom'){newElementTop=newBoxHeight-(origBoxHeight- origElementHeight- origElementTop)- newElementHeight;}
return newElementTop;}
function sendMessageToParent(obj){parent.DIGIOH_API.LIGHTBOX.receiveMessageFromIframe(obj,LIGHTBOX_OR_VARIATION_GUID);}
function receiveMessageFromParent(obj){if(obj&&obj.hasOwnProperty('message')){logger(obj.message);}
if(obj&&obj.hasOwnProperty('sender')&&obj.sender==='digioh'){if(obj.hasOwnProperty('action')){if(obj.action==='dimensions_changed'){onResponsiveDimensionChange(obj);}
else if(obj.action==='before_lightbox_display'){BOX_CUSTOM_JS.runCustomJsBeforeDisplay();}
else if(obj.action==='after_lightbox_display'){BOX_CUSTOM_JS.runCustomJsAfterDisplay();}
else if(obj.action==='before_lightbox_close'){BOX_CUSTOM_JS.runCustomJsBeforeClose();}
else if(obj.action==='after_lightbox_close'){BOX_CUSTOM_JS.runCustomJsAfterClose();}}}}
function sendMessageToIframe(obj,lid_target){parent.DIGIOH_API.LIGHTBOX.relayMessageToIframe(obj,LIGHTBOX_OR_VARIATION_GUID,lid_target);}
function receiveMessageFromIframe(obj,lid_source,lid_target){if(obj&&obj.hasOwnProperty('message')){logger(obj.message);}}
function tryInitBugsnag(){BugsnagInitAttempts++;if(typeof DIGIOH_USE_BUGSNAG!=='undefined'&&DIGIOH_USE_BUGSNAG){if(typeof parent.DIGIOH_API.LIGHTBOX.DIGIOH_BUGSNAG!=='undefined'&&parent.DIGIOH_API.LIGHTBOX.DIGIOH_BUGSNAG!==null){}else if(BugsnagInitAttempts<10){setTimeout(tryInitBugsnag,250);}}else{}}
function tryInitScripts(){if(parent.DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS&&parent.DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS.hasOwnProperty(LIGHTBOX_OR_VARIATION_GUID)&&parent.DIGIOH_API.LIGHTBOX.LZString){settings=JSON.parse(parent.DIGIOH_API.LIGHTBOX.LZString.decompressFromBase64(parent.DIGIOH_API.DIGIOH_LIGHTBOX_SETTINGS[LIGHTBOX_OR_VARIATION_GUID]));IS_SETTINGS_LOADED=true;}else{setTimeout(tryInitScripts,200);}}
function tryApplySettings(){if(IS_SETTINGS_LOADED&&IS_SCRIPTS_LOADED){applySettings();}else{setTimeout(tryApplySettings,100);}}
function applySettings(){CURRENT_WIDTH=settings.layout.width;CURRENT_HEIGHT=settings.layout.height;buildStyles();buildText();buildForm();buildButtons();buildImages();buildHTML();loadExternalFonts();$('input').focus(function(){sendMessageToParent({sender:'digioh',event:'input_focus',lightbox_id:LIGHTBOX_OR_VARIATION_GUID});});sendMessageToParent({sender:'digioh',status:'child_messaging_ready',lightbox_id:LIGHTBOX_OR_VARIATION_GUID});sendMessageToParent({sender:'digioh',loading_status:'settings_applied',lightbox_id:LIGHTBOX_OR_VARIATION_GUID,widget_type:WIDGET_TYPE});BOX_CUSTOM_JS.runCustomJsAfterDOMReady();}
function showLoading(pref){var modal_width=0;var modal_height=0;if(CURRENT_WIDTH&&CURRENT_HEIGHT){modal_width=CURRENT_WIDTH;modal_height=CURRENT_HEIGHT;}else if(pref==='thx_'&&settings.hasOwnProperty('thxlayout')){modal_width=settings.thxlayout.width;modal_height=settings.thxlayout.height;}else if(pref==='ep1_'&&settings.hasOwnProperty('ep1layout')){modal_width=settings.ep1layout.width;modal_height=settings.ep1layout.height;}else if(pref==='ep2_'&&settings.hasOwnProperty('ep2layout')){modal_width=settings.ep2layout.width;modal_height=settings.ep2layout.height;}else if(pref==='ep3_'&&settings.hasOwnProperty('ep3layout')){modal_width=settings.ep3layout.width;modal_height=settings.ep3layout.height;}else if(pref==='ep4_'&&settings.hasOwnProperty('ep4layout')){modal_width=settings.ep4layout.width;modal_height=settings.ep4layout.height;}else{modal_width=settings.layout.width;modal_height=settings.layout.height;}
modal_loading.width(modal_width);modal_loading.height(modal_height);modal_loading.css('left','0px');modal_loading.css('top','0px');body.addClass('loading');}
function hideLoading(){body.removeClass('loading');}
function loadExternalFonts(){if(settings.text1.display)addExternalFontToStack(settings.text1.font.family);if(settings.text2.display)addExternalFontToStack(settings.text2.font.family);if(settings.text3.display)addExternalFontToStack(settings.text3.font.family);if(settings.text4.display)addExternalFontToStack(settings.text4.font.family);if(settings.button1.display)addExternalFontToStack(settings.button1.font.family);if(settings.button2.display)addExternalFontToStack(settings.button2.font.family);if(settings.button3.display)addExternalFontToStack(settings.button3.font.family);if(settings.button4.display)addExternalFontToStack(settings.button4.font.family);if(settings.button1.display)addExternalFontToStack(settings.button1.font_hover.family);if(settings.button2.display)addExternalFontToStack(settings.button2.font_hover.family);if(settings.button3.display)addExternalFontToStack(settings.button3.font_hover.family);if(settings.button4.display)addExternalFontToStack(settings.button4.font_hover.family);if(settings.button1.display)addExternalFontToStack(settings.button1.font_focus.family);if(settings.button2.display)addExternalFontToStack(settings.button2.font_focus.family);if(settings.button3.display)addExternalFontToStack(settings.button3.font_focus.family);if(settings.button4.display)addExternalFontToStack(settings.button4.font_focus.family);if(settings.thxtext1.display)addExternalFontToStack(settings.thxtext1.font.family);if(settings.thxtext2.display)addExternalFontToStack(settings.thxtext2.font.family);if(settings.thxtext3.display)addExternalFontToStack(settings.thxtext3.font.family);if(settings.thxtext4.display)addExternalFontToStack(settings.thxtext4.font.family);if(settings.thxbutton1.display)addExternalFontToStack(settings.thxbutton1.font.family);if(settings.thxbutton2.display)addExternalFontToStack(settings.thxbutton2.font.family);if(settings.thxbutton3.display)addExternalFontToStack(settings.thxbutton3.font.family);if(settings.thxbutton4.display)addExternalFontToStack(settings.thxbutton4.font.family);if(settings.thxbutton1.display)addExternalFontToStack(settings.thxbutton1.font_hover.family);if(settings.thxbutton2.display)addExternalFontToStack(settings.thxbutton2.font_hover.family);if(settings.thxbutton3.display)addExternalFontToStack(settings.thxbutton3.font_hover.family);if(settings.thxbutton4.display)addExternalFontToStack(settings.thxbutton4.font_hover.family);if(settings.thxbutton1.display)addExternalFontToStack(settings.thxbutton1.font_focus.family);if(settings.thxbutton2.display)addExternalFontToStack(settings.thxbutton2.font_focus.family);if(settings.thxbutton3.display)addExternalFontToStack(settings.thxbutton3.font_focus.family);if(settings.thxbutton4.display)addExternalFontToStack(settings.thxbutton4.font_focus.family);if(settings.hasOwnProperty('ep1layout')){if(settings.ep1text1.display)addExternalFontToStack(settings.ep1text1.font.family);if(settings.ep1text2.display)addExternalFontToStack(settings.ep1text2.font.family);if(settings.ep1text3.display)addExternalFontToStack(settings.ep1text3.font.family);if(settings.ep1text4.display)addExternalFontToStack(settings.ep1text4.font.family);if(settings.ep1button1.display)addExternalFontToStack(settings.ep1button1.font.family);if(settings.ep1button2.display)addExternalFontToStack(settings.ep1button2.font.family);if(settings.ep1button3.display)addExternalFontToStack(settings.ep1button3.font.family);if(settings.ep1button4.display)addExternalFontToStack(settings.ep1button4.font.family);if(settings.ep1button1.display)addExternalFontToStack(settings.ep1button1.font_hover.family);if(settings.ep1button2.display)addExternalFontToStack(settings.ep1button2.font_hover.family);if(settings.ep1button3.display)addExternalFontToStack(settings.ep1button3.font_hover.family);if(settings.ep1button4.display)addExternalFontToStack(settings.ep1button4.font_hover.family);if(settings.ep1button1.display)addExternalFontToStack(settings.ep1button1.font_focus.family);if(settings.ep1button2.display)addExternalFontToStack(settings.ep1button2.font_focus.family);if(settings.ep1button3.display)addExternalFontToStack(settings.ep1button3.font_focus.family);if(settings.ep1button4.display)addExternalFontToStack(settings.ep1button4.font_focus.family);if(settings.ep2text1.display)addExternalFontToStack(settings.ep2text1.font.family);if(settings.ep2text2.display)addExternalFontToStack(settings.ep2text2.font.family);if(settings.ep2text3.display)addExternalFontToStack(settings.ep2text3.font.family);if(settings.ep2text4.display)addExternalFontToStack(settings.ep2text4.font.family);if(settings.ep2button1.display)addExternalFontToStack(settings.ep2button1.font.family);if(settings.ep2button2.display)addExternalFontToStack(settings.ep2button2.font.family);if(settings.ep2button3.display)addExternalFontToStack(settings.ep2button3.font.family);if(settings.ep2button4.display)addExternalFontToStack(settings.ep2button4.font.family);if(settings.ep2button1.display)addExternalFontToStack(settings.ep2button1.font_hover.family);if(settings.ep2button2.display)addExternalFontToStack(settings.ep2button2.font_hover.family);if(settings.ep2button3.display)addExternalFontToStack(settings.ep2button3.font_hover.family);if(settings.ep2button4.display)addExternalFontToStack(settings.ep2button4.font_hover.family);if(settings.ep2button1.display)addExternalFontToStack(settings.ep2button1.font_focus.family);if(settings.ep2button2.display)addExternalFontToStack(settings.ep2button2.font_focus.family);if(settings.ep2button3.display)addExternalFontToStack(settings.ep2button3.font_focus.family);if(settings.ep2button4.display)addExternalFontToStack(settings.ep2button4.font_focus.family);if(settings.ep3text1.display)addExternalFontToStack(settings.ep3text1.font.family);if(settings.ep3text2.display)addExternalFontToStack(settings.ep3text2.font.family);if(settings.ep3text3.display)addExternalFontToStack(settings.ep3text3.font.family);if(settings.ep3text4.display)addExternalFontToStack(settings.ep3text4.font.family);if(settings.ep3button1.display)addExternalFontToStack(settings.ep3button1.font.family);if(settings.ep3button2.display)addExternalFontToStack(settings.ep3button2.font.family);if(settings.ep3button3.display)addExternalFontToStack(settings.ep3button3.font.family);if(settings.ep3button4.display)addExternalFontToStack(settings.ep3button4.font.family);if(settings.ep3button1.display)addExternalFontToStack(settings.ep3button1.font_hover.family);if(settings.ep3button2.display)addExternalFontToStack(settings.ep3button2.font_hover.family);if(settings.ep3button3.display)addExternalFontToStack(settings.ep3button3.font_hover.family);if(settings.ep3button4.display)addExternalFontToStack(settings.ep3button4.font_hover.family);if(settings.ep3button1.display)addExternalFontToStack(settings.ep3button1.font_focus.family);if(settings.ep3button2.display)addExternalFontToStack(settings.ep3button2.font_focus.family);if(settings.ep3button3.display)addExternalFontToStack(settings.ep3button3.font_focus.family);if(settings.ep3button4.display)addExternalFontToStack(settings.ep3button4.font_focus.family);if(settings.ep4text1.display)addExternalFontToStack(settings.ep4text1.font.family);if(settings.ep4text2.display)addExternalFontToStack(settings.ep4text2.font.family);if(settings.ep4text3.display)addExternalFontToStack(settings.ep4text3.font.family);if(settings.ep4text4.display)addExternalFontToStack(settings.ep4text4.font.family);if(settings.ep4button1.display)addExternalFontToStack(settings.ep4button1.font.family);if(settings.ep4button2.display)addExternalFontToStack(settings.ep4button2.font.family);if(settings.ep4button3.display)addExternalFontToStack(settings.ep4button3.font.family);if(settings.ep4button4.display)addExternalFontToStack(settings.ep4button4.font.family);if(settings.ep4button1.display)addExternalFontToStack(settings.ep4button1.font_hover.family);if(settings.ep4button2.display)addExternalFontToStack(settings.ep4button2.font_hover.family);if(settings.ep4button3.display)addExternalFontToStack(settings.ep4button3.font_hover.family);if(settings.ep4button4.display)addExternalFontToStack(settings.ep4button4.font_hover.family);if(settings.ep4button1.display)addExternalFontToStack(settings.ep4button1.font_focus.family);if(settings.ep4button2.display)addExternalFontToStack(settings.ep4button2.font_focus.family);if(settings.ep4button3.display)addExternalFontToStack(settings.ep4button3.font_focus.family);if(settings.ep4button4.display)addExternalFontToStack(settings.ep4button4.font_focus.family);}
addExternalFontToStack(settings.labels.font.family);addExternalFontToStack(settings.inputs.font.family);if(settings.hasOwnProperty('ep1layout')){addExternalFontToStack(settings.thx_labels.font.family);addExternalFontToStack(settings.thx_inputs.font.family);addExternalFontToStack(settings.ep1_labels.font.family);addExternalFontToStack(settings.ep1_inputs.font.family);addExternalFontToStack(settings.ep2_labels.font.family);addExternalFontToStack(settings.ep2_inputs.font.family);addExternalFontToStack(settings.ep3_labels.font.family);addExternalFontToStack(settings.ep3_inputs.font.family);addExternalFontToStack(settings.ep4_labels.font.family);addExternalFontToStack(settings.ep4_inputs.font.family);}
loadGoogleFontsFromStack();}
function addExternalFontToStack(f){if(f.indexOf('__custom__')>=0){addCustomFontToStack(f);}else{var font_name='';if(f.indexOf('__google__')>=0){font_name=f.replace('__google__','').split("'")[1];}else if(f&&f.length>10&&$.inArray(f,basic_fonts)==-1){font_name=f.split("'")[1];}
if(font_name&&font_name.length>1&&$.inArray(font_name,google_fonts)==-1){google_fonts.push(font_name);}}}
function loadGoogleFontsFromStack(){if(google_fonts.length>0){var font_builder='https://fonts.googleapis.com/css?family=';var font_fam='';for(var i=0;i<google_fonts.length;i++){font_fam=google_fonts[i];if(font_fam.indexOf(' ')>0){font_fam=font_fam.split(' ').join('+');}
font_builder+=font_fam;if(i<(google_fonts.length- 1)){font_builder+='|';}}
logger('google_font_builder: '+ font_builder);var h=document.head||document.getElementsByTagName('head')[0];var l=document.createElement('link');l.type='text/css';l.rel='stylesheet';l.href=font_builder;h.appendChild(l);}}
function addCustomFontToStack(f){if(f.indexOf('||||')>=0){var font_parts=f.split('||||');var font_name=font_parts[1];var font_guid=font_parts[2];var font_url=PROTOCOL_USER_OVERRIDE+'s3.lightboxcdn.com/custom_fonts/'+ font_guid+'.css'+'?cb='+ DIGIOH_CACHE_VERSION;if($.inArray(font_name,basic_fonts)==-1&&$.inArray(font_name,custom_fonts)==-1){logger('custom_font_builder: '+ font_name);custom_fonts.push(font_name);var h=document.head||document.getElementsByTagName('head')[0];var l=document.createElement('link');l.type='text/css';l.rel='stylesheet';l.href=font_url;h.appendChild(l);}}}
function buildText(){if(settings.text1.display)text1.text(settings.text1.text);if(settings.text2.display)text2.text(settings.text2.text);if(settings.text3.display)text3.text(settings.text3.text);if(settings.text4.display)text4.text(settings.text4.text);if(settings.thxtext1.display)thxtext1.text(settings.thxtext1.text);if(settings.thxtext2.display)thxtext2.text(settings.thxtext2.text);if(settings.thxtext3.display)thxtext3.text(settings.thxtext3.text);if(settings.thxtext4.display)thxtext4.text(settings.thxtext4.text);if(settings.hasOwnProperty('ep1layout')){if(settings.ep1text1.display)ep1text1.text(settings.ep1text1.text);if(settings.ep1text2.display)ep1text2.text(settings.ep1text2.text);if(settings.ep1text3.display)ep1text3.text(settings.ep1text3.text);if(settings.ep1text4.display)ep1text4.text(settings.ep1text4.text);if(settings.ep2text1.display)ep2text1.text(settings.ep2text1.text);if(settings.ep2text2.display)ep2text2.text(settings.ep2text2.text);if(settings.ep2text3.display)ep2text3.text(settings.ep2text3.text);if(settings.ep2text4.display)ep2text4.text(settings.ep2text4.text);if(settings.ep3text1.display)ep3text1.text(settings.ep3text1.text);if(settings.ep3text2.display)ep3text2.text(settings.ep3text2.text);if(settings.ep3text3.display)ep3text3.text(settings.ep3text3.text);if(settings.ep3text4.display)ep3text4.text(settings.ep3text4.text);if(settings.ep4text1.display)ep4text1.text(settings.ep4text1.text);if(settings.ep4text2.display)ep4text2.text(settings.ep4text2.text);if(settings.ep4text3.display)ep4text3.text(settings.ep4text3.text);if(settings.ep4text4.display)ep4text4.text(settings.ep4text4.text);}}
function appendScript(scriptHtml){var j=document.createElement('script');j.type='text/javascript';j.async=true;j.text=scriptHtml;document.body.appendChild(j);}
function buildHTMLItemAndEvalJSFromHtml(htmlEle,htmlId){if(!settings.hasOwnProperty(htmlId)||!settings[htmlId]||!settings[htmlId].hasOwnProperty('display')||!settings[htmlId].hasOwnProperty('html')||!settings[htmlId].display||!settings[htmlId].html){return;}
else if(settings[htmlId].html.indexOf("script")===-1){htmlEle.html(settings[htmlId].html);}
else{var htmlElement=document.getElementById(htmlId);htmlElement.innerHTML=settings[htmlId].html;var scripts=htmlElement.getElementsByTagName("script");for(var i=0;i<scripts.length;++i){var script=scripts[i];if(script.innerHTML&&script.innerHTML.length>0){eval(script.innerHTML);logger('buildHTMLItemAndEvalJSFromHtml: inline eval script #'+ i+' ==> ('+ script.innerHTML.length+')');}else if(script.hasAttribute("src")){var elSrc=script.getAttribute("src");if(typeof elSrc==='string'&&elSrc.indexOf('//')>=0){var elRef=document.createElement('script');elRef.setAttribute("type","text/javascript");elRef.setAttribute("src",elSrc);elRef.async=true;document.getElementsByTagName("head")[0].appendChild(elRef);logger('buildHTMLItemAndEvalJSFromHtml: external load script #'+ i+' ==> ('+ elSrc+')');}}}}}
function buildHTML(){buildHTMLItemAndEvalJSFromHtml(html1,'html1');buildHTMLItemAndEvalJSFromHtml(html2,'html2');buildHTMLItemAndEvalJSFromHtml(html3,'html3');buildHTMLItemAndEvalJSFromHtml(html4,'html4');buildHTMLItemAndEvalJSFromHtml(thxhtml1,'thxhtml1');buildHTMLItemAndEvalJSFromHtml(thxhtml2,'thxhtml2');buildHTMLItemAndEvalJSFromHtml(thxhtml3,'thxhtml3');buildHTMLItemAndEvalJSFromHtml(thxhtml4,'thxhtml4');if(settings.hasOwnProperty('ep1layout')){buildHTMLItemAndEvalJSFromHtml(ep1html1,'ep1html1');buildHTMLItemAndEvalJSFromHtml(ep1html2,'ep1html2');buildHTMLItemAndEvalJSFromHtml(ep1html3,'ep1html3');buildHTMLItemAndEvalJSFromHtml(ep1html4,'ep1html4');buildHTMLItemAndEvalJSFromHtml(ep2html1,'ep2html1');buildHTMLItemAndEvalJSFromHtml(ep2html2,'ep2html2');buildHTMLItemAndEvalJSFromHtml(ep2html3,'ep2html3');buildHTMLItemAndEvalJSFromHtml(ep2html4,'ep2html4');buildHTMLItemAndEvalJSFromHtml(ep3html1,'ep3html1');buildHTMLItemAndEvalJSFromHtml(ep3html2,'ep3html2');buildHTMLItemAndEvalJSFromHtml(ep3html3,'ep3html3');buildHTMLItemAndEvalJSFromHtml(ep3html4,'ep3html4');buildHTMLItemAndEvalJSFromHtml(ep4html1,'ep4html1');buildHTMLItemAndEvalJSFromHtml(ep4html2,'ep4html2');buildHTMLItemAndEvalJSFromHtml(ep4html3,'ep4html3');buildHTMLItemAndEvalJSFromHtml(ep4html4,'ep4html4');}}
function buildForm(){using_form=settings.form.display;if(settings.hasOwnProperty('ep1layout')){using_form_thx=settings.thx_form.display;using_form_ep1=settings.ep1_form.display;using_form_ep2=settings.ep2_form.display;using_form_ep3=settings.ep3_form.display;using_form_ep4=settings.ep4_form.display;}
form.empty();buildFormName('',form);buildFormEmail('',form);buildFormPhone('',form);buildFormCustomN('','custom1',form);buildFormCustomN('','custom2',form);buildFormCustomN('','custom3',form);buildFormCustomN('','custom4',form);buildFormCustomN('','custom5',form);buildFormCustomN('','custom6',form);buildFormCustomN('','custom7',form);buildFormCustomN('','custom8',form);buildFormCustomN('','custom9',form);buildFormCustomN('','custom10',form);buildFormOptIn('',form);if(settings.hasOwnProperty('ep1layout')){thx_form.empty();buildFormName('thx',thx_form);buildFormEmail('thx',thx_form);buildFormPhone('thx',thx_form);buildFormCustomN('thx','thx_custom1',thx_form);buildFormCustomN('thx','thx_custom2',thx_form);buildFormCustomN('thx','thx_custom3',thx_form);buildFormCustomN('thx','thx_custom4',thx_form);buildFormCustomN('thx','thx_custom5',thx_form);buildFormCustomN('thx','thx_custom6',thx_form);buildFormCustomN('thx','thx_custom7',thx_form);buildFormCustomN('thx','thx_custom8',thx_form);buildFormCustomN('thx','thx_custom9',thx_form);buildFormCustomN('thx','thx_custom10',thx_form);buildFormOptIn('thx',thx_form);ep1_form.empty();buildFormName('ep1',ep1_form);buildFormEmail('ep1',ep1_form);buildFormPhone('ep1',ep1_form);buildFormCustomN('ep1','ep1_custom1',ep1_form);buildFormCustomN('ep1','ep1_custom2',ep1_form);buildFormCustomN('ep1','ep1_custom3',ep1_form);buildFormCustomN('ep1','ep1_custom4',ep1_form);buildFormCustomN('ep1','ep1_custom5',ep1_form);buildFormCustomN('ep1','ep1_custom6',ep1_form);buildFormCustomN('ep1','ep1_custom7',ep1_form);buildFormCustomN('ep1','ep1_custom8',ep1_form);buildFormCustomN('ep1','ep1_custom9',ep1_form);buildFormCustomN('ep1','ep1_custom10',ep1_form);buildFormOptIn('ep1',ep1_form);ep2_form.empty();buildFormName('ep2',ep2_form);buildFormEmail('ep2',ep2_form);buildFormPhone('ep2',ep2_form);buildFormCustomN('ep2','ep2_custom1',ep2_form);buildFormCustomN('ep2','ep2_custom2',ep2_form);buildFormCustomN('ep2','ep2_custom3',ep2_form);buildFormCustomN('ep2','ep2_custom4',ep2_form);buildFormCustomN('ep2','ep2_custom5',ep2_form);buildFormCustomN('ep2','ep2_custom6',ep2_form);buildFormCustomN('ep2','ep2_custom7',ep2_form);buildFormCustomN('ep2','ep2_custom8',ep2_form);buildFormCustomN('ep2','ep2_custom9',ep2_form);buildFormCustomN('ep2','ep2_custom10',ep2_form);buildFormOptIn('ep2',ep2_form);ep3_form.empty();buildFormName('ep3',ep3_form);buildFormEmail('ep3',ep3_form);buildFormPhone('ep3',ep3_form);buildFormCustomN('ep3','ep3_custom1',ep3_form);buildFormCustomN('ep3','ep3_custom2',ep3_form);buildFormCustomN('ep3','ep3_custom3',ep3_form);buildFormCustomN('ep3','ep3_custom4',ep3_form);buildFormCustomN('ep3','ep3_custom5',ep3_form);buildFormCustomN('ep3','ep3_custom6',ep3_form);buildFormCustomN('ep3','ep3_custom7',ep3_form);buildFormCustomN('ep3','ep3_custom8',ep3_form);buildFormCustomN('ep3','ep3_custom9',ep3_form);buildFormCustomN('ep3','ep3_custom10',ep3_form);buildFormOptIn('ep3',ep3_form);ep4_form.empty();buildFormName('ep4',ep4_form);buildFormEmail('ep4',ep4_form);buildFormPhone('ep4',ep4_form);buildFormCustomN('ep4','ep4_custom1',ep4_form);buildFormCustomN('ep4','ep4_custom2',ep4_form);buildFormCustomN('ep4','ep4_custom3',ep4_form);buildFormCustomN('ep4','ep4_custom4',ep4_form);buildFormCustomN('ep4','ep4_custom5',ep4_form);buildFormCustomN('ep4','ep4_custom6',ep4_form);buildFormCustomN('ep4','ep4_custom7',ep4_form);buildFormCustomN('ep4','ep4_custom8',ep4_form);buildFormCustomN('ep4','ep4_custom9',ep4_form);buildFormCustomN('ep4','ep4_custom10',ep4_form);buildFormOptIn('ep4',ep4_form);}
if(!using_form){form_wrapper.hide();form.hide();}
if(settings.hasOwnProperty('ep1layout')){if(!using_form_thx){thx_form_wrapper.hide();thx_form.hide();}
if(!using_form_ep1){ep1_form_wrapper.hide();ep1_form.hide();}
if(!using_form_ep2){ep2_form_wrapper.hide();ep2_form.hide();}
if(!using_form_ep3){ep3_form_wrapper.hide();ep3_form.hide();}
if(!using_form_ep4){ep4_form_wrapper.hide();ep4_form.hide();}}
initFormInputs();}
function buildButtons(){buildButtonN(button1,button1_wrapper,'button1',settings.button1,'');buildButtonN(button2,button2_wrapper,'button2',settings.button2,'');buildButtonN(button3,button3_wrapper,'button3',settings.button3,'');buildButtonN(button4,button4_wrapper,'button4',settings.button4,'');buildButtonN(thxbutton1,thxbutton1_wrapper,'thxbutton1',settings.thxbutton1,'thx_');buildButtonN(thxbutton2,thxbutton2_wrapper,'thxbutton2',settings.thxbutton2,'thx_');buildButtonN(thxbutton3,thxbutton3_wrapper,'thxbutton3',settings.thxbutton3,'thx_');buildButtonN(thxbutton4,thxbutton4_wrapper,'thxbutton4',settings.thxbutton4,'thx_');if(settings.hasOwnProperty('ep1layout')){buildButtonN(ep1button1,ep1button1_wrapper,'ep1button1',settings.ep1button1,'ep1_');buildButtonN(ep1button2,ep1button2_wrapper,'ep1button2',settings.ep1button2,'ep1_');buildButtonN(ep1button3,ep1button3_wrapper,'ep1button3',settings.ep1button3,'ep1_');buildButtonN(ep1button4,ep1button4_wrapper,'ep1button4',settings.ep1button4,'ep1_');buildButtonN(ep2button1,ep2button1_wrapper,'ep2button1',settings.ep2button1,'ep2_');buildButtonN(ep2button2,ep2button2_wrapper,'ep2button2',settings.ep2button2,'ep2_');buildButtonN(ep2button3,ep2button3_wrapper,'ep2button3',settings.ep2button3,'ep2_');buildButtonN(ep2button4,ep2button4_wrapper,'ep2button4',settings.ep2button4,'ep2_');buildButtonN(ep3button1,ep3button1_wrapper,'ep3button1',settings.ep3button1,'ep3_');buildButtonN(ep3button2,ep3button2_wrapper,'ep3button2',settings.ep3button2,'ep3_');buildButtonN(ep3button3,ep3button3_wrapper,'ep3button3',settings.ep3button3,'ep3_');buildButtonN(ep3button4,ep3button4_wrapper,'ep3button4',settings.ep3button4,'ep3_');buildButtonN(ep4button1,ep4button1_wrapper,'ep4button1',settings.ep4button1,'ep4_');buildButtonN(ep4button2,ep4button2_wrapper,'ep4button2',settings.ep4button2,'ep4_');buildButtonN(ep4button3,ep4button3_wrapper,'ep4button3',settings.ep4button3,'ep4_');buildButtonN(ep4button4,ep4button4_wrapper,'ep4button4',settings.ep4button4,'ep4_');}}
function initFormInputs(){form_input_full_name=$('#form_input_full_name');form_input_first_name=$('#form_input_first_name');form_input_last_name=$('#form_input_last_name');form_input_email=$('#form_input_email');form_input_phone=$('#form_input_phone');form_input_opt_in=$('#form_input_opt_in');form_input_custom1=$('#form_input_custom1');form_input_custom2=$('#form_input_custom2');form_input_custom3=$('#form_input_custom3');form_input_custom4=$('#form_input_custom4');form_input_custom5=$('#form_input_custom5');form_input_custom6=$('#form_input_custom6');form_input_custom7=$('#form_input_custom7');form_input_custom8=$('#form_input_custom8');form_input_custom9=$('#form_input_custom9');form_input_custom10=$('#form_input_custom10');if(settings.hasOwnProperty('ep1layout')){thx_form_input_full_name=$('#thx_form_input_full_name');thx_form_input_first_name=$('#thx_form_input_first_name');thx_form_input_last_name=$('#thx_form_input_last_name');thx_form_input_email=$('#thx_form_input_email');thx_form_input_phone=$('#thx_form_input_phone');thx_form_input_opt_in=$('#thx_form_input_opt_in');thx_form_input_custom1=$('#thx_form_input_custom1');thx_form_input_custom2=$('#thx_form_input_custom2');thx_form_input_custom3=$('#thx_form_input_custom3');thx_form_input_custom4=$('#thx_form_input_custom4');thx_form_input_custom5=$('#thx_form_input_custom5');thx_form_input_custom6=$('#thx_form_input_custom6');thx_form_input_custom7=$('#thx_form_input_custom7');thx_form_input_custom8=$('#thx_form_input_custom8');thx_form_input_custom9=$('#thx_form_input_custom9');thx_form_input_custom10=$('#thx_form_input_custom10');ep1_form_input_full_name=$('#ep1_form_input_full_name');ep1_form_input_first_name=$('#ep1_form_input_first_name');ep1_form_input_last_name=$('#ep1_form_input_last_name');ep1_form_input_email=$('#ep1_form_input_email');ep1_form_input_phone=$('#ep1_form_input_phone');ep1_form_input_opt_in=$('#ep1_form_input_opt_in');ep1_form_input_custom1=$('#ep1_form_input_custom1');ep1_form_input_custom2=$('#ep1_form_input_custom2');ep1_form_input_custom3=$('#ep1_form_input_custom3');ep1_form_input_custom4=$('#ep1_form_input_custom4');ep1_form_input_custom5=$('#ep1_form_input_custom5');ep1_form_input_custom6=$('#ep1_form_input_custom6');ep1_form_input_custom7=$('#ep1_form_input_custom7');ep1_form_input_custom8=$('#ep1_form_input_custom8');ep1_form_input_custom9=$('#ep1_form_input_custom9');ep1_form_input_custom10=$('#ep1_form_input_custom10');ep2_form_input_full_name=$('#ep2_form_input_full_name');ep2_form_input_first_name=$('#ep2_form_input_first_name');ep2_form_input_last_name=$('#ep2_form_input_last_name');ep2_form_input_email=$('#ep2_form_input_email');ep2_form_input_phone=$('#ep2_form_input_phone');ep2_form_input_opt_in=$('#ep2_form_input_opt_in');ep2_form_input_custom1=$('#ep2_form_input_custom1');ep2_form_input_custom2=$('#ep2_form_input_custom2');ep2_form_input_custom3=$('#ep2_form_input_custom3');ep2_form_input_custom4=$('#ep2_form_input_custom4');ep2_form_input_custom5=$('#ep2_form_input_custom5');ep2_form_input_custom6=$('#ep2_form_input_custom6');ep2_form_input_custom7=$('#ep2_form_input_custom7');ep2_form_input_custom8=$('#ep2_form_input_custom8');ep2_form_input_custom9=$('#ep2_form_input_custom9');ep2_form_input_custom10=$('#ep2_form_input_custom10');ep3_form_input_full_name=$('#ep3_form_input_full_name');ep3_form_input_first_name=$('#ep3_form_input_first_name');ep3_form_input_last_name=$('#ep3_form_input_last_name');ep3_form_input_email=$('#ep3_form_input_email');ep3_form_input_phone=$('#ep3_form_input_phone');ep3_form_input_opt_in=$('#ep3_form_input_opt_in');ep3_form_input_custom1=$('#ep3_form_input_custom1');ep3_form_input_custom2=$('#ep3_form_input_custom2');ep3_form_input_custom3=$('#ep3_form_input_custom3');ep3_form_input_custom4=$('#ep3_form_input_custom4');ep3_form_input_custom5=$('#ep3_form_input_custom5');ep3_form_input_custom6=$('#ep3_form_input_custom6');ep3_form_input_custom7=$('#ep3_form_input_custom7');ep3_form_input_custom8=$('#ep3_form_input_custom8');ep3_form_input_custom9=$('#ep3_form_input_custom9');ep3_form_input_custom10=$('#ep3_form_input_custom10');ep4_form_input_full_name=$('#ep4_form_input_full_name');ep4_form_input_first_name=$('#ep4_form_input_first_name');ep4_form_input_last_name=$('#ep4_form_input_last_name');ep4_form_input_email=$('#ep4_form_input_email');ep4_form_input_phone=$('#ep4_form_input_phone');ep4_form_input_opt_in=$('#ep4_form_input_opt_in');ep4_form_input_custom1=$('#ep4_form_input_custom1');ep4_form_input_custom2=$('#ep4_form_input_custom2');ep4_form_input_custom3=$('#ep4_form_input_custom3');ep4_form_input_custom4=$('#ep4_form_input_custom4');ep4_form_input_custom5=$('#ep4_form_input_custom5');ep4_form_input_custom6=$('#ep4_form_input_custom6');ep4_form_input_custom7=$('#ep4_form_input_custom7');ep4_form_input_custom8=$('#ep4_form_input_custom8');ep4_form_input_custom9=$('#ep4_form_input_custom9');ep4_form_input_custom10=$('#ep4_form_input_custom10');}}
function isNullOrWhiteSpace(str){return str===null||str.match(/^ *$/)!==null;}
function getFirstLastNames(fullName){if(isNullOrWhiteSpace(fullName))return['',''];fullName=fullName.trim();var parts=fullName.split(' ');if(parts.length==0)return['',''];if(parts.length==1)return[parts[0],''];if(parts.length==2)return[parts[0],parts[1]];var first=parts[0];var last='';for(var x=1;x<parts.length;x++){if(!isNullOrWhiteSpace(parts[x])){last+=parts[x].trim()+' ';}}
if(last.length>0)last=last.trim();return[first,last];}
function getFullName(first,last){if(isNullOrWhiteSpace(first))first='';else first=first.trim();if(isNullOrWhiteSpace(last))last='';else last=last.trim();if(first.length>0&&last.length>0)return(first+' '+ last);if(first.length>0)return first;if(last.length>0)return last;}
function isValidEmail(email){if(typeof email==='undefined')return null;if(typeof email!=='string'||email.indexOf('@')<=0)return false;var emailParts=email.split('@'),emailName=emailParts[0],emailDomain=emailParts[1],emailDomainParts=emailDomain.split('.'),validChars='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.0123456789_-+';if(emailParts.length!==2){return false;}
if(emailName.length<1||emailDomain.length<3){return false;}
if(emailDomain.indexOf('.')<=0){return false;}
for(var i=emailName.length- 1;i>=0;i--){if(validChars.indexOf(emailName[i])<0){return false;}};for(var i=emailDomain.length- 1;i>=0;i--){if(validChars.indexOf(emailDomain[i])<0){return false;}};if(emailDomainParts[emailDomainParts.length- 1].length<2){return false;}
return true;}
function validateForm(data,page_pref,get_data_only,override_data){var pref='';if(typeof page_pref==='undefined'||page_pref===null){pref='';}else if(page_pref!==''&&page_pref!=='main'&&!settings.hasOwnProperty('ep1layout')){pref='';}else{pref=page_pref;}
if(typeof data!=='object'||data===null){data={};}
if(typeof get_data_only!=='boolean'){get_data_only=false;}
if(typeof override_data!=='boolean'){override_data=false;}
logger('validateForm('+ pref+', '+ get_data_only+')');if(pref==='thx_'){pref_form_input_full_name=thx_form_input_full_name;pref_form_input_first_name=thx_form_input_first_name;pref_form_input_last_name=thx_form_input_last_name;pref_form_input_email=thx_form_input_email;pref_form_input_phone=thx_form_input_phone;pref_form_input_custom1=thx_form_input_custom1;pref_form_input_custom2=thx_form_input_custom2;pref_form_input_custom3=thx_form_input_custom3;pref_form_input_custom4=thx_form_input_custom4;pref_form_input_custom5=thx_form_input_custom5;pref_form_input_custom6=thx_form_input_custom6;pref_form_input_custom7=thx_form_input_custom7;pref_form_input_custom8=thx_form_input_custom8;pref_form_input_custom9=thx_form_input_custom9;pref_form_input_custom10=thx_form_input_custom10;pref_form_input_opt_in=thx_form_input_opt_in;}else if(pref==='ep1_'){pref_form_input_full_name=ep1_form_input_full_name;pref_form_input_first_name=ep1_form_input_first_name;pref_form_input_last_name=ep1_form_input_last_name;pref_form_input_email=ep1_form_input_email;pref_form_input_phone=ep1_form_input_phone;pref_form_input_custom1=ep1_form_input_custom1;pref_form_input_custom2=ep1_form_input_custom2;pref_form_input_custom3=ep1_form_input_custom3;pref_form_input_custom4=ep1_form_input_custom4;pref_form_input_custom5=ep1_form_input_custom5;pref_form_input_custom6=ep1_form_input_custom6;pref_form_input_custom7=ep1_form_input_custom7;pref_form_input_custom8=ep1_form_input_custom8;pref_form_input_custom9=ep1_form_input_custom9;pref_form_input_custom10=ep1_form_input_custom10;pref_form_input_opt_in=ep1_form_input_opt_in;}else if(pref==='ep2_'){pref_form_input_full_name=ep2_form_input_full_name;pref_form_input_first_name=ep2_form_input_first_name;pref_form_input_last_name=ep2_form_input_last_name;pref_form_input_email=ep2_form_input_email;pref_form_input_phone=ep2_form_input_phone;pref_form_input_custom1=ep2_form_input_custom1;pref_form_input_custom2=ep2_form_input_custom2;pref_form_input_custom3=ep2_form_input_custom3;pref_form_input_custom4=ep2_form_input_custom4;pref_form_input_custom5=ep2_form_input_custom5;pref_form_input_custom6=ep2_form_input_custom6;pref_form_input_custom7=ep2_form_input_custom7;pref_form_input_custom8=ep2_form_input_custom8;pref_form_input_custom9=ep2_form_input_custom9;pref_form_input_custom10=ep2_form_input_custom10;pref_form_input_opt_in=ep2_form_input_opt_in;}else if(pref==='ep3_'){pref_form_input_full_name=ep3_form_input_full_name;pref_form_input_first_name=ep3_form_input_first_name;pref_form_input_last_name=ep3_form_input_last_name;pref_form_input_email=ep3_form_input_email;pref_form_input_phone=ep3_form_input_phone;pref_form_input_custom1=ep3_form_input_custom1;pref_form_input_custom2=ep3_form_input_custom2;pref_form_input_custom3=ep3_form_input_custom3;pref_form_input_custom4=ep3_form_input_custom4;pref_form_input_custom5=ep3_form_input_custom5;pref_form_input_custom6=ep3_form_input_custom6;pref_form_input_custom7=ep3_form_input_custom7;pref_form_input_custom8=ep3_form_input_custom8;pref_form_input_custom9=ep3_form_input_custom9;pref_form_input_custom10=ep3_form_input_custom10;pref_form_input_opt_in=ep3_form_input_opt_in;}else if(pref==='ep4_'){pref_form_input_full_name=ep4_form_input_full_name;pref_form_input_first_name=ep4_form_input_first_name;pref_form_input_last_name=ep4_form_input_last_name;pref_form_input_email=ep4_form_input_email;pref_form_input_phone=ep4_form_input_phone;pref_form_input_custom1=ep4_form_input_custom1;pref_form_input_custom2=ep4_form_input_custom2;pref_form_input_custom3=ep4_form_input_custom3;pref_form_input_custom4=ep4_form_input_custom4;pref_form_input_custom5=ep4_form_input_custom5;pref_form_input_custom6=ep4_form_input_custom6;pref_form_input_custom7=ep4_form_input_custom7;pref_form_input_custom8=ep4_form_input_custom8;pref_form_input_custom9=ep4_form_input_custom9;pref_form_input_custom10=ep4_form_input_custom10;pref_form_input_opt_in=ep4_form_input_opt_in;}else{pref_form_input_full_name=form_input_full_name;pref_form_input_first_name=form_input_first_name;pref_form_input_last_name=form_input_last_name;pref_form_input_email=form_input_email;pref_form_input_phone=form_input_phone;pref_form_input_custom1=form_input_custom1;pref_form_input_custom2=form_input_custom2;pref_form_input_custom3=form_input_custom3;pref_form_input_custom4=form_input_custom4;pref_form_input_custom5=form_input_custom5;pref_form_input_custom6=form_input_custom6;pref_form_input_custom7=form_input_custom7;pref_form_input_custom8=form_input_custom8;pref_form_input_custom9=form_input_custom9;pref_form_input_custom10=form_input_custom10;pref_form_input_opt_in=form_input_opt_in;}
if(settings[pref+'name'].display){if(settings[pref+'name'].mode=='full'){if(!data.hasOwnProperty('name')||override_data)data.name=pref_form_input_full_name.val().trim();if(!get_data_only){if(settings[pref+'name'].require&&data.name.length==0){showError(settings[pref+'name'].label+' is required.');return false;}
if(data.name.length>100){showError(settings[pref+'name'].label+' must be less than 100 characters.');return false;}}
var fl=getFirstLastNames(data.name);if(!data.hasOwnProperty('first_name')||override_data)data.first_name=fl[0];if(!data.hasOwnProperty('last_name')||override_data)data.last_name=fl[1];}else if(settings[pref+'name'].mode=='first'){if(!data.hasOwnProperty('first_name')||override_data)data.first_name=pref_form_input_first_name.val().trim();if(!get_data_only){if(settings[pref+'name'].require&&data.first_name.length==0){showError(settings[pref+'name'].label+' is required.');return false;}
if(data.first_name.length>100){showError(settings[pref+'name'].label+' must be less than 100 characters.');return false;}}
if(!data.hasOwnProperty('name')||override_data)data.name=data.first_name;if(!data.hasOwnProperty('last_name')||override_data)data.last_name='';}else if(settings[pref+'name'].mode=='both'){if(!data.hasOwnProperty('first_name')||override_data)data.first_name=pref_form_input_first_name.val().trim();if(!data.hasOwnProperty('last_name')||override_data)data.last_name=pref_form_input_last_name.val().trim();if(!get_data_only){if(settings[pref+'name'].require&&(data.first_name.length==0||data.last_name.length==0)){showError('First Name and Last Name are both required.');return false;}
if(data.first_name.length>100){showError('First Name must be less than 100 characters.');return false;}
if(data.last_name.length>100){showError('Last Name must be less than 100 characters.');return false;}}
if(!data.hasOwnProperty('name')||override_data)data.name=getFullName(data.first_name,data.last_name);}}
if(settings[pref+'email'].display){if(!data.hasOwnProperty('email')||override_data)data.email=pref_form_input_email.val().trim();if(!get_data_only){if(settings[pref+'email'].require&&data.email.length==0){showError(settings[pref+'email'].label+' is required.');return false;}
if(data.email.length>200){showError(settings[pref+'email'].label+' must be less than 100 characters.');return false;}
var valid_email_regex=/\S+@\S+\.\S+/;if(!valid_email_regex.test(data.email)){showError(settings[pref+'email'].label+' is in an invalid format.');return false;}}}
if(settings[pref+'phone'].display){if(!data.hasOwnProperty('phone')||override_data)data.phone=pref_form_input_phone.val().trim();if(!get_data_only){if(settings[pref+'phone'].require&&data.phone.length==0){showError(settings[pref+'phone'].label+' is required.');return false;}
if(data.phone.length>20){showError(settings[pref+'phone'].label+' must be less than 20 characters.');return false;}}}
if(settings.hasOwnProperty(pref+'custom1')&&settings[pref+'custom1'].display){if(!data.hasOwnProperty('custom_1')||override_data)data['custom_1']=pref_form_input_custom1.val().trim();if(!get_data_only){if(settings[pref+'custom1'].hasOwnProperty('field_type')&&settings[pref+'custom1'].field_type!=='hidden'&&settings[pref+'custom1'].require&&data['custom_1'].length==0){showError(settings[pref+'custom1'].label+' is required.');return false;}
if(data['custom_1'].length>5000){showError(settings[pref+'custom1'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom1')&&!data.hasOwnProperty('custom_1')&&pref_form_input_custom1.length){data['custom_1']=pref_form_input_custom1.val().trim();}
if(settings.hasOwnProperty(pref+'custom2')&&settings[pref+'custom2'].display){if(!data.hasOwnProperty('custom_2')||override_data)data['custom_2']=pref_form_input_custom2.val().trim();if(!get_data_only){if(settings[pref+'custom2'].hasOwnProperty('field_type')&&settings[pref+'custom2'].field_type!=='hidden'&&settings[pref+'custom2'].require&&data['custom_2'].length==0){showError(settings[pref+'custom2'].label+' is required.');return false;}
if(data['custom_2'].length>5000){showError(settings[pref+'custom2'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom2')&&!data.hasOwnProperty('custom_2')&&pref_form_input_custom2.length){data['custom_2']=pref_form_input_custom2.val().trim();}
if(settings.hasOwnProperty(pref+'custom3')&&settings[pref+'custom3'].display){if(!data.hasOwnProperty('custom_3')||override_data)data['custom_3']=pref_form_input_custom3.val().trim();if(!get_data_only){if(settings[pref+'custom3'].hasOwnProperty('field_type')&&settings[pref+'custom3'].field_type!=='hidden'&&settings[pref+'custom3'].require&&data['custom_3'].length==0){showError(settings[pref+'custom3'].label+' is required.');return false;}
if(data['custom_3'].length>5000){showError(settings[pref+'custom3'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom3')&&!data.hasOwnProperty('custom_3')&&pref_form_input_custom3.length){data['custom_3']=pref_form_input_custom3.val().trim();}
if(settings.hasOwnProperty(pref+'custom4')&&settings[pref+'custom4'].display){if(!data.hasOwnProperty('custom_4')||override_data)data['custom_4']=pref_form_input_custom4.val().trim();if(!get_data_only){if(settings[pref+'custom4'].hasOwnProperty('field_type')&&settings[pref+'custom4'].field_type!=='hidden'&&settings[pref+'custom4'].require&&data['custom_4'].length==0){showError(settings[pref+'custom4'].label+' is required.');return false;}
if(data['custom_4'].length>5000){showError(settings[pref+'custom4'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom4')&&!data.hasOwnProperty('custom_4')&&pref_form_input_custom4.length){data['custom_4']=pref_form_input_custom4.val().trim();}
if(settings.hasOwnProperty(pref+'custom5')&&settings[pref+'custom5'].display){if(!data.hasOwnProperty('custom_5')||override_data)data['custom_5']=pref_form_input_custom5.val().trim();if(!get_data_only){if(settings[pref+'custom5'].hasOwnProperty('field_type')&&settings[pref+'custom5'].field_type!=='hidden'&&settings[pref+'custom5'].require&&data['custom_5'].length==0){showError(settings[pref+'custom5'].label+' is required.');return false;}
if(data['custom_5'].length>5000){showError(settings[pref+'custom5'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom5')&&!data.hasOwnProperty('custom_5')&&pref_form_input_custom5.length){data['custom_5']=pref_form_input_custom5.val().trim();}
if(settings.hasOwnProperty(pref+'custom6')&&settings[pref+'custom6'].display){if(!data.hasOwnProperty('custom_6')||override_data)data['custom_6']=pref_form_input_custom6.val().trim();if(!get_data_only){if(settings[pref+'custom6'].hasOwnProperty('field_type')&&settings[pref+'custom6'].field_type!=='hidden'&&settings[pref+'custom6'].require&&data['custom_6'].length==0){showError(settings[pref+'custom6'].label+' is required.');return false;}
if(data['custom_6'].length>5000){showError(settings[pref+'custom6'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom6')&&!data.hasOwnProperty('custom_6')&&pref_form_input_custom6.length){data['custom_6']=pref_form_input_custom6.val().trim();}
if(settings.hasOwnProperty(pref+'custom7')&&settings[pref+'custom7'].display){if(!data.hasOwnProperty('custom_7')||override_data)data['custom_7']=pref_form_input_custom7.val().trim();if(!get_data_only){if(settings[pref+'custom7'].hasOwnProperty('field_type')&&settings[pref+'custom7'].field_type!=='hidden'&&settings[pref+'custom7'].require&&data['custom_7'].length==0){showError(settings[pref+'custom7'].label+' is required.');return false;}
if(data['custom_7'].length>5000){showError(settings[pref+'custom7'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom7')&&!data.hasOwnProperty('custom_7')&&pref_form_input_custom7.length){data['custom_7']=pref_form_input_custom7.val().trim();}
if(settings.hasOwnProperty(pref+'custom8')&&settings[pref+'custom8'].display){if(!data.hasOwnProperty('custom_8')||override_data)data['custom_8']=pref_form_input_custom8.val().trim();if(!get_data_only){if(settings[pref+'custom8'].hasOwnProperty('field_type')&&settings[pref+'custom8'].field_type!=='hidden'&&settings[pref+'custom8'].require&&data['custom_8'].length==0){showError(settings[pref+'custom8'].label+' is required.');return false;}
if(data['custom_8'].length>5000){showError(settings[pref+'custom8'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom8')&&!data.hasOwnProperty('custom_8')&&pref_form_input_custom8.length){data['custom_8']=pref_form_input_custom8.val().trim();}
if(settings.hasOwnProperty(pref+'custom9')&&settings[pref+'custom9'].display){if(!data.hasOwnProperty('custom_9')||override_data)data['custom_9']=pref_form_input_custom9.val().trim();if(!get_data_only){if(settings[pref+'custom9'].hasOwnProperty('field_type')&&settings[pref+'custom9'].field_type!=='hidden'&&settings[pref+'custom9'].require&&data['custom_9'].length==0){showError(settings[pref+'custom9'].label+' is required.');return false;}
if(data['custom_9'].length>5000){showError(settings[pref+'custom9'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom9')&&!data.hasOwnProperty('custom_9')&&pref_form_input_custom9.length){data['custom_9']=pref_form_input_custom9.val().trim();}
if(settings.hasOwnProperty(pref+'custom10')&&settings[pref+'custom10'].display){if(!data.hasOwnProperty('custom_10')||override_data)data['custom_10']=pref_form_input_custom10.val().trim();if(!get_data_only){if(settings[pref+'custom10'].hasOwnProperty('field_type')&&settings[pref+'custom10'].field_type!=='hidden'&&settings[pref+'custom10'].require&&data['custom_10'].length==0){showError(settings[pref+'custom10'].label+' is required.');return false;}
if(data['custom_10'].length>5000){showError(settings[pref+'custom10'].label+' must be less than 500 characters.');return false;}}}else if(settings.hasOwnProperty(pref+'custom10')&&!data.hasOwnProperty('custom_10')&&pref_form_input_custom10.length){data['custom_10']=pref_form_input_custom10.val().trim();}
if(settings[pref+'opt_in'].display){if(!data.hasOwnProperty('opt_in')||override_data)data.opt_in=(pref_form_input_opt_in[0].checked?'true':'false');if(!get_data_only){if(settings[pref+'opt_in'].require&&data.opt_in=='false'){showError('Checkbox is required.');return false;}}}
return data;}
function showError(msg){var error_width=settings.layout.width;if(CURRENT_WIDTH){error_width=CURRENT_WIDTH;}
error_bubble.width(CURRENT_WIDTH- 90);error_message.html(msg);error_bubble.show();window.setTimeout(function(){error_bubble.hide();},4000);}
function getFriendlyPagePrefix(pref){var page_prefix_friendly='main';if(pref==='thx_'||pref==='thx')page_prefix_friendly='thx';else if(pref==='ep1_'||pref==='ep1')page_prefix_friendly='ep1';else if(pref==='ep2_'||pref==='ep2')page_prefix_friendly='ep2';else if(pref==='ep3_'||pref==='ep3')page_prefix_friendly='ep3';else if(pref==='ep4_'||pref==='ep4')page_prefix_friendly='ep4';return page_prefix_friendly;}
function processSubmit(pref){try{if(typeof pref==='undefined'||pref===null){pref='';}}
catch(err){pref='';}
if((using_form&&pref==='')||(using_form_thx&&pref==='thx_')||(using_form_ep1&&pref==='ep1_')||(using_form_ep2&&pref==='ep2_')||(using_form_ep3&&pref==='ep3_')||(using_form_ep4&&pref==='ep4_')){var data_with_validation='';var data_only=validateForm({},pref,true,true);var customJsResBeforeFormValidation=BOX_CUSTOM_JS.runCustomJsBeforeFormValidation(data_only);if(typeof customJsResBeforeFormValidation==='boolean'&&customJsResBeforeFormValidation===false){return false;}else if(typeof customJsResBeforeFormValidation==='string'&&customJsResBeforeFormValidation.trim().length>0){showError(customJsResBeforeFormValidation);return false;}else if(typeof customJsResBeforeFormValidation==='object'&&customJsResBeforeFormValidation!==null){data_with_validation=customJsResBeforeFormValidation;}else{data_with_validation=validateForm({},pref,false,true);}
if(typeof data_with_validation==='object'&&data_with_validation!==null){var customJsResAfterFormValidation=BOX_CUSTOM_JS.runCustomJsAfterFormValidation(data_with_validation);if(typeof customJsResAfterFormValidation==='boolean'&&customJsResAfterFormValidation===false){return false;}else if(typeof customJsResAfterFormValidation==='string'&&customJsResAfterFormValidation.trim().length>0){showError(customJsResAfterFormValidation);return false;}else if(typeof customJsResAfterFormValidation==='object'&&customJsResAfterFormValidation!==null){data_with_validation=customJsResAfterFormValidation;}
var data=data_with_validation;showLoading(pref);var query='';for(var key in data){if(data.hasOwnProperty(key)){if(key.indexOf('custom_')===0){if(data[key]){var propName='custom'+ key.split('_')[1];var keyName='_c'+ key.split('_')[1];if(settings.hasOwnProperty(propName)&&settings[propName].hasOwnProperty('label')&&settings[propName].label!==''){query+=keyName+'='+ encodeURIComponent(settings[propName].label+'||||'+ data[key])+'&';}else{query+=keyName+'='+ encodeURIComponent('Custom Field '+ key.split('_')[1]+'||||'+ data[key])+'&';}}}else{var keyName=key;if(key=='email')keyName='_e';if(key=='name')keyName='_n';if(key=='first_name')keyName='_fn';if(key=='last_name')keyName='_ln';if(key=='phone')keyName='_p';if(key=='opt_in')keyName='_oi';query+=keyName+'='+ encodeURIComponent(data[key])+'&';}}}
var customJsResBeforeSubmit=BOX_CUSTOM_JS.runCustomJsBeforeSubmit(data);if(typeof customJsResBeforeSubmit==='boolean'&&customJsResBeforeSubmit===false){return false;}else if(typeof customJsResBeforeSubmit==='string'&&customJsResBeforeSubmit.trim().length>0){showError(customJsResBeforeSubmit);return false;}else if(typeof customJsResBeforeSubmit==='object'&&customJsResBeforeSubmit!==null){data=customJsResBeforeSubmit;}
if(pref===''){query+='_pg=main';postMessageSubmit(data,query,using_form,pref);}else if(pref.indexOf('_')>0){query+='pg='+ pref.split('_')[0];if(pref==='thx_')postMessageSubmit(data,query,using_form_thx,pref);if(pref==='ep1_')postMessageSubmit(data,query,using_form_ep1,pref);if(pref==='ep2_')postMessageSubmit(data,query,using_form_ep2,pref);if(pref==='ep3_')postMessageSubmit(data,query,using_form_ep3,pref);if(pref==='ep4_')postMessageSubmit(data,query,using_form_ep4,pref);}else{query+='pg='+ pref;postMessageSubmit(data,query,using_form,pref);}
var customJsAfterSubmit=BOX_CUSTOM_JS.runCustomJsAfterSubmit(data);if(typeof customJsAfterSubmit==='boolean'&&customJsAfterSubmit===false){return false;}
if(settings[pref+'form'].after_submit=='lightbox_open'&&settings[pref+'form'].lightbox_open&&settings[pref+'form'].lightbox_open.length>0){window.setTimeout(function(){hideLoading();var prop={};prop.lightbox_open=settings[pref+'form'].lightbox_open;postMessageOpenAnotherBox(prop,'form');},50);}else{afterSubmit(pref);}}}}
function afterSubmit(pref){if(settings[pref+'form'].after_submit=='thank_you_page'){window.setTimeout(function(){hideLoading();changePages('thx_',pref+'form',settings[pref+'form'],'form');},2000);}else if(settings[pref+'form'].after_submit=='extra_page_1'){window.setTimeout(function(){hideLoading();changePages('ep1_',pref+'form',settings[pref+'form'],'form');},500);}else if(settings[pref+'form'].after_submit=='extra_page_2'){window.setTimeout(function(){hideLoading();changePages('ep2_',pref+'form',settings[pref+'form'],'form');},500);}else if(settings[pref+'form'].after_submit=='extra_page_3'){window.setTimeout(function(){hideLoading();changePages('ep3_',pref+'form',settings[pref+'form'],'form');},500);}else if(settings[pref+'form'].after_submit=='extra_page_4'){window.setTimeout(function(){hideLoading();changePages('ep4_',pref+'form',settings[pref+'form'],'form');},500);}else if(settings[pref+'form'].after_submit=='redirect'&&settings[pref+'form'].redirect_url){window.setTimeout(function(){hideLoading();var prop={};if(settings[pref+'form'].redirect_url.toLowerCase().trim().indexOf('http')===0||settings[pref+'form'].redirect_url.toLowerCase().trim().indexOf('mailto')===0){prop.url=settings[pref+'form'].redirect_url;}else{prop.url='http://'+ settings[pref+'form'].redirect_url;}
postMessageRedirectParent(prop,'form');},2000);}else if(settings[pref+'form'].after_submit=='close'){window.setTimeout(function(){hideLoading();postMessageCloseBox('form_submit');},2000);}else{window.setTimeout(function(){hideLoading();postMessageCloseBox('form_submit');},2000);}}
function changePages(pref,el_name,prop,ui_source){var previous_page=CURRENT_PAGE;var customJsBeforeChangePages=BOX_CUSTOM_JS.runCustomJsBeforeChangePages(getFriendlyPagePrefix(previous_page),getFriendlyPagePrefix(pref),el_name,prop,ui_source);if(typeof customJsBeforeChangePages==='boolean'&&customJsBeforeChangePages===false){return false;}
var modal_width=0;var modal_height=0;if(CURRENT_WIDTH===0){CURRENT_WIDTH=settings.layout.width;}
if(CURRENT_HEIGHT===0){CURRENT_HEIGHT=settings.layout.height;}
if(pref==='thx_'){modal_width=settings.thxlayout.width;modal_height=settings.thxlayout.height;CURRENT_PAGE='thx';}else if(pref==='ep1_'){modal_width=settings.ep1layout.width;modal_height=settings.ep1layout.height;CURRENT_PAGE='ep1';}else if(pref==='ep2_'){modal_width=settings.ep2layout.width;modal_height=settings.ep2layout.height;CURRENT_PAGE='ep2';}else if(pref==='ep3_'){modal_width=settings.ep3layout.width;modal_height=settings.ep3layout.height;CURRENT_PAGE='ep3';}else if(pref==='ep4_'){modal_width=settings.ep4layout.width;modal_height=settings.ep4layout.height;CURRENT_PAGE='ep4';}else{modal_width=settings.layout.width;modal_height=settings.layout.height;CURRENT_PAGE='main';}
postMessageChangePages(pref,modal_width,modal_height,CURRENT_WIDTH,CURRENT_HEIGHT);var pref_resp='responsive';if(CURRENT_PAGE!=='main'){pref_resp=CURRENT_PAGE+ pref_resp;}
if(!settings.hasOwnProperty(pref_resp)||!settings[pref_resp].use){CURRENT_WIDTH=modal_width;CURRENT_HEIGHT=modal_height;}
if(pref==='thx_'){layout.hide();ep1layout.hide();ep2layout.hide();ep3layout.hide();ep4layout.hide();thxlayout.show();}else if(pref==='ep1_'){layout.hide();ep1layout.show();ep2layout.hide();ep3layout.hide();ep4layout.hide();thxlayout.hide();}else if(pref==='ep2_'){layout.hide();ep1layout.hide();ep2layout.show();ep3layout.hide();ep4layout.hide();thxlayout.hide();}else if(pref==='ep3_'){layout.hide();ep1layout.hide();ep2layout.hide();ep3layout.show();ep4layout.hide();thxlayout.hide();}else if(pref==='ep4_'){layout.hide();ep1layout.hide();ep2layout.hide();ep3layout.hide();ep4layout.show();thxlayout.hide();}else{layout.show();ep1layout.hide();ep2layout.hide();ep3layout.hide();ep4layout.hide();thxlayout.hide();}
var customJsAfterChangePages=BOX_CUSTOM_JS.runCustomJsAfterChangePages(getFriendlyPagePrefix(previous_page),getFriendlyPagePrefix(pref),el_name,prop,ui_source);}
function postMessageChangePages(pref,new_width,new_height,old_width,old_height){sendMessageToParent({sender:'digioh',child_action:'change_pages',lightbox_id:LIGHTBOX_OR_VARIATION_GUID,width:new_width,height:new_height,width_prev:old_width,height_prev:old_height,page_prefix:pref});}
function postMessageCloseBox(trig){sendMessageToParent({sender:'digioh',child_action:'close_lightbox',lightbox_id:LIGHTBOX_OR_VARIATION_GUID,trigger:trig});}
function postMessageRedirectParent(prop,ui_source){var customJsBeforeRedirect=BOX_CUSTOM_JS.runCustomJsBeforeRedirect(prop,ui_source);if(typeof customJsBeforeRedirect==='boolean'&&customJsBeforeRedirect===false){return false;}
sendMessageToParent({sender:'digioh',child_action:'redirect_parent',lightbox_id:LIGHTBOX_OR_VARIATION_GUID,url:prop.url,ui_trigger:ui_source});var customJsAfterRedirect=BOX_CUSTOM_JS.runCustomJsAfterRedirect(prop,ui_source);}
function postMessageOpenAnotherBox(prop,ui_source){var customJsBeforeOpenAnotherBox=BOX_CUSTOM_JS.runCustomJsBeforeOpenAnotherBox(prop.lightbox_open,ui_source);if(typeof customJsBeforeOpenAnotherBox==='boolean'&&customJsBeforeOpenAnotherBox===false){return false;}
sendMessageToParent({sender:'digioh',child_action:'lightbox_open',lightbox_id:LIGHTBOX_OR_VARIATION_GUID,lightbox_open:prop.lightbox_open,ui_trigger:ui_source});var customJsAfterOpenAnotherBox=BOX_CUSTOM_JS.runCustomJsAfterOpenAnotherBox(prop.lightbox_open,ui_source);}
function postMessageSubmit(data,post_to_keen_query,pref_using_form,pref){var submit_data=parent.DIGIOH_API.LIGHTBOX.LZString.compressToBase64(JSON.stringify(data));var query_data=parent.DIGIOH_API.LIGHTBOX.LZString.compressToBase64(post_to_keen_query);sendMessageToParent({sender:'digioh',child_action:'register_analytics_submit',lightbox_id:LIGHTBOX_OR_VARIATION_GUID,submission:submit_data,post_to_keen:query_data,form_display:pref_using_form,page_prefix:pref});}
function processDownload(prop){sendMessageToParent({sender:'digioh',child_action:'download_file',lightbox_id:LIGHTBOX_OR_VARIATION_GUID});}
function buildButtonN(el,elWrapper,elName,prop,pref){if(prop.display){el.text(prop.text);el.hover(function(){$(this).addClass(elName+'_hover');},function(){$(this).removeClass(elName+'_hover');});if(prop.action=='download'&&prop.file&&prop.file.length>7){var src=PROTOCOL_USER_OVERRIDE+'s3.lightboxcdn.com/vendors/'+ VENDOR_GUID+'/uploads/'+ prop.file;el.wrap('<a style="border: none;" target="_blank" href="'+ src+'"></a>');el.parent().click(function(e){var customJsResBeforeDownload=BOX_CUSTOM_JS.runCustomJsBeforeDownload(getFriendlyPagePrefix(pref),elName,prop);if(typeof customJsResBeforeDownload==='boolean'&&customJsResBeforeDownload===false){e.preventDefault();return false;}
processDownload(prop);var customJsResAfterDownload=BOX_CUSTOM_JS.runCustomJsAfterDownload(getFriendlyPagePrefix(pref),elName,prop);return true;});el.mousedown(function(){$(this).addClass(elName+'_focus');}).mouseup(function(){$(this).removeClass(elName+'_focus');});}else{el.mousedown(function(){$(this).addClass(elName+'_focus');if(prop.action=='submit'){processSubmit(pref);}else if(prop.action=='close'){postMessageCloseBox('button_click');}else if(prop.action=='url'&&prop.url){if(prop.url.toLowerCase().trim().indexOf('http')===0){postMessageRedirectParent(prop,'button');}else if(prop.url.toLowerCase().trim().indexOf('mailto')===0){postMessageRedirectParent(prop,'button');}else{prop.url='http://'+ prop.url;postMessageRedirectParent(prop,'button');}}else if(prop.action=='lightbox_open'&&prop.lightbox_open&&prop.lightbox_open.length>0){postMessageOpenAnotherBox(prop,'button');}else if(prop.action=='thank_you_page'){changePages('thx_',elName,prop,'button');}else if(prop.action=='extra_page_1'){changePages('ep1_',elName,prop,'button');}else if(prop.action=='extra_page_2'){changePages('ep2_',elName,prop,'button');}else if(prop.action=='extra_page_3'){changePages('ep3_',elName,prop,'button');}else if(prop.action=='extra_page_4'){changePages('ep4_',elName,prop,'button');}}).mouseup(function(){$(this).removeClass(elName+'_focus');});}}else{el.hide();elWrapper.hide();}}
function buildImages(){buildImageN(image1_dims,image1_wrapper,image1,'image1',settings.image1);buildImageN(image2_dims,image2_wrapper,image2,'image2',settings.image2);buildImageN(image3_dims,image3_wrapper,image3,'image3',settings.image3);buildImageN(image4_dims,image4_wrapper,image4,'image4',settings.image4);buildImageN(thximage1_dims,thximage1_wrapper,thximage1,'thximage1',settings.thximage1);buildImageN(thximage2_dims,thximage2_wrapper,thximage2,'thximage2',settings.thximage2);buildImageN(thximage3_dims,thximage3_wrapper,thximage3,'thximage3',settings.thximage3);buildImageN(thximage4_dims,thximage4_wrapper,thximage4,'thximage4',settings.thximage4);if(settings.hasOwnProperty('ep1layout')){buildImageN(ep1image1_dims,ep1image1_wrapper,ep1image1,'ep1image1',settings.ep1image1);buildImageN(ep1image2_dims,ep1image2_wrapper,ep1image2,'ep1image2',settings.ep1image2);buildImageN(ep1image3_dims,ep1image3_wrapper,ep1image3,'ep1image3',settings.ep1image3);buildImageN(ep1image4_dims,ep1image4_wrapper,ep1image4,'ep1image4',settings.ep1image4);buildImageN(ep2image1_dims,ep2image1_wrapper,ep2image1,'ep2image1',settings.ep2image1);buildImageN(ep2image2_dims,ep2image2_wrapper,ep2image2,'ep2image2',settings.ep2image2);buildImageN(ep2image3_dims,ep2image3_wrapper,ep2image3,'ep2image3',settings.ep2image3);buildImageN(ep2image4_dims,ep2image4_wrapper,ep2image4,'ep2image4',settings.ep2image4);buildImageN(ep3image1_dims,ep3image1_wrapper,ep3image1,'ep3image1',settings.ep3image1);buildImageN(ep3image2_dims,ep3image2_wrapper,ep3image2,'ep3image2',settings.ep3image2);buildImageN(ep3image3_dims,ep3image3_wrapper,ep3image3,'ep3image3',settings.ep3image3);buildImageN(ep3image4_dims,ep3image4_wrapper,ep3image4,'ep3image4',settings.ep3image4);buildImageN(ep4image1_dims,ep4image1_wrapper,ep4image1,'ep4image1',settings.ep4image1);buildImageN(ep4image2_dims,ep4image2_wrapper,ep4image2,'ep4image2',settings.ep4image2);buildImageN(ep4image3_dims,ep4image3_wrapper,ep4image3,'ep4image3',settings.ep4image3);buildImageN(ep4image4_dims,ep4image4_wrapper,ep4image4,'ep4image4',settings.ep4image4);}}
function buildImageN(el_dims,el_wrapper,el,prop_name,prop){if(prop.display&&prop.src&&prop.src!='none'&&prop.src.length>5){var src=PROTOCOL_USER_OVERRIDE+'s3.lightboxcdn.com/vendors/'+ VENDOR_GUID+'/uploads/'+ prop.src;el.attr('src',src);var img=new Image();img.onload=function(){el_dims.width=this.width;el_dims.height=this.height;resizeImage(el_dims,el_wrapper,el,prop_name,prop.width,prop.height);el_wrapper.show();};img.src=src;}else{el_wrapper.hide();}}
function resizeImage(el_dims,el_wrapper,el,prop_name,wrapperWidth,wrapperHeight){var prop=settings[prop_name];if(prop.constrain){if(el_dims.width>=el_dims.height){var width=wrapperWidth-(2*prop.border.width)-(2*prop.padding);if(prop.border.style==='none'||prop.border.width==='0'||prop.border.width===0){width=wrapperWidth-(2*prop.padding);}
var height=el_dims.height*(width/el_dims.width);el.width(Math.floor(width));el.height(Math.floor(height));}else{var height=wrapperHeight-(2*prop.border.width)-(2*prop.padding);if(prop.border.style==='none'||prop.border.width==='0'||prop.border.width===0){height=wrapperHeight-(2*prop.padding);}
var width=el_dims.width*(height/el_dims.height);el.height(Math.floor(height));el.width(Math.floor(width));}}else{var width=wrapperWidth-(2*prop.border.width)-(2*prop.padding);var height=wrapperHeight-(2*prop.border.width)-(2*prop.padding);if(prop.border.style==='none'||prop.border.width==='0'||prop.border.width===0){width=wrapperWidth-(2*prop.padding);}
if(prop.border.style==='none'||prop.border.width==='0'||prop.border.width===0){height=wrapperHeight-(2*prop.padding);}
el.width(Math.floor(width));el.height(Math.floor(height));}}
function getBorderStyle(propBorder){var str='';if(propBorder.style==='none'||propBorder.width==='0'||propBorder.width===0){str+='border-style: none;';str+='border-width: 0px;';}else{str+='border-color: '+ propBorder.color+';';str+='border-style: '+ propBorder.style+';';str+='border-width: '+ propBorder.width+'px'+';';str+='border-radius: '+ propBorder.radius+'px'+';';}
return str;}
function getBackgroundStyle(propBackground){var str='';if(propBackground.use_image&&propBackground.image.length>3&&propBackground.image!='none'){str+='background-image: '+'url('+ PROTOCOL_USER_OVERRIDE+'s3.lightboxcdn.com/vendors/'+ VENDOR_GUID+'/uploads/'+ propBackground.image+')'+';';str+='background-position: '+ propBackground.position+';';str+='background-color: '+ propBackground.color+';';if(propBackground.repeat==='stretch'){str+='-webkit-background-size: cover;';str+='-moz-background-size: cover;';str+='-o-background-size: cover;';str+='background-size: cover;';}else{str+='background-repeat: '+ propBackground.repeat+';';}}
else if(!IS_IE_9_OR_LESS&&propBackground.use_gradient&&propBackground.gradient.length>3){str+='background: '+'-webkit-gradient(linear, left top, left bottom, from('+ propBackground.color+'),to('+ propBackground.gradient+'))'+';';str+='background: '+'-webkit-linear-gradient(top, '+ propBackground.color+','+ propBackground.gradient+')'+';';str+='background: '+'-o-linear-gradient(top, '+ propBackground.color+','+ propBackground.gradient+')'+';';str+='background: '+'-moz-linear-gradient(top, '+ propBackground.color+','+ propBackground.gradient+')'+';';str+='background: '+'-ms-linear-gradient(top, '+ propBackground.color+','+ propBackground.gradient+')'+';';str+='background: '+'linear-gradient(to bottom,'+ propBackground.color+','+ propBackground.gradient+')'+';';}
else{str+='background: '+ propBackground.color+';';}
return str;}
function getFontStyle(propFont){var str='';if(propFont.family.indexOf('__google__')>=0){str+='font-family: '+ propFont.family.replace('__google__','')+';';}else if(propFont.family.indexOf('__custom__')>=0){str+='font-family: '+ propFont.family.split('||||')[1]+';';}else{str+='font-family: '+ propFont.family+';';}
str+='font-weight: '+(propFont.bold?'bold':'normal')+';';str+='font-style:  '+(propFont.italic?'italic':'normal')+';';str+='text-decoration: '+(propFont.underline?'underline':'none')+';';str+='text-align: '+ propFont.align+';';str+='font-size: '+ propFont.size+'px'+';';str+='color: '+ propFont.color+';';if(propFont.hasOwnProperty('vspace')&&propFont.vspace!==null&&propFont.vspace!==''&&propFont.vspace!=='0'&&propFont.vspace!==0){str+='line-height: '+ propFont.vspace+'px'+';';}
return str;}
function getWidthStyle(width){var str='';str+='width: '+ width+'px'+';';return str;}
function getWidthPercentStyle(width){var str='';str+='width: '+ width+'%'+';';return str;}
function getHeightStyle(height){var str='';str+='height: '+ height+'px'+';';return str;}
function getHeightPercentStyle(height){var str='';str+='height: '+ height+'%'+';';return str;}
function getLineHeightStyle(lineHeight){var str='';str+='line-height: '+ lineHeight+'px'+';';return str;}
function getTextAlignStyle(align){var str='';str+='text-align: '+ align+';';return str;}
function getDisplayStyle(display){var str='';str+='display: '+(display?'block':'none')+';';return str;}
function getOverflowHiddenStyle(){var str='';str+='overflow: '+'hidden'+';';return str;}
function getOverflowVisibleStyle(){var str='';str+='overflow: '+'visible'+';';return str;}
function getFloatLeftStyle(){var str='';str+='float: '+'left'+';';return str;}
function getFloatRightStyle(){var str='';str+='float: '+'right'+';';return str;}
function getPositionAbsoluteStyle(){var str='';str+='position: '+'absolute'+';';return str;}
function getGeneralStyle(propName,propVal){var str='';str+=propName+': '+ propVal+';';return str;}
function getLeftStyle(left){var str='';str+='left: '+ left+'px'+';';return str;}
function getTopStyle(top){var str='';str+='top: '+ top+'px'+';';return str;}
function getLeftTopWidthHeightStyle(prop){var str='';str+='left: '+ prop.x+'px'+';';str+='top: '+ prop.y+'px'+';';str+='width: '+ prop.width+'px'+';';str+='height: '+ prop.height+'px'+';';return str;}
function getZindexStyle(zindex){var str='';str+='z-index: '+ zindex+';';return str;}
function getCursorStyle(curse){var str='';str+='cursor: '+ curse+';';return str;}
function buildStyles(){$('#element_styles').remove();var str='';str+='.float_left {';str+=getFloatLeftStyle();str+='} ';str+='.float_right {';str+=getFloatRightStyle();str+='} ';for(var i=1;i<=6;i++){var pref='';if(i===6){pref='';}else if(i===5){pref='thx';}else{pref='ep'+ i;}
if(pref.indexOf('ep')===0&&!settings.hasOwnProperty('ep1layout')){continue;}
str+='#'+ pref+'layout {';str+=getBorderStyle(settings[pref+'layout'].border);str+=getBackgroundStyle(settings[pref+'layout'].background);if(settings[pref+'layout'].hasOwnProperty('width')&&settings[pref+'layout'].hasOwnProperty('height')){if(settings[pref+'layout'].border.style==='none'||settings[pref+'layout'].border.width==='0'||settings[pref+'layout'].border.width===0){str+=getWidthStyle(settings[pref+'layout'].width);str+=getHeightStyle(settings[pref+'layout'].height);}else{str+=getWidthStyle(settings[pref+'layout'].width-(2*settings[pref+'layout'].border.width));str+=getHeightStyle(settings[pref+'layout'].height-(2*settings[pref+'layout'].border.width));}}else{if(settings['layout'].border.style==='none'||settings['layout'].border.width==='0'||settings['layout'].border.width===0){str+=getWidthStyle(settings['layout'].width);str+=getHeightStyle(settings['layout'].height);}else{str+=getWidthStyle(settings['layout'].width-(2*settings['layout'].border.width));str+=getHeightStyle(settings['layout'].height-(2*settings['layout'].border.width));}}
str+=getOverflowHiddenStyle();str+=getGeneralStyle('margin','0');str+=getGeneralStyle('padding','0');str+='} ';for(var j=1;j<=4;j++){str+='#'+ pref+'text'+ j+'_wrapper {';str+=getDisplayStyle(settings[pref+'text'+ j].display);str+=getPositionAbsoluteStyle();str+=getLeftTopWidthHeightStyle(settings[pref+'text'+ j]);str+='} ';str+='#'+ pref+'text'+ j+' {';str+=getFontStyle(settings[pref+'text'+ j].font);str+='} ';if(settings[pref+'button'+ j].display){str+='#'+ pref+'button'+ j+'_wrapper {';str+=getDisplayStyle(settings[pref+'button'+ j].display);str+=getPositionAbsoluteStyle();str+=getLeftTopWidthHeightStyle(settings[pref+'button'+ j]);str+=getZindexStyle(9000);str+='} ';str+='.'+ pref+'button'+ j+' {';str+=getFontStyle(settings[pref+'button'+ j].font);str+=getBorderStyle(settings[pref+'button'+ j].border);str+=getBackgroundStyle(settings[pref+'button'+ j].background);str+=getWidthPercentStyle(100);str+=getHeightPercentStyle(100);str+=getCursorStyle('pointer');str+='} ';str+='.'+ pref+'button'+ j+'_hover {';str+=getFontStyle(settings[pref+'button'+ j].font_hover);str+=getBorderStyle(settings[pref+'button'+ j].border_hover);str+=getBackgroundStyle(settings[pref+'button'+ j].background_hover);str+=getCursorStyle('pointer');str+='} ';str+='.'+ pref+'button'+ j+'_focus {';str+=getFontStyle(settings[pref+'button'+ j].font_focus);str+=getBorderStyle(settings[pref+'button'+ j].border_focus);str+=getBackgroundStyle(settings[pref+'button'+ j].background_focus);str+=getCursorStyle('pointer');str+='} ';}
str+='#'+ pref+'image'+ j+'_wrapper {';str+=getDisplayStyle(settings[pref+'image'+ j].display);str+=getPositionAbsoluteStyle();str+=getLeftTopWidthHeightStyle(settings[pref+'image'+ j]);str+=getTextAlignStyle('center');str+='} ';str+='#'+ pref+'image'+ j+' {';str+=getBorderStyle(settings[pref+'image'+ j].border);str+=getGeneralStyle('padding',settings[pref+'image'+ j].padding+'px');str+='} ';str+='#'+ pref+'html'+ j+'_wrapper {';str+=getDisplayStyle(settings[pref+'html'+ j].display);str+=getPositionAbsoluteStyle();str+=getLeftTopWidthHeightStyle(settings[pref+'html'+ j]);str+='} ';}
if(pref!==''){pref+='_';}
if(pref===''||settings.hasOwnProperty('ep1layout')){str+='#'+ pref+'form_wrapper {';str+=getDisplayStyle(settings[pref+'form'].display);str+=getPositionAbsoluteStyle();str+=getLeftTopWidthHeightStyle(settings[pref+'form']);str+='} ';str+='.'+ pref+'form_spacing {';str+=getGeneralStyle('margin-top',settings[pref+'inputs'].spacing+'px');str+='} ';str+='.'+ pref+'form_labels {';str+=getFontStyle(settings[pref+'labels'].font);str+=getOverflowHiddenStyle();str+='} ';str+='.'+ pref+'form_labels_left {';str+=getFloatLeftStyle();str+=getWidthPercentStyle(settings[pref+'labels'].width);str+=getHeightStyle(settings[pref+'inputs'].height);str+=getLineHeightStyle(settings[pref+'inputs'].height);str+='} ';str+='.'+ pref+'form_labels_above {';str+=getFloatRightStyle();str+=getWidthPercentStyle(100);str+=getGeneralStyle('margin-bottom','5px');str+='} ';str+='.'+ pref+'form_labels_hide {';str+=getDisplayStyle(false);str+='} ';str+='.'+ pref+'form_labels_required {';str+=getGeneralStyle('color',settings[pref+'labels'].required.color);str+=getGeneralStyle('margin-left','3px');str+=getGeneralStyle('font-size',((settings[pref+'labels'].required.text=='*')?(parseInt(settings[pref+'labels'].font.size)+ 4):(parseInt(settings[pref+'labels'].font.size)- 2))+'px');str+='} ';str+='.'+ pref+'form_inputs {';str+=getBorderStyle(settings[pref+'inputs'].border);str+=getBackgroundStyle(settings[pref+'inputs'].background);str+=getFontStyle(settings[pref+'inputs'].font);str+=getWidthPercentStyle(100);str+=getHeightStyle(settings[pref+'inputs'].height);str+=getOverflowHiddenStyle();str+=getGeneralStyle('-webkit-box-sizing','border-box');str+=getGeneralStyle('-moz-box-sizing','border-box');str+=getGeneralStyle('box-sizing','border-box');str+=getGeneralStyle('padding-left','5px');str+=getGeneralStyle('padding-right','5px');str+='} ';str+='.'+ pref+'form_inputs_hover {';str+=getBorderStyle(settings[pref+'inputs'].border_hover);str+=getBackgroundStyle(settings[pref+'inputs'].background_hover);str+='} ';str+='.'+ pref+'form_inputs_focus {';str+=getBorderStyle(settings[pref+'inputs'].border_focus);str+=getBackgroundStyle(settings[pref+'inputs'].background_focus);str+='} ';str+='.'+ pref+'form_inputs_error {';str+=getBorderStyle(settings[pref+'inputs'].border_error);str+=getBackgroundStyle(settings[pref+'inputs'].background_error);str+='} ';str+='.'+ pref+'form_inputs_help {';str+=getGeneralStyle('text-align','left');str+=getGeneralStyle('color',settings[pref+'labels'].font.color);str+=getGeneralStyle('font-family',settings[pref+'labels'].font.family);str+=getGeneralStyle('font-size','11px');str+=getGeneralStyle('margin-top','2px');str+=getGeneralStyle('margin-left','2px');str+=getOverflowHiddenStyle();str+=getWidthPercentStyle(100);str+='} ';str+='.'+ pref+'form_inputs_wrapper {';str+=getGeneralStyle('padding','0');str+=getFloatRightStyle();str+=getOverflowVisibleStyle();str+=getWidthPercentStyle((settings[pref+'labels'].position=='left')?(100- settings[pref+'labels'].width- 2):100);str+='} ';str+='#'+ pref+'form_input_opt_in_wrapper  {';str+=(settings[pref+'opt_in'].align=='inputs'||settings[pref+'labels'].position!='left')?getFloatRightStyle():getFloatLeftStyle();str+=getWidthPercentStyle((settings[pref+'opt_in'].align=='inputs'&&settings[pref+'labels'].position=='left')?(100- settings[pref+'labels'].width- 2):100);str+=getGeneralStyle('margin-top',settings[pref+'opt_in'].margin+'px');str+='} ';str+='#'+ pref+'form_input_opt_in {';str+=getFloatLeftStyle();str+=getGeneralStyle('margin','0');str+='} ';str+='#'+ pref+'form_input_opt_in_text {';str+=getGeneralStyle('margin','0');str+=getFontStyle(settings[pref+'opt_in'].font);str+=getLineHeightStyle(settings[pref+'opt_in'].font.size);str+='} ';}}
$('head').append('<style id="element_styles" type="text/css">'+ str+'</style>');}
function buildFormName(pref,form_ele){if(pref!==''){pref+='_';}
if(settings[pref+'name'].display){form_ele.append("<div id='"+ pref+"form_label_name' class='"+ pref+"form_labels'>"+ settings[pref+'name'].label+"<span id='"+ pref+"form_label_name_required' class='"+ pref+"form_labels_required'></span></div>");if(settings[pref+'name'].require&&settings[pref+'labels'].required.text.length>0){$('#'+ pref+'form_label_name_required').text(settings[pref+'labels'].required.text);}
if(settings[pref+'labels'].position=='left'){$('#'+ pref+'form_label_name').addClass(pref+'form_labels_left');}else if(settings[pref+'labels'].position=='above'){$('#'+ pref+'form_label_name').addClass(pref+'form_labels_above');}else{$('#'+ pref+'form_label_name').addClass(pref+'form_labels_hide');}
if(settings[pref+'name'].mode=='full'){form_ele.append("<div id='"+ pref+"form_input_full_name_wrapper' class='"+ pref+"form_inputs_wrapper'><input type='text' id='"+ pref+"form_input_full_name' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_full_name_help' class='"+ pref+"form_inputs_help'></div></div><div style='float: none; clear: both;'></div>");if(settings[pref+'name'].default_full){$('#'+ pref+'form_input_full_name').val(settings[pref+'name'].default_full);}
if(settings[pref+'name'].placeholder_full){$('#'+ pref+'form_input_full_name').attr('placeholder',settings[pref+'name'].placeholder_full);}
if(settings[pref+'name'].display_help){$('#'+ pref+'form_input_full_name_help').text(settings[pref+'name'].help_full);}else{$('#'+ pref+'form_input_full_name_help').hide();}
$('#'+ pref+'form_input_full_name').hover(function(){$(this).addClass(pref+"form_inputs_hover");},function(){$(this).removeClass(pref+"form_inputs_hover");});$('#'+ pref+'form_input_full_name').focus(function(){$(this).addClass(pref+"form_inputs_focus");}).blur(function(){$(this).removeClass(pref+"form_inputs_focus");});$('#'+ pref+'form_input_full_name').keypress(function(e){if(e.which==13){e.preventDefault();processSubmit(pref);}});}else if(settings[pref+'name'].mode=='first'){form_ele.append("<div id='"+ pref+"form_input_first_name_wrapper' class='"+ pref+"form_inputs_wrapper'><input type='text' id='"+ pref+"form_input_first_name' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_first_name_help' class='"+ pref+"form_inputs_help'></div></div><div style='float: none; clear: both;'></div>");if(settings[pref+'name'].default_first){$('#'+ pref+'form_input_first_name').val(settings[pref+'name'].default_first);}
if(settings[pref+'name'].placeholder_first){$('#'+ pref+'form_input_first_name').attr('placeholder',settings[pref+'name'].placeholder_first);}
if(settings[pref+'name'].display_help){$('#'+ pref+'form_input_first_name_help').text(settings[pref+'name'].help_first);}else{$('#'+ pref+'form_input_first_name_help').hide();}
$('#'+ pref+'form_input_first_name').hover(function(){$(this).addClass(pref+"form_inputs_hover");},function(){$(this).removeClass(pref+"form_inputs_hover");});$('#'+ pref+'form_input_first_name').focus(function(){$(this).addClass(pref+"form_inputs_focus");}).blur(function(){$(this).removeClass(pref+"form_inputs_focus");});$('#'+ pref+'form_input_first_name').keypress(function(e){if(e.which==13){e.preventDefault();processSubmit(pref);}});}else if(settings[pref+'name'].mode=='both'){if(settings[pref+'name'].arrange=='horizontal'){form_ele.append("<div id='"+ pref+"form_input_first_and_last_name_wrapper' class='"+ pref+"form_inputs_wrapper'>  <div id='"+ pref+"form_input_first_name_wrapper'><input type='text' id='"+ pref+"form_input_first_name' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_first_name_help' class='"+ pref+"form_inputs_help'></div></div>  <div id='"+ pref+"form_input_last_name_wrapper'><input type='text' id='"+ pref+"form_input_last_name' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_last_name_help' class='"+ pref+"form_inputs_help'></div></div>  </div>  <div style='float: none; clear: both;'></div>");$('#'+ pref+'form_input_last_name_wrapper').css({"float":'right',"width":'48%'});$('#'+ pref+'form_input_first_name_wrapper').css({"float":'left',"width":'48%'});}else{form_ele.append("<div id='"+ pref+"form_input_first_and_last_name_wrapper' class='"+ pref+"form_inputs_wrapper'>  <div id='"+ pref+"form_input_first_name_wrapper'><input type='text' id='"+ pref+"form_input_first_name' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_first_name_help' class='"+ pref+"form_inputs_help'></div></div>  <div id='"+ pref+"form_input_last_name_wrapper'><input type='text' id='"+ pref+"form_input_last_name' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_last_name_help' class='"+ pref+"form_inputs_help'></div></div>  </div>  <div style='float: none; clear: both;'></div>");$('#'+ pref+'form_input_last_name_wrapper').css({"float":'right',"width":'100%',"margin-top":settings[pref+'inputs'].spacing+'px'});$('#'+ pref+'form_input_first_name_wrapper').css({"float":'right',"width":'100%'});}
if(settings[pref+'name'].default_last){$('#'+ pref+'form_input_last_name').val(settings[pref+'name'].default_last);}
if(settings[pref+'name'].default_first){$('#'+ pref+'form_input_first_name').val(settings[pref+'name'].default_first);}
if(settings[pref+'name'].placeholder_last){$('#'+ pref+'form_input_last_name').attr('placeholder',settings[pref+'name'].placeholder_last);}
if(settings[pref+'name'].placeholder_first){$('#'+ pref+'form_input_first_name').attr('placeholder',settings[pref+'name'].placeholder_first);}
if(settings[pref+'name'].display_help){$('#'+ pref+'form_input_last_name_help').text(settings[pref+'name'].help_last);}else{$('#'+ pref+'form_input_last_name_help').hide();}
if(settings[pref+'name'].display_help){$('#'+ pref+'form_input_first_name_help').text(settings[pref+'name'].help_first);}else{$('#'+ pref+'form_input_first_name_help').hide();}
$('#'+ pref+'form_input_last_name').hover(function(){$(this).addClass(pref+"form_inputs_hover");},function(){$(this).removeClass(pref+"form_inputs_hover");});$('#'+ pref+'form_input_last_name').focus(function(){$(this).addClass(pref+"form_inputs_focus");}).blur(function(){$(this).removeClass(pref+"form_inputs_focus");});$('#'+ pref+'form_input_first_name').hover(function(){$(this).addClass(pref+"form_inputs_hover");},function(){$(this).removeClass(pref+"form_inputs_hover");});$('#'+ pref+'form_input_first_name').focus(function(){$(this).addClass(pref+"form_inputs_focus");}).blur(function(){$(this).removeClass(pref+"form_inputs_focus");});$('#'+ pref+'form_input_last_name').keypress(function(e){if(e.which==13){e.preventDefault();processSubmit(pref);}});$('#'+ pref+'form_input_first_name').keypress(function(e){if(e.which==13){e.preventDefault();processSubmit(pref);}});}}}
function buildFormEmail(pref,form_ele){if(pref!==''){pref+='_';}
if(settings[pref+'email'].display){form_ele.append("<div id='"+ pref+"form_label_email' class='"+ pref+"form_labels form_spacing'>"+ settings[pref+'email'].label+"<span id='"+ pref+"form_label_email_required' class='"+ pref+"form_labels_required'></span></div>");form_ele.append("<div id='"+ pref+"form_input_email_wrapper' class='"+ pref+"form_inputs_wrapper'><input type='text' id='"+ pref+"form_input_email' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_email_help' class='"+ pref+"form_inputs_help'></div></div><div style='float: none; clear: both;'></div>");if(settings[pref+'email'].require&&settings[pref+'labels'].required.text.length>0){$('#'+ pref+'form_label_email_required').text(settings[pref+'labels'].required.text);}
if(settings[pref+'labels'].position=='left'){$('#'+ pref+'form_label_email').addClass(pref+'form_labels_left');$('#'+ pref+'form_input_email_wrapper').addClass(pref+'form_spacing');}else if(settings[pref+'labels'].position=='above'){$('#'+ pref+'form_label_email').addClass(pref+'form_labels_above');}else{$('#'+ pref+'form_label_email').addClass(pref+'form_labels_hide');$('#'+ pref+'form_input_email_wrapper').addClass(pref+'form_spacing');}
if(settings[pref+'email']['default']){$('#'+ pref+'form_input_email').val(settings[pref+'email']['default']);}
if(settings[pref+'email'].placeholder){$('#'+ pref+'form_input_email').attr('placeholder',settings[pref+'email'].placeholder);}
if(settings[pref+'email'].display_help){$('#'+ pref+'form_input_email_help').text(settings[pref+'email'].help);}else{$('#'+ pref+'form_input_email_help').hide();}
$('#'+ pref+'form_input_email').hover(function(){$(this).addClass(pref+"form_inputs_hover");},function(){$(this).removeClass(pref+"form_inputs_hover");});$('#'+ pref+'form_input_email').focus(function(){$(this).addClass(pref+"form_inputs_focus");}).blur(function(){$(this).removeClass(pref+"form_inputs_focus");});$('#'+ pref+'form_input_email').keypress(function(e){if(e.which==13){e.preventDefault();processSubmit(pref);}});}}
function buildFormPhone(pref,form_ele){if(pref!==''){pref+='_';}
if(settings[pref+'phone'].display){form_ele.append("<div id='"+ pref+"form_label_phone' class='"+ pref+"form_labels form_spacing'>"+ settings[pref+'phone'].label+"<span id='"+ pref+"form_label_phone_required' class='"+ pref+"form_labels_required'></span></div>");form_ele.append("<div id='"+ pref+"form_input_phone_wrapper' class='"+ pref+"form_inputs_wrapper'><input type='text' id='"+ pref+"form_input_phone' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_phone_help' class='"+ pref+"form_inputs_help'></div></div><div style='float: none; clear: both;'></div>");if(settings[pref+'phone'].require&&settings[pref+'labels'].required.text.length>0){$('#'+ pref+'form_label_phone_required').text(settings[pref+'labels'].required.text);}
if(settings[pref+'labels'].position=='left'){$('#'+ pref+'form_label_phone').addClass(pref+'form_labels_left');$('#'+ pref+'form_input_phone_wrapper').addClass(pref+'form_spacing');}else if(settings[pref+'labels'].position=='above'){$('#'+ pref+'form_label_phone').addClass(pref+'form_labels_above');}else{$('#'+ pref+'form_label_phone').addClass(pref+'form_labels_hide');$('#'+ pref+'form_input_phone_wrapper').addClass(pref+'form_spacing');}
if(settings[pref+'phone']['default']){$('#'+ pref+'form_input_phone').val(settings[pref+'phone']['default']);}
if(settings[pref+'phone'].placeholder){$('#'+ pref+'form_input_phone').attr('placeholder',settings[pref+'phone'].placeholder);}
if(settings[pref+'phone'].display_help){$('#'+ pref+'form_input_phone_help').text(settings[pref+'phone'].help);}else{$('#'+ pref+'form_input_phone_help').hide();}
$('#'+ pref+'form_input_phone').hover(function(){$(this).addClass(pref+"form_inputs_hover");},function(){$(this).removeClass(pref+"form_inputs_hover");});$('#'+ pref+'form_input_phone').focus(function(){$(this).addClass(pref+"form_inputs_focus");}).blur(function(){$(this).removeClass(pref+"form_inputs_focus");});$('#'+ pref+'form_input_phone').keypress(function(e){if(e.which==13){e.preventDefault();processSubmit(pref);}});}}
function buildFormOptIn(pref,form_ele){if(pref!==''){pref+='_';}
if(settings[pref+'opt_in'].display){form_ele.append("<div id='"+ pref+"form_input_opt_in_wrapper'><input type='checkbox' id='"+ pref+"form_input_opt_in' /><p id='"+ pref+"form_input_opt_in_text'>"+ settings[pref+'opt_in'].text+"</p> <div style='float: none; clear: both;'></div></div>");if(settings[pref+'opt_in'].font.size<=10){$('#'+ pref+'form_input_opt_in_text').css({"margin-top":"2px","margin-left":"20px"});}else if(settings[pref+'opt_in'].font.size>10&&settings[pref+'opt_in'].font.size<14){$('#'+ pref+'form_input_opt_in_text').css({"margin-top":"1px","margin-left":"20px"});}else if(settings[pref+'opt_in'].font.size>=14){$('#'+ pref+'form_input_opt_in_text').css({"margin-top":"-1px","margin-left":"20px"});}}}
function buildFormCustomN(pref,propName,form_ele){if(pref!==''){pref+='_';}
var customN=propName;if(propName.indexOf('_')>0&&propName.indexOf('custom')>0){customN=propName.split('_')[1];}
if(settings.hasOwnProperty(propName)&&settings[propName].display){if(!settings[propName].hasOwnProperty('field_type')||settings[propName].field_type=='textbox'){form_ele.append("<div id='"+ pref+"form_label_"+ customN+"' class='"+ pref+"form_labels form_spacing'>"+ settings[propName].label+"<span id='"+ pref+"form_label_"+ customN+"_required' class='"+ pref+"form_labels_required'></span></div>");form_ele.append("<div id='"+ pref+"form_input_"+ customN+"_wrapper' class='"+ pref+"form_inputs_wrapper'><input type='text' id='"+ pref+"form_input_"+ customN+"' class='"+ pref+"form_inputs' /><div id='"+ pref+"form_input_"+ customN+"_help' class='"+ pref+"form_inputs_help'></div></div><div style='float: none; clear: both;'></div>");if(settings[propName].placeholder){$('#'+ pref+'form_input_'+ customN).attr('placeholder',settings[propName].placeholder);}
if(settings[propName]['default']){$('#'+ pref+'form_input_'+ customN).val(settings[propName]['default']);}}else if(settings[propName].field_type=='textarea'){form_ele.append("<div id='"+ pref+"form_label_"+ customN+"' class='"+ pref+"form_labels form_spacing'>"+ settings[propName].label+"<span id='"+ pref+"form_label_"+ customN+"_required' class='"+ pref+"form_labels_required'></span></div>");form_ele.append("<div id='"+ pref+"form_input_"+ customN+"_wrapper' class='"+ pref+"form_inputs_wrapper'><textarea id='"+ pref+"form_input_"+ customN+"' class='"+ pref+"form_inputs' style='height: "+ settings[propName].textarea_height+"px; margin-bottom: 0px;'></textarea><div id='"+ pref+"form_input_"+ customN+"_help' class='"+ pref+"form_inputs_help' style='margin-top: 0px;'></div></div><div style='float: none; clear: both;'></div>");if(settings[propName].placeholder){$('#'+ pref+'form_input_'+ customN).attr('placeholder',settings[propName].placeholder);}
if(settings[propName]['default']){$('#'+ pref+'form_input_'+ customN).val(settings[propName]['default']);}}else if(settings[propName].field_type=='dropdown'){form_ele.append("<div id='"+ pref+"form_label_"+ customN+"' class='"+ pref+"form_labels form_spacing'>"+ settings[propName].label+"<span id='"+ pref+"form_label_"+ customN+"_required' class='"+ pref+"form_labels_required'></span></div>");form_ele.append("<div id='"+ pref+"form_input_"+ customN+"_wrapper' class='"+ pref+"form_inputs_wrapper'><select id='"+ pref+"form_input_"+ customN+"' class='"+ pref+"form_inputs'></select><div id='"+ pref+"form_input_"+ customN+"_help' class='"+ pref+"form_inputs_help'></div></div><div style='float: none; clear: both;'></div>");if(settings[propName].dropdown_kvps.length>0){var dropdown=$('#'+ pref+'form_input_'+ customN);var kvps=settings[propName].dropdown_kvps;var foundSelected=false;for(var i=0;i<kvps.length;i++){if(!foundSelected&&settings[propName]['default']&&(kvps[i].k==settings[propName]['default']||kvps[i].v==settings[propName]['default'])){dropdown.append("<option selected value='"+ kvps[i].k+"'>"+ kvps[i].v+"</option>");}else{dropdown.append("<option value='"+ kvps[i].k+"'>"+ kvps[i].v+"</option>");}}}}else if(settings[propName].field_type=='hidden'){form_ele.append("<input type='hidden' id='"+ pref+"form_input_"+ customN+"' class='"+ pref+"form_inputs' />");if(settings[propName]['default']){$('#'+ pref+'form_input_'+ customN).val(settings[propName]['default']);}}
if(!settings[propName].hasOwnProperty('field_type')||settings[propName].field_type!=='hidden'){if(settings[propName].require&&settings.labels.required.text.length>0){$('#'+ pref+'form_label_'+ customN+'_required').text(settings.labels.required.text);}
if(settings.labels.position=='left'){$('#'+ pref+'form_label_'+ customN).addClass(pref+'form_labels_left');$('#'+ pref+'form_input_'+ customN+'_wrapper').addClass(pref+'form_spacing');}else if(settings.labels.position=='above'){$('#'+ pref+'form_label_'+ customN).addClass(pref+'form_labels_above');}else{$('#'+ pref+'form_label_'+ customN).addClass(pref+'form_labels_hide');$('#'+ pref+'form_input_'+ customN+'_wrapper').addClass(pref+'form_spacing');}
if(settings[propName].display_help){$('#'+ pref+'form_input_'+ customN+'_help').text(settings[propName].help);}else{$('#'+ pref+'form_input_'+ customN+'_help').hide();}
$('#'+ pref+'form_input_'+ customN).hover(function(){$(this).addClass(pref+"form_inputs_hover");},function(){$(this).removeClass(pref+"form_inputs_hover");});$('#'+ pref+'form_input_'+ customN).focus(function(){$(this).addClass(pref+"form_inputs_focus");}).blur(function(){$(this).removeClass(pref+"form_inputs_focus");});if(!settings[propName].hasOwnProperty('field_type')||settings[propName].field_type=='textbox'||settings[propName].field_type=='dropdown'){$('#'+ pref+'form_input_'+ customN).keypress(function(e){if(e.which==13){e.preventDefault();processSubmit(pref);}});}}}else if(settings.hasOwnProperty(propName)){form_ele.append("<input type='hidden' id='"+ pref+"form_input_"+ customN+"' class='"+ pref+"form_inputs' />");}}
function logger(msg,isJson){if(!SHOW_ERRORS)
return;if(typeof console!=='undefined'){if(isJson){try{console.log(JSON.stringify(msg,undefined,2));}catch(err){console.log(msg+'/n/n'+'Exception: '+ err.message);}}else{if(typeof msg==='string'&&msg.indexOf('DIGIOH:')!==0){console.log('DIGIOH: '+ msg);}else{console.log(msg);}}}}
CUSTOM_JS_GUIDS_ARR=[];CUSTOM_JS_BOX_EMBED={};function getCustomJsGuidsToRun(event_trigger,params_obj){var customJsGuidsToRun=[];for(var i=0;i<CUSTOM_JS_GUIDS_ARR.length;i++){if(CUSTOM_JS_BOX_EMBED.hasOwnProperty(CUSTOM_JS_GUIDS_ARR[i])&&CUSTOM_JS_BOX_EMBED[CUSTOM_JS_GUIDS_ARR[i]].trigger===event_trigger){var skip_exclude_filter=false;var skip_include_exclude_function=false;var ev=CUSTOM_JS_BOX_EMBED[CUSTOM_JS_GUIDS_ARR[i]];if(typeof ev.include_filter==='string'&&ev.include_filter.trim().length>0){var include_filter_parts=ev.include_filter.split(',');if(include_filter_parts.length>0){skip_exclude_filter=true;skip_include_exclude_function=true;for(var j=0;j<include_filter_parts.length;j++){if(IS_VARIATION&&VARIATION_GUID.trim().toLowerCase()===include_filter_parts[j].trim().toLowerCase()&&$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}
else if(IS_VARIATION&&VARIATION_SHORT_ID.trim().toLowerCase()===include_filter_parts[j].trim().toLowerCase()&&$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}
else if(LIGHTBOX_GUID.trim().toLowerCase()===include_filter_parts[j].trim().toLowerCase()&&$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}
else if(LIGHTBOX_SHORT_ID.trim().toLowerCase()===include_filter_parts[j].trim().toLowerCase()&&$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}}}
else if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}}
else if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}
if(!skip_exclude_filter&&typeof ev.exclude_filter==='string'&&ev.exclude_filter.trim().length>0){var exclude_filter_parts=ev.exclude_filter.split(',');if(exclude_filter_parts.length>0){for(var j=0;j<exclude_filter_parts.length;j++){if(IS_VARIATION&&VARIATION_GUID.trim().toLowerCase()===exclude_filter_parts[j].trim().toLowerCase()){if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)!==-1){var index=$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun);customJsGuidsToRun.splice(index,1);}
skip_include_exclude_function=true;break;}
else if(IS_VARIATION&&VARIATION_SHORT_ID.trim().toLowerCase()===exclude_filter_parts[j].trim().toLowerCase()){if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)!==-1){var index=$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun);customJsGuidsToRun.splice(index,1);}
skip_include_exclude_function=true;break;}
else if(LIGHTBOX_GUID.trim().toLowerCase()===exclude_filter_parts[j].trim().toLowerCase()){if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)!==-1){var index=$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun);customJsGuidsToRun.splice(index,1);}
skip_include_exclude_function=true;break;}
else if(LIGHTBOX_SHORT_ID.trim().toLowerCase()===exclude_filter_parts[j].trim().toLowerCase()){if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)!==-1){var index=$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun);customJsGuidsToRun.splice(index,1);}
skip_include_exclude_function=true;break;}}}}
if(!skip_include_exclude_function&&typeof ev.include_exclude_function==='function'){var ief_res=ev.include_exclude_function(parent.DIGIOH_API,STANDARD_OBJ,params_obj);if(typeof ief_res==='boolean'&&ief_res===true){if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}}else{if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)!==-1){var index=$.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun);customJsGuidsToRun.splice(index,1);}}}
else if(!skip_include_exclude_function&&typeof ev.include_exclude_function!=='function'){if($.inArray(CUSTOM_JS_GUIDS_ARR[i],customJsGuidsToRun)===-1){customJsGuidsToRun.push(CUSTOM_JS_GUIDS_ARR[i]);}}}}
if(customJsGuidsToRun.length>0){logger('getCustomJsGuidsToRun('+ event_trigger+')');logger(customJsGuidsToRun);}
return customJsGuidsToRun;}
function mergeObjectData(obj1,obj2){var obj3={};for(var attrname in obj1){obj3[attrname]=obj1[attrname];}
for(var attrname in obj2){obj3[attrname]=obj2[attrname];}
return obj3;}
function runCustomJsGuidsSync(calling_fctn_name,custom_js_guids_to_run,params_obj,return_type){var res_final='temp';try{if(custom_js_guids_to_run.length>0){for(var i=0;i<custom_js_guids_to_run.length;i++){if(typeof CUSTOM_JS_BOX_EMBED[custom_js_guids_to_run[i]].code==='function'){BOX_CUSTOM_JS.log('RUNNER: runCustomJsGuidsSync('+ calling_fctn_name+', '+ return_type+')');if(return_type==='void'||return_type===''){CUSTOM_JS_BOX_EMBED[custom_js_guids_to_run[i]].code(parent.DIGIOH_API,STANDARD_OBJ,params_obj);}else{var res=CUSTOM_JS_BOX_EMBED[custom_js_guids_to_run[i]].code(parent.DIGIOH_API,STANDARD_OBJ,params_obj);if(typeof res==='undefined'||res===null){if(res_final==='temp'){res_final=true;}}
else if(typeof res==='boolean'){if(res_final==='temp'){res_final=res;}else{res_final=res_final&&res;}}
else if(typeof res==='string'||typeof res==='number'){if(res_final==='temp'){res_final=res;}else{res_final+=res;}}
else if(typeof res==='object'){if(res_final==='temp'){res_final=res;}else if(typeof res_final==='object'){res_final=mergeObjectData(res_final,res);}}}}}}
else{return;}}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsGuidsSync() - '+ e.message);}
if(return_type==='void'||return_type===''){return;}else if(return_type.indexOf(typeof res_final)===-1){return;}
return res_final;}
BOX_CUSTOM_JS={runCustomJsBeforeDOMReady:function(){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before DOM Ready',{});var res=runCustomJsGuidsSync('runCustomJsBeforeDOMReady',customJsGuidsToRun,{},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeDOMReady() - '+ e.message);}},runCustomJsAfterDOMReady:function(){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After DOM Ready',{});var res=runCustomJsGuidsSync('runCustomJsAfterDOMReady',customJsGuidsToRun,{},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterDOMReady() - '+ e.message);}},runCustomJsBeforeDisplay:function(){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Display',{});var res=runCustomJsGuidsSync('runCustomJsBeforeDisplay',customJsGuidsToRun,{},'boolean');if(res===false){}}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeDisplay() - '+ e.message);}},runCustomJsAfterDisplay:function(){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Display',{});var res=runCustomJsGuidsSync('runCustomJsAfterDisplay',customJsGuidsToRun,{},'boolean');if(res===false){}}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterDisplay() - '+ e.message);}},runCustomJsBeforeFormValidation:function(form){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Form Validation',form);return runCustomJsGuidsSync('runCustomJsBeforeFormValidation',customJsGuidsToRun,form,'boolean,string,object');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeFormValidation() - '+ e.message);}},runCustomJsAfterFormValidation:function(form){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Form Validation',form);return runCustomJsGuidsSync('runCustomJsAfterFormValidation',customJsGuidsToRun,form,'boolean,string,object');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterFormValidation() - '+ e.message);}},runCustomJsBeforeSubmit:function(form){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Submit',form);return runCustomJsGuidsSync('runCustomJsBeforeSubmit',customJsGuidsToRun,form,'boolean,string,object');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeSubmit() - '+ e.message);}},runCustomJsAfterSubmit:function(form){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Submit',form);return runCustomJsGuidsSync('runCustomJsAfterSubmit',customJsGuidsToRun,form,'boolean');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterSubmit() - '+ e.message);}},runCustomJsBeforeRedirect:function(element,trigger){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Redirect',{element:element,trigger:trigger});return runCustomJsGuidsSync('runCustomJsBeforeRedirect',customJsGuidsToRun,{element:element,trigger:trigger},'boolean');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeRedirect() - '+ e.message);}},runCustomJsAfterRedirect:function(element,trigger){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Redirect',{element:element,trigger:trigger});return runCustomJsGuidsSync('runCustomJsAfterRedirect',customJsGuidsToRun,{element:element,trigger:trigger},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterRedirect() - '+ e.message);}},runCustomJsBeforeDownload:function(page,name,element){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Download',{page:page,name:name,element:element});return runCustomJsGuidsSync('runCustomJsBeforeDownload',customJsGuidsToRun,{page:page,name:name,element:element},'boolean');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeDownload() - '+ e.message);}},runCustomJsAfterDownload:function(page,name,element){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Download',{page:page,name:name,element:element});return runCustomJsGuidsSync('runCustomJsAfterDownload',customJsGuidsToRun,{page:page,name:name,element:element},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterDownload() - '+ e.message);}},runCustomJsBeforeOpenAnotherBox:function(target_lightbox_guid,trigger){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Open Another Box',{target_lightbox_guid:target_lightbox_guid,trigger:trigger});return runCustomJsGuidsSync('runCustomJsBeforeOpenAnotherBox',customJsGuidsToRun,{target_lightbox_guid:target_lightbox_guid,trigger:trigger},'boolean');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeOpenAnotherBox() - '+ e.message);}},runCustomJsAfterOpenAnotherBox:function(target_lightbox_guid,trigger){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Open Another Box',{target_lightbox_guid:target_lightbox_guid,trigger:trigger});return runCustomJsGuidsSync('runCustomJsAfterOpenAnotherBox',customJsGuidsToRun,{target_lightbox_guid:target_lightbox_guid,trigger:trigger},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterOpenAnotherBox() - '+ e.message);}},runCustomJsBeforeChangePages:function(old_page,new_page,name,element,trigger){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Change Pages',{old_page:old_page,new_page:new_page,name:name,element:element,trigger:trigger});return runCustomJsGuidsSync('runCustomJsBeforeChangePages',customJsGuidsToRun,{old_page:old_page,new_page:new_page,name:name,element:element,trigger:trigger},'boolean');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeChangePages() - '+ e.message);}},runCustomJsAfterChangePages:function(old_page,new_page,name,element,trigger){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Change Pages',{old_page:old_page,new_page:new_page,name:name,element:element,trigger:trigger});return runCustomJsGuidsSync('runCustomJsAfterChangePages',customJsGuidsToRun,{old_page:old_page,new_page:new_page,name:name,element:element,trigger:trigger},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterChangePages() - '+ e.message);}},runCustomJsBeforeClose:function(){try{var customJsGuidsToRun=getCustomJsGuidsToRun('Before Close',{});var res=runCustomJsGuidsSync('runCustomJsBeforeClose',customJsGuidsToRun,{},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsBeforeClose() - '+ e.message);}},runCustomJsAfterClose:function(){try{var customJsGuidsToRun=getCustomJsGuidsToRun('After Close',{});var res=runCustomJsGuidsSync('runCustomJsAfterClose',customJsGuidsToRun,{},'void');}
catch(e){BOX_CUSTOM_JS.log('ERROR: runCustomJsAfterClose() - '+ e.message);}},log:function(msg){try{if(typeof console!=="undefined"&&typeof SHOW_ERRORS!=="undefined"&&SHOW_ERRORS){if(typeof msg==='string'&&msg.indexOf('DIGIOH:')!==0){console.log('DIGIOH: '+ msg);}else{console.log(msg);}}}
catch(e){}}};checkJqLoaded();